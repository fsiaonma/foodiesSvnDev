var EventDelegate=EventDelegate||{delegateList:[],init:function(){var e=this;document.body.addEventListener("click",function(t){e.delegateList.map(function(e){var n=t.target;(function(n){e.id===n.id?e.callback(t):n.parentNode&&arguments.callee(n.parentNode)})(n)})},!0),window.addEventListener("hashchange",function(e){Router.handleHash(e.newURL)}),window.addEventListener("load",function(){var e=this;View.renderEl("stageContainer");var t=new Load(function(){window.location.hash!="#user/renderIndex"?Router.goto("#user/renderIndex"):Router.handleHash("#user/renderIndex")})})},bind:function(e,t){this.delegateList.push({id:e,callback:t})},remove:function(e){for(var t=0,n=this.delegateList.length;t<n;++t)if(this.delegateList[t].id===e){var r=this.delegateList[t];this.delegateList[t]=this.delegateList[n-1],this.delegateList[n-1]=r,this.delegateList.pop()}}};var Router=Router||{hashConfig:{"#user/renderIndex":"renderIndex","#user/renderLogin":"renderLogin","#user/renderRegiest":"renderRegiest","#user/renderFriendsPatten":"renderFriendsPatten","#user/renderChoose":"renderChoose","#user/renderMatching":"renderMatching","#user/renderSearch":"renderSearch","#game/renderGame":"renderGame"},handleHash:function(e){var t=e.indexOf("#")==-1?"#user/renderIndex":e.substr(e.indexOf("#"));if(!this.hashConfig[t]||!UserView||!GameView)return;var n=t.substr(t.indexOf("#")+1,t.indexOf("/")-1);switch(n){case"user":UserView[this.hashConfig[t]].call(UserView);break;case"game":GameView[this.hashConfig[t]].call(GameView)}},"goto":function(e){window.location.hash=e}};var Model=Model||{Extend:function(e){return e}};var Controller=Controller||{Extend:function(e){return e}};var View=View||{Extend:function(e){if(e.events)for(var t in e.events)(function(t){EventDelegate.bind(t,function(){e[e.events[t]].call(e)})})(t);return e.renderEl=this.renderEl,e},renderEl:function(e){document.getElementById("container").innerHTML=document.getElementById(e).innerHTML}};!function(e,t){var n=function(){return n.get.apply(n,arguments)},r=n.utils={isArray:Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},isPlainObject:function(e){return!!e&&Object.prototype.toString.call(e)==="[object Object]"},toArray:function(e){return Array.prototype.slice.call(e)},getKeys:Object.keys||function(e){var t=[],n="";for(n in e)e.hasOwnProperty(n)&&t.push(n);return t},escape:function(e){return String(e).replace(/[,;"\\=\s%]/g,function(e){return encodeURIComponent(e)})},retrieve:function(e,t){return e==null?t:e}};n.defaults={},n.expiresMultiplier=86400,n.set=function(n,i,s){if(r.isPlainObject(n))for(var o in n)n.hasOwnProperty(o)&&this.set(o,n[o],i);else{s=r.isPlainObject(s)?s:{expires:s};var u=s.expires!==t?s.expires:this.defaults.expires||"",a=typeof u;a==="string"&&u!==""?u=new Date(u):a==="number"&&(u=new Date(+(new Date)+1e3*this.expiresMultiplier*u)),u!==""&&"toGMTString"in u&&(u=";expires="+u.toGMTString());var f=s.path||this.defaults.path;f=f?";path="+f:"";var l=s.domain||this.defaults.domain;l=l?";domain="+l:"";var c=s.secure||this.defaults.secure?";secure":"";e.cookie=r.escape(n)+"="+r.escape(i)+u+f+l+c}return this},n.remove=function(e){e=r.isArray(e)?e:r.toArray(arguments);for(var t=0,n=e.length;t<n;t++)this.set(e[t],"",-1);return this},n.empty=function(){return this.remove(r.getKeys(this.all()))},n.get=function(e,n){n=n||t;var i=this.all();if(r.isArray(e)){var s={};for(var o=0,u=e.length;o<u;o++){var a=e[o];s[a]=r.retrieve(i[a],n)}return s}return r.retrieve(i[e],n)},n.all=function(){if(e.cookie==="")return{};var t=e.cookie.split("; "),n={};for(var r=0,i=t.length;r<i;r++){var s=t[r].split("=");n[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return n},n.enabled=function(){if(navigator.cookieEnabled)return!0;var e=n.set("_","_").get("_")==="_";return n.remove("_"),e},typeof define=="function"&&define.amd?define(function(){return n}):typeof exports!="undefined"?exports.cookie=n:window.cookie=n}(document);function require(e,t,n){var r=require.resolve(e);if(null==r){n=n||e,t=t||"root";var i=new Error('Failed to require "'+n+'" from "'+t+'"');throw i.path=n,i.parent=t,i.require=!0,i}var s=require.modules[r];return s.exports||(s.exports={},s.client=s.component=!0,s.call(this,s.exports,require.relative(r),s)),s.exports}var has=Object.prototype.hasOwnProperty;require.modules={},require.aliases={},require.resolve=function(e){e.charAt(0)==="/"&&(e=e.slice(1));var t=e+"/index.js",n=[e,e+".js",e+".json",e+"/index.js",e+"/index.json"];for(var r=0;r<n.length;r++){var e=n[r];if(has.call(require.modules,e))return e}if(has.call(require.aliases,t))return require.aliases[t]},require.normalize=function(e,t){var n=[];if("."!=t.charAt(0))return t;e=e.split("/"),t=t.split("/");for(var r=0;r<t.length;++r)".."==t[r]?e.pop():"."!=t[r]&&""!=t[r]&&n.push(t[r]);return e.concat(n).join("/")},require.register=function(e,t){require.modules[e]=t},require.alias=function(e,t){if(!has.call(require.modules,e))throw new Error('Failed to alias "'+e+'", it does not exist');require.aliases[t]=e},require.relative=function(e){function n(e,t){var n=e.length;while(n--)if(e[n]===t)return n;return-1}function r(t){var n=r.resolve(t);return require(n,e,t)}var t=require.normalize(e,"..");return r.resolve=function(r){var i=r.charAt(0);if("/"==i)return r.slice(1);if("."==i)return require.normalize(t,r);var s=e.split("/"),o=n(s,"deps")+1;return o||(o=0),r=s.slice(0,o+1).join("/")+"/deps/"+r,r},r.exists=function(e){return has.call(require.modules,r.resolve(e))},r},require.register("component-indexof/index.js",function(e,t,n){var r=[].indexOf;n.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}}),require.register("component-emitter/index.js",function(e,t,n){function i(e){if(e)return s(e)}function s(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}var r=t("indexof");n.exports=i,i.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},i.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},t._off=r,this.on(e,r),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;var i=r(n,t._off||t);return~i&&n.splice(i,1),this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),require.register("NetEase-pomelo-protocol/lib/protocol.js",function(e,t,n){(function(e,t,r){var i=e,s=4,o=1,u=2,a=5,f=1,l=65535,c=1,h=7,p=i.Package={},d=i.Message={};p.TYPE_HANDSHAKE=1,p.TYPE_HANDSHAKE_ACK=2,p.TYPE_HEARTBEAT=3,p.TYPE_DATA=4,p.TYPE_KICK=5,d.TYPE_REQUEST=0,d.TYPE_NOTIFY=1,d.TYPE_RESPONSE=2,d.TYPE_PUSH=3,i.strencode=function(e){var n=new t(e.length*3),r=0;for(var i=0;i<e.length;i++){var s=e.charCodeAt(i),o=null;s<=127?o=[s]:s<=2047?o=[192|s>>6,128|s&63]:o=[224|s>>12,128|(s&4032)>>6,128|s&63];for(var u=0;u<o.length;u++)n[r]=o[u],++r}var a=new t(r);return v(a,0,n,0,r),a},i.strdecode=function(e){var n=new t(e),r=[],i=0,s=0,o=n.length;while(i<o)n[i]<128?(s=n[i],i+=1):n[i]<224?(s=((n[i]&63)<<6)+(n[i+1]&63),i+=2):(s=((n[i]&15)<<12)+((n[i+1]&63)<<6)+(n[i+2]&63),i+=3),r.push(s);return String.fromCharCode.apply(null,r)},p.encode=function(e,n){var r=n?n.length:0,i=new t(s+r),o=0;return i[o++]=e&255,i[o++]=r>>16&255,i[o++]=r>>8&255,i[o++]=r&255,n&&v(i,o,n,0,r),i},p.decode=function(e){var n=new t(e),r=n[0],i=1,o=(n[i++]<<16|n[i++]<<8|n[i++])>>>0,u=o?new t(o):null;return v(u,0,n,s,o),{type:r,body:u}},d.encode=function(e,n,r,s,a){var l=m(n)?y(e):0,c=o+l;if(g(n))if(r){if(typeof s!="number")throw new Error("error flag for number route!");c+=u}else{c+=f;if(s){s=i.strencode(s);if(s.length>255)throw new Error("route maxlength is overflow");c+=s.length}}a&&(c+=a.length);var h=new t(c),p=0;return p=b(n,r,h,p),m(n)&&(p=w(e,l,h,p)),g(n)&&(p=E(r,s,h,p)),a&&(p=S(a,h,p)),h},d.decode=function(e){var n=new t(e),r=n.length||n.byteLength,s=0,o=0,u=null,a=n[s++],f=a&c,l=a>>1&h;if(m(l)){var p=n[s++];o=p&127;while(p&128)o<<=7,p=n[s++],o|=p&127}if(g(l))if(f)u=n[s++]<<8|n[s++];else{var d=n[s++];d?(u=new t(d),v(u,0,n,s,d),u=i.strdecode(u)):u="",s+=d}var y=r-s,b=new t(y);return v(b,0,n,s,y),{id:o,type:l,compressRoute:f,route:u,body:b}};var v=function(e,t,n,r,i){if("function"==typeof n.copy)n.copy(e,t,r,r+i);else for(var s=0;s<i;s++)e[t++]=n[r++]},m=function(e){return e===d.TYPE_REQUEST||e===d.TYPE_RESPONSE},g=function(e){return e===d.TYPE_REQUEST||e===d.TYPE_NOTIFY||e===d.TYPE_PUSH},y=function(e){var t=0;do t+=1,e>>=7;while(e>0);return t},b=function(e,t,n,r){if(e!==d.TYPE_REQUEST&&e!==d.TYPE_NOTIFY&&e!==d.TYPE_RESPONSE&&e!==d.TYPE_PUSH)throw new Error("unkonw message type: "+e);return n[r]=e<<1|(t?1:0),r+o},w=function(e,t,n,r){var i=r+t-1;n[i--]=e&127;while(i>=r)e>>=7,n[i--]=e&127|128;return r+t},E=function(e,t,n,r){if(e){if(t>l)throw new Error("route number is overflow");n[r++]=t>>8&255,n[r++]=t&255}else t?(n[r++]=t.length&255,v(n,r,t,0,t.length),r+=t.length):n[r++]=0;return r},S=function(e,t,n){return v(t,n,e,0,e.length),n+e.length};n.exports=i})("object"==typeof n?n.exports:this.Protocol={},"object"==typeof n?Buffer:Uint8Array,this)}),require.register("pomelonode-pomelo-protobuf/lib/client/protobuf.js",function(e,t,n){(function(e,t){var r=e;r.init=function(e){r.encoder.init(e.encoderProtos),r.decoder.init(e.decoderProtos)},r.encode=function(e,t){return r.encoder.encode(e,t)},r.decode=function(e,t){return r.decoder.decode(e,t)},n.exports=r})("object"==typeof n?n.exports:this.protobuf={},this),function(e,t){var n=e.constants={};n.TYPES={uInt32:0,sInt32:0,int32:0,"double":1,string:2,message:2,"float":5}}("undefined"!=typeof protobuf?protobuf:n.exports,this),function(e,t){var n=e.util={};n.isSimpleType=function(e){return e==="uInt32"||e==="sInt32"||e==="int32"||e==="uInt64"||e==="sInt64"||e==="float"||e==="double"}}("undefined"!=typeof protobuf?protobuf:n.exports,this),function(e,t){function u(e){return e<=127?[e]:e<=2047?[192|e>>6,128|e&63]:[224|e>>12,128|(e&4032)>>6,128|e&63]}function a(e){return e<=127?1:e<=2047?2:3}var n=e.codec={},r=new ArrayBuffer(8),i=new Float32Array(r),s=new Float64Array(r),o=new Uint8Array(r);n.encodeUInt32=function(e){var e=parseInt(e);if(isNaN(e)||e<0)return null;var t=[];do{var n=e%128,r=Math.floor(e/128);r!==0&&(n+=128),t.push(n),e=r}while(e!==0);return t},n.encodeSInt32=function(e){var e=parseInt(e);return isNaN(e)?null:(e=e<0?Math.abs(e)*2-1:e*2,n.encodeUInt32(e))},n.decodeUInt32=function(e){var t=0;for(var n=0;n<e.length;n++){var r=parseInt(e[n]);t+=(r&127)*Math.pow(2,7*n);if(r<128)return t}return t},n.decodeSInt32=function(e){var t=this.decodeUInt32(e),n=t%2===1?-1:1;return t=(t%2+t)/2*n,t},n.encodeFloat=function(e){return i[0]=e,o},n.decodeFloat=function(e,t){if(!e||e.length<t+4)return null;for(var n=0;n<4;n++)o[n]=e[t+n];return i[0]},n.encodeDouble=function(e){return s[0]=e,o.subarray(0,8)},n.decodeDouble=function(e,t){if(!e||e.length<8+t)return null;for(var n=0;n<8;n++)o[n]=e[t+n];return s[0]},n.encodeStr=function(e,t,n){for(var r=0;r<n.length;r++){var i=n.charCodeAt(r),s=u(i);for(var o=0;o<s.length;o++)e[t]=s[o],t++}return t},n.decodeStr=function(e,t,n){var r=[],i=t+n;while(t<i){var s=0;e[t]<128?(s=e[t],t+=1):e[t]<224?(s=((e[t]&63)<<6)+(e[t+1]&63),t+=2):(s=((e[t]&15)<<12)+((e[t+1]&63)<<6)+(e[t+2]&63),t+=3),r.push(s)}var o="";for(var u=0;u<r.length;)o+=String.fromCharCode.apply(null,r.slice(u,u+1e4)),u+=1e4;return o},n.byteLength=function(e){if(typeof e!="string")return-1;var t=0;for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);t+=a(r)}return t}}("undefined"!=typeof protobuf?protobuf:n.exports,this),function(e,t){function u(e,t){if(!t)return!1;for(var n in t){var r=t[n];switch(r.option){case"required":if(typeof e[n]=="undefined")return!1;case"optional":typeof e[n]!="undefined"&&(!t.__messages[r.type]||u(e[n],t.__messages[r.type]));break;case"repeated":if(!!e[n]&&!!t.__messages[r.type])for(var i=0;i<e[n].length;i++)if(!u(e[n][i],t.__messages[r.type]))return!1}}return!0}function a(e,t,n,r){for(var i in r)if(!!n[i]){var s=n[i];switch(s.option){case"required":case"optional":t=c(e,t,h(s.type,s.tag)),t=f(r[i],s.type,t,e,n);break;case"repeated":r[i].length>0&&(t=l(r[i],s,t,e,n))}}return t}function f(e,t,n,r,s){switch(t){case"uInt32":n=c(r,n,i.encodeUInt32(e));break;case"int32":case"sInt32":n=c(r,n,i.encodeSInt32(e));break;case"float":c(r,n,i.encodeFloat(e)),n+=4;break;case"double":c(r,n,i.encodeDouble(e)),n+=8;break;case"string":var o=i.byteLength(e);n=c(r,n,i.encodeUInt32(o)),i.encodeStr(r,n,e),n+=o;break;default:if(!!s.__messages[t]){var u=new ArrayBuffer(i.byteLength(JSON.stringify(e))),o=0;o=a(u,o,s.__messages[t],e),n=c(r,n,i.encodeUInt32(o));for(var f=0;f<o;f++)r[n]=u[f],n++}}return n}function l(e,t,n,r,s){var u=0;if(o.isSimpleType(t.type)){n=c(r,n,h(t.type,t.tag)),n=c(r,n,i.encodeUInt32(e.length));for(u=0;u<e.length;u++)n=f(e[u],t.type,n,r)}else for(u=0;u<e.length;u++)n=c(r,n,h(t.type,t.tag)),n=f(e[u],t.type,n,r,s);return n}function c(e,t,n){for(var r=0;r<n.length;r++,t++)e[t]=n[r];return t}function h(e,t){var n=s.TYPES[e]||2;return i.encodeUInt32(t<<3|n)}var n=e,r=e.encoder={},i=n.codec,s=n.constants,o=n.util;r.init=function(e){this.protos=e||{}},r.encode=function(e,t){var n=this.protos[e];if(!u(t,n))return null;var r=i.byteLength(JSON.stringify(t)),s=new ArrayBuffer(r),o=new Uint8Array(s),f=0;if(!!n){f=a(o,f,n,t);if(f>0)return o.subarray(0,f)}return null}}("undefined"!=typeof protobuf?protobuf:n.exports,this),function(e,t){function a(e,t,n){while(u<n){var r=l(),i=r.type,s=r.tag,o=t.__tags[s];switch(t[o].option){case"optional":case"required":e[o]=h(t[o].type,t);break;case"repeated":e[o]||(e[o]=[]),p(e[o],t[o].type,t)}}return e}function f(e,t){return!t.__tags[c().tag]}function l(){var e=i.decodeUInt32(d());return{type:e&7,tag:e>>3}}function c(){var e=i.decodeUInt32(v());return{type:e&7,tag:e>>3}}function h(e,t){switch(e){case"uInt32":return i.decodeUInt32(d());case"int32":case"sInt32":return i.decodeSInt32(d());case"float":var n=i.decodeFloat(o,u);return u+=4,n;case"double":var r=i.decodeDouble(o,u);return u+=8,r;case"string":var s=i.decodeUInt32(d()),f=i.decodeStr(o,u,s);return u+=s,f;default:if(!!t&&!!t.__messages[e]){var s=i.decodeUInt32(d()),l={};return a(l,t.__messages[e],u+s),l}}}function p(e,t,n){if(s.isSimpleType(t)){var r=i.decodeUInt32(d());for(var o=0;o<r;o++)e.push(h(t))}else e.push(h(t,n))}function d(e){var t=[],n=u;e=e||!1;var r;do r=o[n],t.push(r),n++;while(r>=128);return e||(u=n),t}function v(){return d(!0)}var n=e,r=e.decoder={},i=n.codec,s=n.util,o,u=0;r.init=function(e){this.protos=e||{}},r.setProtos=function(e){!e||(this.protos=e)},r.decode=function(e,t){var n=this.protos[e];return o=t,u=0,n?a({},n,o.length):null}}("undefined"!=typeof protobuf?protobuf:n.exports,this)}),require.register("pomelonode-pomelo-jsclient-websocket/lib/pomelo-client.js",function(e,t,n){(function(){var e="js-websocket",t="0.0.1",r=window.Protocol,i=r.Package,s=r.Message,o=window.EventEmitter,u=200,a=500,f=501;typeof Object.create!="function"&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var l=window,c=Object.create(o.prototype);l.pomelo=c;var h=null,p=0,d={},v={},m={},g=0,y=0,b=0,w=100,E=null,S=null,x=null,T={sys:{type:e,version:t},user:{}},N=null;c.init=function(e,t){N=t;var n=e.host,r=e.port,i="ws://"+n;r&&(i+=":"+r),T.user=e.user,x=e.handshakeCallback,C(i,t)};var C=function(e,t){console.log("connect to "+e);var n=function(e){var t=i.encode(i.TYPE_HANDSHAKE,r.strencode(JSON.stringify(T)));L(t)},s=function(e){H(i.decode(e.data),t),y&&(b=Date.now()+y)},o=function(e){c.emit("io-error",e),console.error("socket error: ",e)},u=function(e){c.emit("close",e),console.error("socket close: ",e)};h=new WebSocket(e),h.binaryType="arraybuffer",h.onopen=n,h.onmessage=s,h.onerror=o,h.onclose=u};c.disconnect=function(){h&&(h.disconnect&&h.disconnect(),h.close&&h.close(),console.log("disconnect"),h=null),E&&(clearTimeout(E),E=null),S&&(clearTimeout(S),S=null)},c.request=function(e,t,n){arguments.length===2&&typeof t=="function"?(n=t,t={}):t=t||{},e=e||t.route;if(!e)return;p++,k(p,e,t),d[p]=n,m[p]=e},c.notify=function(e,t){t=t||{},k(0,e,t)};var k=function(e,t,n){var o=e?s.TYPE_REQUEST:s.TYPE_NOTIFY,u=c.data.protos?c.data.protos.client:{};u[t]?n=protobuf.encode(t,n):n=r.strencode(JSON.stringify(n));var a=0;c.dict&&c.dict[t]&&(t=c.dict[t],a=1),n=s.encode(e,o,a,t,n);var f=i.encode(i.TYPE_DATA,n);L(f)},L=function(e){h.send(e.buffer)},A={},O=function(e){if(!g)return;var t=i.encode(i.TYPE_HEARTBEAT);S&&(clearTimeout(S),S=null);if(E)return;E=setTimeout(function(){E=null,L(t),b=Date.now()+y,S=setTimeout(M,y)},g)},M=function(){var e=b-Date.now();e>w?S=setTimeout(M,e):(console.error("server heartbeat timeout"),c.emit("heartbeat timeout"),c.disconnect())},_=function(e){e=JSON.parse(r.strdecode(e));if(e.code===f){c.emit("error","client version not fullfill");return}if(e.code!==u){c.emit("error","handshake fail");return}I(e);var t=i.encode(i.TYPE_HANDSHAKE_ACK);L(t),N&&(N(h),N=null)},D=function(e){var t=s.decode(e);if(t.id>0){t.route=m[t.id],delete m[t.id];if(!t.route)return}t.body=F(t),B(c,t)},P=function(e){c.emit("onKick")};v[i.TYPE_HANDSHAKE]=_,v[i.TYPE_HEARTBEAT]=O,v[i.TYPE_DATA]=D,v[i.TYPE_KICK]=P;var H=function(e){v[e.type](e.body)},B=function(e,t){if(!t.id){e.emit(t.route,t.body);return}var n=d[t.id];delete d[t.id];if(typeof n!="function")return;n(t.body);return},j=function(e,t){for(var n=0,r=t.length;n<r;n++)B(e,t[n])},F=function(e){var t=c.data.protos?c.data.protos.server:{},n=c.data.abbrs,i=e.route;if(e.compressRoute){if(!n[i])return{};i=e.route=n[i]}return t[i]?protobuf.decode(i,e.body):JSON.parse(r.strdecode(e.body))},I=function(e){e.sys&&e.sys.heartbeat?(g=e.sys.heartbeat*1e3,y=g*2):(g=0,y=0),q(e),typeof x=="function"&&x(e.user)},q=function(e){if(!e||!e.sys)return;c.data=c.data||{};var t=e.sys.dict,n=e.sys.protos;if(t){c.data.dict=t,c.data.abbrs={};for(var r in t)c.data.abbrs[t[r]]=r}n&&(c.data.protos={server:n.server||{},client:n.client||{}},!protobuf||protobuf.init({encoderProtos:n.client,decoderProtos:n.server}))};n.exports=c})()}),require.register("boot/index.js",function(e,t,n){var r=t("emitter");window.EventEmitter=r;var i=t("pomelo-protocol");window.Protocol=i;var s=t("pomelo-protobuf");window.protobuf=s;var o=t("pomelo-jsclient-websocket");window.pomelo=o}),require.alias("boot/index.js","pomelo-client/deps/boot/index.js"),require.alias("component-emitter/index.js","boot/deps/emitter/index.js"),require.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js"),require.alias("NetEase-pomelo-protocol/lib/protocol.js","boot/deps/pomelo-protocol/lib/protocol.js"),require.alias("NetEase-pomelo-protocol/lib/protocol.js","boot/deps/pomelo-protocol/index.js"),require.alias("NetEase-pomelo-protocol/lib/protocol.js","NetEase-pomelo-protocol/index.js"),require.alias("pomelonode-pomelo-protobuf/lib/client/protobuf.js","boot/deps/pomelo-protobuf/lib/client/protobuf.js"),require.alias("pomelonode-pomelo-protobuf/lib/client/protobuf.js","boot/deps/pomelo-protobuf/index.js"),require.alias("pomelonode-pomelo-protobuf/lib/client/protobuf.js","pomelonode-pomelo-protobuf/index.js"),require.alias("pomelonode-pomelo-jsclient-websocket/lib/pomelo-client.js","boot/deps/pomelo-jsclient-websocket/lib/pomelo-client.js"),require.alias("pomelonode-pomelo-jsclient-websocket/lib/pomelo-client.js","boot/deps/pomelo-jsclient-websocket/index.js"),require.alias("pomelonode-pomelo-jsclient-websocket/lib/pomelo-client.js","pomelonode-pomelo-jsclient-websocket/index.js");(function(e,t){var n=e;n.version="0.9.6",n.protocol=1,n.transports=[],n.j=[],n.sockets={},n.connect=function(e,r){var i=n.util.parseUri(e),s,o;t&&t.location&&(i.protocol=i.protocol||t.location.protocol.slice(0,-1),i.host=i.host||(t.document?t.document.domain:t.location.hostname),i.port=i.port||t.location.port),s=n.util.uniqueUri(i);var u={host:i.host,secure:"https"==i.protocol,port:i.port||("https"==i.protocol?443:80),query:i.query||""};n.util.merge(u,r);if(u["force new connection"]||!n.sockets[s])o=new n.Socket(u);return!u["force new connection"]&&o&&(n.sockets[s]=o),o=o||n.sockets[s],o.of(i.path.length>1?i.path:"")}})("object"==typeof module?module.exports:this.io={},this),function(e,t){var n=e.util={},r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(e){var t=r.exec(e||""),n={},s=14;while(s--)n[i[s]]=t[s]||"";return n},n.uniqueUri=function(e){var n=e.protocol,r=e.host,i=e.port;return"document"in t?(r=r||document.domain,i=i||(n=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(r=r||"localhost",!i&&n=="https"&&(i=443)),(n||"http")+"://"+r+":"+(i||80)},n.query=function(e,t){var r=n.chunkQuery(e||""),i=[];n.merge(r,n.chunkQuery(t||""));for(var s in r)r.hasOwnProperty(s)&&i.push(s+"="+r[s]);return i.length?"?"+i.join("&"):""},n.chunkQuery=function(e){var t={},n=e.split("&"),r=0,i=n.length,s;for(;r<i;++r)s=n[r].split("="),s[0]&&(t[s[0]]=s[1]);return t};var s=!1;n.load=function(e){if("document"in t&&document.readyState==="complete"||s)return e();n.on(t,"load",e,!1)},n.on=function(e,t,n,r){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,r)},n.request=function(e){if(e&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||n.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}return null},"undefined"!=typeof window&&n.load(function(){s=!0}),n.defer=function(e){if(!n.ua.webkit||"undefined"!=typeof importScripts)return e();n.load(function(){setTimeout(e,100)})},n.merge=function(t,r,i,s){var o=s||[],u=typeof i=="undefined"?2:i,a;for(a in r)r.hasOwnProperty(a)&&n.indexOf(o,a)<0&&(typeof t[a]!="object"||!u?(t[a]=r[a],o.push(r[a])):n.merge(t[a],r[a],u-1,o));return t},n.mixin=function(e,t){n.merge(e.prototype,t.prototype)},n.inherit=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},n.intersect=function(e,t){var r=[],i=e.length>t.length?e:t,s=e.length>t.length?t:e;for(var o=0,u=s.length;o<u;o++)~n.indexOf(i,s[o])&&r.push(s[o]);return r},n.indexOf=function(e,t,n){for(var r=e.length,n=n<0?n+r<0?0:n+r:n||0;n<r&&e[n]!==t;n++);return r<=n?-1:n},n.toArray=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t},n.ua={},n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return e.withCredentials!=undefined}(),n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(e,t){function n(){}e.EventEmitter=n,n.prototype.on=function(e,n){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(n):this.$events[e]=[this.$events[e],n]:this.$events[e]=n,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(e,t){function r(){n.removeListener(e,r),t.apply(this,arguments)}var n=this;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,n){if(this.$events&&this.$events[e]){var r=this.$events[e];if(t.util.isArray(r)){var i=-1;for(var s=0,o=r.length;s<o;s++)if(r[s]===n||r[s].listener&&r[s].listener===n){i=s;break}if(i<0)return this;r.splice(i,1),r.length||delete this.$events[e]}else(r===n||r.listener&&r.listener===n)&&delete this.$events[e]}return this},n.prototype.removeAllListeners=function(e){return this.$events&&this.$events[e]&&(this.$events[e]=null),this},n.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},n.prototype.emit=function(e){if(!this.$events)return!1;var n=this.$events[e];if(!n)return!1;var r=Array.prototype.slice.call(arguments,1);if("function"==typeof n)n.apply(this,r);else{if(!t.util.isArray(n))return!1;var i=n.slice();for(var s=0,o=i.length;s<o;s++)i[s].apply(this,r)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){"use strict";function f(e){return e<10?"0"+e:e}function date(e,t){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a instanceof Date&&(a=date(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")},JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,typeof JSON!="undefined"?JSON:undefined),function(e,t){var n=e.parser={},r=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],i=n.reasons=["transport not supported","client not handshaken","unauthorized"],s=n.advice=["reconnect"],o=t.JSON,u=t.util.indexOf;n.encodePacket=function(e){var t=u(r,e.type),n=e.id||"",a=e.endpoint||"",f=e.ack,l=null;switch(e.type){case"error":var c=e.reason?u(i,e.reason):"",h=e.advice?u(s,e.advice):"";if(c!==""||h!=="")l=c+(h!==""?"+"+h:"");break;case"message":e.data!==""&&(l=e.data);break;case"event":var p={name:e.name};e.args&&e.args.length&&(p.args=e.args),l=o.stringify(p);break;case"json":l=o.stringify(e.data);break;case"connect":e.qs&&(l=e.qs);break;case"ack":l=e.ackId+(e.args&&e.args.length?"+"+o.stringify(e.args):"")}var d=[t,n+(f=="data"?"+":""),a];return l!==null&&l!==undefined&&d.push(l),d.join(":")},n.encodePayload=function(e){var t="";if(e.length==1)return e[0];for(var n=0,r=e.length;n<r;n++){var i=e[n];t+="�"+i.length+"�"+e[n]}return t};var a=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(e){var t=e.match(a);if(!t)return{};var n=t[2]||"",e=t[5]||"",u={type:r[t[1]],endpoint:t[4]||""};n&&(u.id=n,t[3]?u.ack="data":u.ack=!0);switch(u.type){case"error":var t=e.split("+");u.reason=i[t[0]]||"",u.advice=s[t[1]]||"";break;case"message":u.data=e||"";break;case"event":try{var f=o.parse(e);u.name=f.name,u.args=f.args}catch(l){}u.args=u.args||[];break;case"json":try{u.data=o.parse(e)}catch(l){}break;case"connect":u.qs=e||"";break;case"ack":var t=e.match(/^([0-9]+)(\+)?(.*)/);if(t){u.ackId=t[1],u.args=[];if(t[3])try{u.args=t[3]?o.parse(t[3]):[]}catch(l){}}break;case"disconnect":case"heartbeat":}return u},n.decodePayload=function(e){if(e.charAt(0)=="�"){var t=[];for(var r=1,i="";r<e.length;r++)e.charAt(r)=="�"?(t.push(n.decodePacket(e.substr(r+1).substr(0,i))),r+=Number(i)+1,i=""):i+=e.charAt(r);return t}return[n.decodePacket(e)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t){function n(e,t){this.socket=e,this.sessid=t}e.Transport=n,t.util.mixin(n,t.EventEmitter),n.prototype.onData=function(e){this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout();if(e!==""){var n=t.parser.decodePayload(e);if(n&&n.length)for(var r=0,i=n.length;r<i;r++)this.onPacket(n[r])}return this},n.prototype.onPacket=function(e){return this.socket.setHeartbeatTimeout(),e.type=="heartbeat"?this.onHeartbeat():(e.type=="connect"&&e.endpoint==""&&this.onConnect(),e.type=="error"&&e.advice=="reconnect"&&(this.open=!1),this.socket.onPacket(e),this)},n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}},n.prototype.onDisconnect=function(){return this.close&&this.open&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},n.prototype.onConnect=function(){return this.socket.onConnect(),this},n.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},n.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},n.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},n.prototype.onHeartbeat=function(e){this.packet({type:"heartbeat"})},n.prototype.onOpen=function(){this.open=!0,this.clearCloseTimeout(),this.socket.onOpen()},n.prototype.onClose=function(){var e=this;this.open=!1,this.socket.onClose(),this.onDisconnect()},n.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},n.prototype.ready=function(e,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(e){this.options={port:80,secure:!1,document:"document"in n?document:!1,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var r=this;t.util.on(n,"unload",function(){r.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function i(){}e.Socket=r,t.util.mixin(r,t.EventEmitter),r.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),e!==""&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},r.prototype.publish=function(){this.emit.apply(this,arguments);var e;for(var t in this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t),e.$emit.apply(e,arguments))},r.prototype.handshake=function(e){function s(t){t instanceof Error?n.onError(t.message):e.apply(null,t.split(":"))}var n=this,r=this.options,o=["http"+(r.secure?"s":"")+":/",r.host+":"+r.port,r.resource,t.protocol,t.util.query(this.options.query,"t="+ +(new Date))].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS){var u=document.getElementsByTagName("script")[0],a=document.createElement("script");a.src=o+"&jsonp="+t.j.length,u.parentNode.insertBefore(a,u),t.j.push(function(e){s(e),a.parentNode.removeChild(a)})}else{var f=t.util.request();f.open("GET",o,!0),f.withCredentials=!0,f.onreadystatechange=function(){f.readyState==4&&(f.onreadystatechange=i,f.status==200?s(f.responseText):!n.reconnecting&&n.onError(f.responseText))},f.send(null)}},r.prototype.getTransport=function(e){var n=e||this.transports,r;for(var i=0,s;s=n[i];i++)if(t.Transport[s]&&t.Transport[s].check(this)&&(!this.isXDomain()||t.Transport[s].xdomainCheck()))return new t.Transport[s](this,this.sessionid);return null},r.prototype.connect=function(e){if(this.connecting)return this;var n=this;return this.handshake(function(r,i,s,o){function u(e){n.transport&&n.transport.clearTimeouts(),n.transport=n.getTransport(e);if(!n.transport)return n.publish("connect_failed");n.transport.ready(n,function(){n.connecting=!0,n.publish("connecting",n.transport.name),n.transport.open(),n.options["connect timeout"]&&(n.connectTimeoutTimer=setTimeout(function(){if(!n.connected){n.connecting=!1;if(n.options["try multiple transports"]){n.remainingTransports||(n.remainingTransports=n.transports.slice(0));var e=n.remainingTransports;while(e.length>0&&e.splice(0,1)[0]!=n.transport.name);e.length?u(e):n.publish("connect_failed")}}},n.options["connect timeout"]))})}n.sessionid=r,n.closeTimeout=s*1e3,n.heartbeatTimeout=i*1e3,n.transports=o?t.util.intersect(o.split(","),n.options.transports):n.options.transports,n.setHeartbeatTimeout(),u(n.transports),n.once("connect",function(){clearTimeout(n.connectTimeoutTimer),e&&typeof e=="function"&&e()})}),this},r.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var e=this;this.heartbeatTimeoutTimer=setTimeout(function(){e.transport.onClose()},this.heartbeatTimeout)},r.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},r.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},r.prototype.disconnect=function(){if(this.connected||this.connecting)this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted");return this},r.prototype.disconnectSync=function(){var e=t.util.request(),n=this.resource+"/"+t.protocol+"/"+this.sessionid;e.open("GET",n,!0),this.onDisconnect("booted")},r.prototype.isXDomain=function(){var e=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=e},r.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},r.prototype.onOpen=function(){this.open=!0},r.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},r.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},r.prototype.onError=function(e){e&&e.advice&&e.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},r.prototype.onDisconnect=function(e){var t=this.connected,n=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1;if(t||n)this.transport.close(),this.transport.clearTimeouts(),t&&(this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect())},r.prototype.reconnect=function(){function i(){if(e.connected){for(var t in e.namespaces)e.namespaces.hasOwnProperty(t)&&""!==t&&e.namespaces[t].packet({type:"connect"});e.publish("reconnect",e.transport.name,e.reconnectionAttempts)}clearTimeout(e.reconnectionTimer),e.removeListener("connect_failed",s),e.removeListener("connect",s),e.reconnecting=!1,delete e.reconnectionAttempts,delete e.reconnectionDelay,delete e.reconnectionTimer,delete e.redoTransports,e.options["try multiple transports"]=n}function s(){if(!e.reconnecting)return;if(e.connected)return i();if(e.connecting&&e.reconnecting)return e.reconnectionTimer=setTimeout(s,1e3);e.reconnectionAttempts++>=t?e.redoTransports?(e.publish("reconnect_failed"),i()):(e.on("connect_failed",s),e.options["try multiple transports"]=!0,e.transport=e.getTransport(),e.redoTransports=!0,e.connect()):(e.reconnectionDelay<r&&(e.reconnectionDelay*=2),e.connect(),e.publish("reconnecting",e.reconnectionDelay,e.reconnectionAttempts),e.reconnectionTimer=setTimeout(s,e.reconnectionDelay))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var e=this,t=this.options["max reconnection attempts"],n=this.options["try multiple transports"],r=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(s,this.reconnectionDelay),this.on("connect",s)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new r(this,"json"),this.ackPackets=0,this.acks={}}function r(e,t){this.namespace=e,this.name=t}e.SocketNamespace=n,t.util.mixin(n,t.EventEmitter),n.prototype.$emit=t.EventEmitter.prototype.emit,n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},n.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},n.prototype.send=function(e,t){var n={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(n.id=++this.ackPackets,n.ack=!0,this.acks[n.id]=t),this.packet(n)},n.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[t.length-1],r={type:"event",name:e};return"function"==typeof n&&(r.id=++this.ackPackets,r.ack="data",this.acks[r.id]=n,t=t.slice(0,t.length-1)),r.args=t,this.packet(r)},n.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},n.prototype.onPacket=function(e){function r(){n.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}var n=this;switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var i=["message",e.data];e.ack=="data"?i.push(r):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,i);break;case"event":var i=[e.name].concat(e.args);e.ack=="data"&&i.push(r),this.$emit.apply(this,i);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":e.advice?this.socket.onError(e):e.reason=="unauthorized"?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},r.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},r.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(e){t.Transport.apply(this,arguments)}e.websocket=r,t.util.inherit(r,t.Transport),r.prototype.name="websocket",r.prototype.open=function(){var e=t.util.query(this.socket.options.query),r=this,i;return i||(i=n.MozWebSocket||n.WebSocket),this.websocket=new i(this.prepareUrl()+e),this.websocket.onopen=function(){r.onOpen(),r.socket.setBuffer(!1)},this.websocket.onmessage=function(e){r.onData(e.data)},this.websocket.onclose=function(){r.onClose(),r.socket.setBuffer(!0)},this.websocket.onerror=function(e){r.onError(e)},this},r.prototype.send=function(e){return this.websocket.send(e),this},r.prototype.payload=function(e){for(var t=0,n=e.length;t<n;t++)this.packet(e[t]);return this},r.prototype.close=function(){return this.websocket.close(),this},r.prototype.onError=function(e){this.socket.onError(e)},r.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},r.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n},r.xdomainCheck=function(){return!0},t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(){t.Transport.websocket.apply(this,arguments)}e.flashsocket=n,t.util.inherit(n,t.Transport.websocket),n.prototype.name="flashsocket",n.prototype.open=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.open.apply(e,n)}),this},n.prototype.send=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.send.apply(e,n)}),this},n.prototype.close=function(){return WebSocket.__tasks.length=0,t.Transport.websocket.prototype.close.call(this),this},n.prototype.ready=function(e,r){function i(){var t=e.options,i=t["flash policy port"],o=["http"+(t.secure?"s":"")+":/",t.host+":"+t.port,t.resource,"static/flashsocket","WebSocketMain"+(e.isXDomain()?"Insecure":"")+".swf"];n.loaded||(typeof WEB_SOCKET_SWF_LOCATION=="undefined"&&(WEB_SOCKET_SWF_LOCATION=o.join("/")),i!==843&&WebSocket.loadFlashPolicyFile("xmlsocket://"+t.host+":"+i),WebSocket.__initialize(),n.loaded=!0),r.call(s)}var s=this;if(document.body)return i();t.util.load(i)},n.check=function(){return typeof WebSocket!="undefined"&&"__initialize"in WebSocket&&!!swfobject?swfobject.getFlashPlayerVersion().major>=10:!1},n.xdomainCheck=function(){return!0},typeof window!="undefined"&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),t.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);if("undefined"!=typeof window)var swfobject=function(){function C(){if(b)return;try{var e=a.getElementsByTagName("body")[0].appendChild(U("span"));e.parentNode.removeChild(e)}catch(t){return}b=!0;var n=c.length;for(var r=0;r<n;r++)c[r]()}function k(e){b?e():c[c.length]=e}function L(t){if(typeof u.addEventListener!=e)u.addEventListener("load",t,!1);else if(typeof a.addEventListener!=e)a.addEventListener("load",t,!1);else if(typeof u.attachEvent!=e)z(u,"onload",t);else if(typeof u.onload=="function"){var n=u.onload;u.onload=function(){n(),t()}}else u.onload=t}function A(){l?O():M()}function O(){var n=a.getElementsByTagName("body")[0],r=U(t);r.setAttribute("type",i);var s=n.appendChild(r);if(s){var o=0;(function(){if(typeof s.GetVariable!=e){var t=s.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),T.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(o<10){o++,setTimeout(arguments.callee,10);return}n.removeChild(r),s=null,M()})()}else M()}function M(){var t=h.length;if(t>0)for(var n=0;n<t;n++){var r=h[n].id,i=h[n].callbackFn,s={success:!1,id:r};if(T.pv[0]>0){var o=R(r);if(o)if(W(h[n].swfVersion)&&!(T.wk&&T.wk<312))V(r,!0),i&&(s.success=!0,s.ref=_(r),i(s));else if(h[n].expressInstall&&D()){var u={};u.data=h[n].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));var a={},f=o.getElementsByTagName("param"),l=f.length;for(var c=0;c<l;c++)f[c].getAttribute("name").toLowerCase()!="movie"&&(a[f[c].getAttribute("name")]=f[c].getAttribute("value"));P(u,a,r,i)}else H(o),i&&i(s)}else{V(r,!0);if(i){var p=_(r);p&&typeof p.SetVariable!=e&&(s.success=!0,s.ref=p),i(s)}}}}function _(n){var r=null,i=R(n);if(i&&i.nodeName=="OBJECT")if(typeof i.SetVariable!=e)r=i;else{var s=i.getElementsByTagName(t)[0];s&&(r=s)}return r}function D(){return!w&&W("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function P(t,n,r,i){w=!0,g=i||null,y={success:!1,id:r};var o=R(r);if(o){o.nodeName=="OBJECT"?(v=B(o),m=null):(v=o,m=r),t.id=s;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310)t.width="310";if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137)t.height="137";a.title=a.title.slice(0,47)+" - Flash Player Installation";var f=T.ie&&T.win?["Active"].concat("").join("X"):"PlugIn",l="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+a.title;typeof n.flashvars!=e?n.flashvars+="&"+l:n.flashvars=l;if(T.ie&&T.win&&o.readyState!=4){var c=U("div");r+="SWFObjectNew",c.setAttribute("id",r),o.parentNode.insertBefore(c,o),o.style.display="none",function(){o.readyState==4?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}j(t,n,r)}}function H(e){if(T.ie&&T.win&&e.readyState!=4){var t=U("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(B(e),t),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(B(e),e)}function B(e){var n=U("div");if(T.win&&T.ie)n.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(t)[0];if(r){var i=r.childNodes;if(i){var s=i.length;for(var o=0;o<s;o++)(i[o].nodeType!=1||i[o].nodeName!="PARAM")&&i[o].nodeType!=8&&n.appendChild(i[o].cloneNode(!0))}}}return n}function j(n,r,s){var o,u=R(s);if(T.wk&&T.wk<312)return o;if(u){typeof n.id==e&&(n.id=s);if(T.ie&&T.win){var a="";for(var f in n)n[f]!=Object.prototype[f]&&(f.toLowerCase()=="data"?r.movie=n[f]:f.toLowerCase()=="styleclass"?a+=' class="'+n[f]+'"':f.toLowerCase()!="classid"&&(a+=" "+f+'="'+n[f]+'"'));var l="";for(var c in r)r[c]!=Object.prototype[c]&&(l+='<param name="'+c+'" value="'+r[c]+'" />');u.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+l+"</object>",p[p.length]=n.id,o=R(n.id)}else{var h=U(t);h.setAttribute("type",i);for(var d in n)n[d]!=Object.prototype[d]&&(d.toLowerCase()=="styleclass"?h.setAttribute("class",n[d]):d.toLowerCase()!="classid"&&h.setAttribute(d,n[d]));for(var v in r)r[v]!=Object.prototype[v]&&v.toLowerCase()!="movie"&&F(h,v,r[v]);u.parentNode.replaceChild(h,u),o=h}}return o}function F(e,t,n){var r=U("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function I(e){var t=R(e);t&&t.nodeName=="OBJECT"&&(T.ie&&T.win?(t.style.display="none",function(){t.readyState==4?q(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function q(e){var t=R(e);if(t){for(var n in t)typeof t[n]=="function"&&(t[n]=null);t.parentNode.removeChild(t)}}function R(e){var t=null;try{t=a.getElementById(e)}catch(n){}return t}function U(e){return a.createElement(e)}function z(e,t,n){e.attachEvent(t,n),d[d.length]=[e,t,n]}function W(e){var t=T.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function X(n,r,i,s){if(T.ie&&T.mac)return;var o=a.getElementsByTagName("head")[0];if(!o)return;var u=i&&typeof i=="string"?i:"screen";s&&(E=null,S=null);if(!E||S!=u){var f=U("style");f.setAttribute("type","text/css"),f.setAttribute("media",u),E=o.appendChild(f),T.ie&&T.win&&typeof a.styleSheets!=e&&a.styleSheets.length>0&&(E=a.styleSheets[a.styleSheets.length-1]),S=u}T.ie&&T.win?E&&typeof E.addRule==t&&E.addRule(n,r):E&&typeof a.createTextNode!=e&&E.appendChild(a.createTextNode(n+" {"+r+"}"))}function V(e,t){if(!x)return;var n=t?"visible":"hidden";b&&R(e)?R(e).style.visibility=n:X("#"+e,"visibility:"+n)}function $(t){var n=/[\\\"<>\.;]/,r=n.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var e="undefined",t="object",n="Shockwave Flash",r="ShockwaveFlash.ShockwaveFlash",i="application/x-shockwave-flash",s="SWFObjectExprInst",o="onreadystatechange",u=window,a=document,f=navigator,l=!1,c=[A],h=[],p=[],d=[],v,m,g,y,b=!1,w=!1,E,S,x=!0,T=function(){var s=typeof a.getElementById!=e&&typeof a.getElementsByTagName!=e&&typeof a.createElement!=e,o=f.userAgent.toLowerCase(),c=f.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(o),p=c?/mac/.test(c):/mac/.test(o),d=/webkit/.test(o)?parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=!1,m=[0,0,0],g=null;if(typeof f.plugins!=e&&typeof f.plugins[n]==t)g=f.plugins[n].description,g&&(typeof f.mimeTypes==e||!f.mimeTypes[i]||!!f.mimeTypes[i].enabledPlugin)&&(l=!0,v=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),m[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),m[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u[["Active"].concat("Object").join("X")]!=e)try{var y=new(window[["Active"].concat("Object").join("X")])(r);y&&(g=y.GetVariable("$version"),g&&(v=!0,g=g.split(" ")[1].split(","),m=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:s,pv:m,wk:d,ie:v,win:h,mac:p}}(),N=function(){if(!T.w3)return;(typeof a.readyState!=e&&a.readyState=="complete"||typeof a.readyState==e&&(a.getElementsByTagName("body")[0]||a.body))&&C(),b||(typeof a.addEventListener!=e&&a.addEventListener("DOMContentLoaded",C,!1),T.ie&&T.win&&(a.attachEvent(o,function(){a.readyState=="complete"&&(a.detachEvent(o,arguments.callee),C())}),u==top&&function(){if(b)return;try{a.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}C()}()),T.wk&&function(){if(b)return;if(!/loaded|complete/.test(a.readyState)){setTimeout(arguments.callee,0);return}C()}(),L(C))}(),J=function(){T.ie&&T.win&&window.attachEvent("onunload",function(){var e=d.length;for(var t=0;t<e;t++)d[t][0].detachEvent(d[t][1],d[t][2]);var n=p.length;for(var r=0;r<n;r++)I(p[r]);for(var i in T)T[i]=null;T=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}();return{registerObject:function(e,t,n,r){if(T.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,h[h.length]=i,V(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(T.w3)return _(e)},embedSWF:function(n,r,i,s,o,u,a,f,l,c){var h={success:!1,id:r};T.w3&&!(T.wk&&T.wk<312)&&n&&r&&i&&s&&o?(V(r,!1),k(function(){i+="",s+="";var p={};if(l&&typeof l===t)for(var d in l)p[d]=l[d];p.data=n,p.width=i,p.height=s;var v={};if(f&&typeof f===t)for(var m in f)v[m]=f[m];if(a&&typeof a===t)for(var g in a)typeof v.flashvars!=e?v.flashvars+="&"+g+"="+a[g]:v.flashvars=g+"="+a[g];if(W(o)){var y=j(p,v,r);p.id==r&&V(r,!0),h.success=!0,h.ref=y}else{if(u&&D()){p.data=u,P(p,v,r,c);return}V(r,!0)}c&&c(h)})):c&&c(h)},switchOffAutoHideShow:function(){x=!1},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:W,createSWF:function(e,t,n){return T.w3?j(e,t,n):undefined},showExpressInstall:function(e,t,n,r){T.w3&&D()&&P(e,t,n,r)},removeSWF:function(e){T.w3&&I(e)},createCSS:function(e,t,n,r){T.w3&&X(e,t,n,r)},addDomLoadEvent:k,addLoadEvent:L,getQueryParamValue:function(e){var t=a.location.search||a.location.hash;if(t){/\?/.test(t)&&(t=t.split("?")[1]);if(e==null)return $(t);var n=t.split("&");for(var r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return $(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(w){var e=R(s);e&&v&&(e.parentNode.replaceChild(v,e),m&&(V(m,!0),T.ie&&T.win&&(v.style.display="block")),g&&g(y)),w=!1}}}}();(function(){if("undefined"==typeof window||window.WebSocket)return;var e=window.console;if(!e||!e.log||!e.error)e={log:function(){},error:function(){}};if(!swfobject.hasFlashPlayerVersion("10.0.0")){e.error("Flash Player >= 10.0.0 is required.");return}location.protocol=="file:"&&e.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(e,t,n,r,i){var s=this;s.__id=WebSocket.__nextId++,WebSocket.__instances[s.__id]=s,s.readyState=WebSocket.CONNECTING,s.bufferedAmount=0,s.__events={},t?typeof t=="string"&&(t=[t]):t=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(s.__id,e,t,n||null,r||0,i||null)})},0)},WebSocket.prototype.send=function(e){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var t=WebSocket.__flash.send(this.__id,encodeURIComponent(e));return t<0?!0:(this.bufferedAmount+=t,!1)},WebSocket.prototype.close=function(){if(this.readyState==WebSocket.CLOSED||this.readyState==WebSocket.CLOSING)return;this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id)},WebSocket.prototype.addEventListener=function(e,t,n){e in this.__events||(this.__events[e]=[]),this.__events[e].push(t)},WebSocket.prototype.removeEventListener=function(e,t,n){if(!(e in this.__events))return;var r=this.__events[e];for(var i=r.length-1;i>=0;--i)if(r[i]===t){r.splice(i,1);break}},WebSocket.prototype.dispatchEvent=function(e){var t=this.__events[e.type]||[];for(var n=0;n<t.length;++n)t[n](e);var r=this["on"+e.type];r&&r(e)},WebSocket.prototype.__handleEvent=function(e){"readyState"in e&&(this.readyState=e.readyState),"protocol"in e&&(this.protocol=e.protocol);var t;if(e.type=="open"||e.type=="error")t=this.__createSimpleEvent(e.type);else if(e.type=="close")t=this.__createSimpleEvent("close");else{if(e.type!="message")throw"unknown event type: "+e.type;var n=decodeURIComponent(e.message);t=this.__createMessageEvent("message",n)}this.dispatchEvent(t)},WebSocket.prototype.__createSimpleEvent=function(e){if(document.createEvent&&window.Event){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}return{type:e,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(e,t){if(document.createEvent&&window.MessageEvent&&!window.opera){var n=document.createEvent("MessageEvent");return n.initMessageEvent("message",!1,!1,t,null,null,window,null),n}return{type:e,data:t,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(e){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(e)})},WebSocket.__initialize=function(){if(WebSocket.__flash)return;WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation);if(!window.WEB_SOCKET_SWF_LOCATION){e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");return}var t=document.createElement("div");t.id="webSocketContainer",t.style.position="absolute",WebSocket.__isFlashLite()?(t.style.left="0px",t.style.top="0px"):(t.style.left="-100px",t.style.top="-100px");var n=document.createElement("div");n.id="webSocketFlash",t.appendChild(n),document.body.appendChild(t),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(t){t.success||e.error("[WebSocket] swfobject.embedSWF failed")})},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var e=0;e<WebSocket.__tasks.length;++e)WebSocket.__tasks[e]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{var t=WebSocket.__flash.receiveEvents();for(var n=0;n<t.length;++n)WebSocket.__instances[t[n].webSocketId].__handleEvent(t[n])}catch(r){e.error(r)}},0),!0},WebSocket.__log=function(t){e.log(decodeURIComponent(t))},WebSocket.__error=function(t){e.error(decodeURIComponent(t))},WebSocket.__addTask=function(e){WebSocket.__flash?e():WebSocket.__tasks.push(e)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var e=window.navigator.mimeTypes["application/x-shockwave-flash"];return!e||!e.enabledPlugin||!e.enabledPlugin.filename?!1:e.enabledPlugin.filename.match(/flashlite/i)?!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))})(),function(e,t,n){function r(e){if(!e)return;t.Transport.apply(this,arguments),this.sendBuffer=[]}function i(){}e.XHR=r,t.util.inherit(r,t.Transport),r.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},r.prototype.payload=function(e){var n=[];for(var r=0,i=e.length;r<i;r++)n.push(t.parser.encodePacket(e[r]));this.send(t.parser.encodePayload(n))},r.prototype.send=function(e){return this.post(e),this},r.prototype.post=function(e){function r(){this.readyState==4&&(this.onreadystatechange=i,t.posting=!1,this.status==200?t.socket.setBuffer(!1):t.onClose())}function s(){this.onload=i,t.socket.setBuffer(!1)}var t=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),n.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=s:this.sendXHR.onreadystatechange=r,this.sendXHR.send(e)},r.prototype.close=function(){return this.onClose(),this},r.prototype.request=function(e){var n=t.util.request(this.socket.isXDomain()),r=t.util.query(this.socket.options.query,"t="+ +(new Date));n.open(e||"GET",this.prepareUrl()+r,!0);if(e=="POST")try{n.setRequestHeader?n.setRequestHeader("Content-type","text/plain;charset=UTF-8"):n.contentType="text/plain"}catch(i){}return n},r.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},r.check=function(e,r){try{var i=t.util.request(r),s=n.XDomainRequest&&i instanceof XDomainRequest,o=e&&e.options&&e.options.secure?"https:":"http:",u=o!=n.location.protocol;if(i&&(!s||!u))return!0}catch(a){}return!1},r.xdomainCheck=function(){return r.check(null,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e){t.Transport.XHR.apply(this,arguments)}e.htmlfile=n,t.util.inherit(n,t.Transport.XHR),n.prototype.name="htmlfile",n.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var e=this.doc.createElement("div");e.className="socketio",this.doc.body.appendChild(e),this.iframe=this.doc.createElement("iframe"),e.appendChild(this.iframe);var n=this,r=t.util.query(this.socket.options.query,"t="+ +(new Date));this.iframe.src=this.prepareUrl()+r,t.util.on(window,"unload",function(){n.destroy()})},n.prototype._=function(e,t){this.onData(e);try{var n=t.getElementsByTagName("script")[0];n.parentNode.removeChild(n)}catch(r){}},n.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},n.prototype.close=function(){return this.destroy(),t.Transport.XHR.prototype.close.call(this)},n.check=function(){if(typeof window!="undefined"&&["Active"].concat("Object").join("X")in window)try{var e=new(window[["Active"].concat("Object").join("X")])("htmlfile");return e&&t.Transport.XHR.check()}catch(n){}return!1},n.xdomainCheck=function(){return!1},t.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(){t.Transport.XHR.apply(this,arguments)}function i(){}e["xhr-polling"]=r,t.util.inherit(r,t.Transport.XHR),t.util.merge(r,t.Transport.XHR),r.prototype.name="xhr-polling",r.prototype.open=function(){var e=this;return t.Transport.XHR.prototype.open.call(e),!1},r.prototype.get=function(){function t(){this.readyState==4&&(this.onreadystatechange=i,this.status==200?(e.onData(this.responseText),e.get()):e.onClose())}function r(){this.onload=i,this.onerror=i,e.onData(this.responseText),e.get()}function s(){e.onClose()}if(!this.open)return;var e=this;this.xhr=this.request(),n.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=r,this.xhr.onerror=s):this.xhr.onreadystatechange=t,this.xhr.send(null)},r.prototype.onClose=function(){t.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(e){}this.xhr=null}},r.prototype.ready=function(e,n){var r=this;t.util.defer(function(){n.call(r)})},t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,n){function i(e){t.Transport["xhr-polling"].apply(this,arguments),this.index=t.j.length;var n=this;t.j.push(function(e){n._(e)})}var r=n.document&&"MozAppearance"in n.document.documentElement.style;e["jsonp-polling"]=i,t.util.inherit(i,t.Transport["xhr-polling"]),i.prototype.name="jsonp-polling",i.prototype.post=function(e){function a(){f(),n.socket.setBuffer(!1)}function f(){n.iframe&&n.form.removeChild(n.iframe);try{u=document.createElement('<iframe name="'+n.iframeId+'">')}catch(e){u=document.createElement("iframe"),u.name=n.iframeId}u.id=n.iframeId,n.form.appendChild(u),n.iframe=u}var n=this,r=t.util.query(this.socket.options.query,"t="+ +(new Date)+"&i="+this.index);if(!this.form){var i=document.createElement("form"),s=document.createElement("textarea"),o=this.iframeId="socketio_iframe_"+this.index,u;i.className="socketio",i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.display="none",i.target=o,i.method="POST",i.setAttribute("accept-charset","utf-8"),s.name="d",i.appendChild(s),document.body.appendChild(i),this.form=i,this.area=s}this.form.action=this.prepareUrl()+r,f(),this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(l){}this.iframe.attachEvent?u.onreadystatechange=function(){n.iframe.readyState=="complete"&&a()}:this.iframe.onload=a,this.socket.setBuffer(!0)},i.prototype.get=function(){var e=this,n=document.createElement("script"),i=t.util.query(this.socket.options.query,"t="+ +(new Date)+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),n.async=!0,n.src=this.prepareUrl()+i,n.onerror=function(){e.onClose()};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s),this.script=n,r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype._=function(e){return this.onData(e),this.open&&this.get(),this},i.prototype.ready=function(e,n){var i=this;if(!r)return n.call(this);t.util.load(function(){n.call(i)})},i.check=function(){return"document"in n},i.xdomainCheck=function(){return!0},t.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(){function n(){}var e=Array.isArray,t=this;typeof module!="undefined"&&module.exports?module.exports.EventEmitter=n:(t=window,t.EventEmitter=n);var r=10;n.prototype.setMaxListeners=function(e){this._events||(this._events={}),this._maxListeners=e},n.prototype.emit=function(){var t=arguments[0];if(t==="error")if(!this._events||!this._events.error||e(this._events.error)&&!this._events.error.length){if(this.domain){var n=arguments[1];return n.domain_emitter=this,n.domain=this.domain,n.domain_thrown=!1,this.domain.emit("error",n),!1}throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.")}if(!this._events)return!1;var r=this._events[t];if(!r)return!1;if(typeof r=="function"){this.domain&&this.domain.enter();switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:var i=arguments.length,s=new Array(i-1);for(var o=1;o<i;o++)s[o-1]=arguments[o];r.apply(this,s)}return this.domain&&this.domain.exit(),!0}if(e(r)){this.domain&&this.domain.enter();var i=arguments.length,s=new Array(i-1);for(var o=1;o<i;o++)s[o-1]=arguments[o];var u=r.slice();for(var o=0,i=u.length;o<i;o++)u[o].apply(this,s);return this.domain&&this.domain.exit(),!0}return!1},n.prototype.addListener=function(t,n){if("function"!=typeof n)throw new Error("addListener only takes instances of Function");this._events||(this._events={}),this.emit("newListener",t,typeof n.listener=="function"?n.listener:n),this._events[t]?e(this._events[t])?this._events[t].push(n):this._events[t]=[this._events[t],n]:this._events[t]=n;if(e(this._events[t])&&!this._events[t].warned){var i;this._maxListeners!==undefined?i=this._maxListeners:i=r,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){n.removeListener(e,r),t.apply(this,arguments)}if("function"!=typeof t)throw new Error(".once only takes instances of Function");var n=this;return r.listener=t,n.on(e,r),this},n.prototype.removeListener=function(t,n){if("function"!=typeof n)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var r=this._events[t];if(e(r)){var i=-1;for(var s=0,o=r.length;s<o;s++)if(r[s]===n||r[s].listener&&r[s].listener===n){i=s;break}if(i<0)return this;r.splice(i,1)}else(r===n||r.listener&&r.listener===n)&&delete this._events[t];return this},n.prototype.removeAllListeners=function(t){if(arguments.length===0)return this._events={},this;var n=this._events&&this._events[t];return n?(e(n)?n.splice(0):this._events[t]=null,this):this},n.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),e(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}})(),function(e,t){var n=e,r=5,i=function(e,t,n){this.id=e,this.route=t,this.body=n};n.encode=function(e,t,n){var i=JSON.stringify(n);if(t.length>255)throw new Error("route maxlength is overflow");var o=new Uint16Array(r+t.length+i.length),u=0;o[u++]=e>>24&255,o[u++]=e>>16&255,o[u++]=e>>8&255,o[u++]=e&255,o[u++]=t.length&255;for(var a=0;a<t.length;a++)o[u++]=t.charCodeAt(a);for(var a=0;a<i.length;a++)o[u++]=i.charCodeAt(a);return s(o,0,o.length)},n.decode=function(e){var t,n=e.length,o=new Array(n);for(t=0;t<n;++t)o[t]=e.charCodeAt(t);var u=0,a=new Uint16Array(o),f=(a[u++]<<24|a[u++]<<16|a[u++]<<8|a[u++])>>>0,l=a[r-1],c=s(a,r,l+r),h=s(a,l+r,a.length);return new i(f,c,h)};var s=function(e,t,n){var r="";for(var i=t;i<e.length&&i<n;i++)r+=String.fromCharCode(e[i]);return r}}("object"==typeof module?module.exports:this.Protocol={},this),function(){function u(e,n){return n.indexOf("area.")===0&&(e.areaId=t.areaId),e.timestamp=Date.now(),e}typeof Object.create!="function"&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var e=window,t=Object.create(EventEmitter.prototype);e.pomelo=t;var n=null,r=1,i={};t.init=function(e,r){t.params=e,e.debug=!0;var i=e.host,u=e.port,a="ws://"+i;u&&(a+=":"+u),n=io.connect(a,{"force new connection":!0,reconnect:!1}),n.on("connect",function(){console.log("[pomeloclient.init] websocket connected!"),r&&r(n)}),n.on("reconnect",function(){console.log("reconnect")}),n.on("message",function(e){typeof e=="string"&&(e=JSON.parse(e)),e instanceof Array?o(t,e):s(t,e)}),n.on("error",function(e){console.log(e)}),n.on("disconnect",function(e){t.emit("disconnect",e)})},t.disconnect=function(){n&&(n.disconnect(),n=null)},t.request=function(e){if(!e)return;var t={},s;arguments=Array.prototype.slice.apply(arguments),arguments.length===2?typeof arguments[1]=="function"?s=arguments[1]:typeof arguments[1]=="object"&&(t=arguments[1]):arguments.length===3&&(t=arguments[1],s=arguments[2]),t=u(t,e),r++,i[r]=s;var o=Protocol.encode(r,e,t);n.send(o)},t.notify=function(e,t){this.request(e,t)};var s=function(e,t){function s(t){var n=t.route;if(!n)e.emit(t.body.route,t.body);else if(!t.body)e.emit(n,t);else{var r=t.body.body;r||(r=t.body),e.emit(n,r)}}var n;if(t.id){var r=i[t.id];delete i[t.id];if(typeof r!="function"){console.log("[pomeloclient.processMessage] cb is not a function for request "+t.id);return}r(t.body);return}s(t)},o=function(e,t){for(var n=0,r=t.length;n<r;n++)s(e,t[n])}}();var P_Socket=P_Socket||{host:null,port:null,pomelo:window.pomelo,listenerRouter:{"":""},connect:function(e){this.host=SocketInterface.host,this.port=SocketInterface.port;var t=cookie.get("FOODIESID"),n=this;this._queryEntry(function(r,i){n.pomelo.init({host:r,port:i,log:!0},function(){var r=new SocketInterface.connect;r.params.s=t,n.pomelo.request(r.url,r.params,function(t){t.success?(UserModel.setUserInfo({user_id:t.user_id,username:t.username,sex:t.gender,level:t.level,battles:t.battles}),n._listenerRouter(),e(t)):console.log("entryHandler error")})})})},request:function(e,t,n){var r=this;!this.pomelo&&cookie.get("FOODIESID")?this.connect(function(){r.pomelo.request(e,t,function(e){n?n(e):""})}):this.pomelo.request(e,t,function(e){n?n(e):""})},_listenerRouter:function(){this.pomelo.on("onMatchBattle",function(e){UserModel.getUserStatus()==USER_STATUS.SEARCHING&&(GameModel.setFightKey(e.fightKey),UserModel.setUserStatus(USER_STATUS.REARY),UserModel.setCompetitorInfo({user_id:e.fromId,username:e.fromName,sex:e.fromGender,level:e.fromLevel,battles:e.fromBattles}),Router.goto("#user/renderMatching"))}),this.pomelo.on("onBattleResult",function(e){UserModel.getUserStatus()==USER_STATUS.CALCULATE&&SceneRouter.battleResultScene.showResult(e)});var e=this;this.pomelo.on("disconnect",function(){e.connect(function(){console.log("connect success")})})},_queryEntry:function(e){var t=cookie.get("FOODIESID"),n=this,r=new SocketInterface.queryEntry;r.params.s=t,this.pomelo.init({host:this.host,port:this.port,log:!0},function(){n.pomelo.request(r.url,r.params,function(t){n.pomelo.disconnect();if(t.code===500){console.log("query entry error");return}e(t.host,t.port)})})}};function ajax_ctor(e){var t=new Object;return t.recvType=e?e.toUpperCase():"HTML",t.targetUrl="",t.sendString="",t.resultHandle=null,t.createXMLHttpRequest=function(){var e=!1;if(window.XMLHttpRequest)e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml");else if(window.ActiveXObject){var t=["Microsoft.XMLHTTP","MSXML.XMLHTTP","Msxml2.XMLHTTP.7.0","Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"];for(var n=0;n<t.length;n++)try{e=new ActiveXObject(t[n]);if(e)return e}catch(r){e=!1}}return e},t.XMLHttpRequest=t.createXMLHttpRequest(),t.processHandle=function(){t.XMLHttpRequest.readyState==4&&t.XMLHttpRequest.status==200&&(t.recvType=="HTML"?t.resultHandle(t.XMLHttpRequest.responseText):t.recvType=="XML"&&t.resultHandle(t.XMLHttpRequest.responseXML))},t.get=function(e,n){t.targetUrl=e,n!=null&&(t.XMLHttpRequest.onreadystatechange=t.processHandle,t.resultHandle=n),window.XMLHttpRequest?(t.XMLHttpRequest.open("get",t.targetUrl),t.XMLHttpRequest.send(null)):(t.XMLHttpRequest.open("get",t.targetUrl,!0),t.XMLHttpRequest.send())},t.post=function(e,n,r){t.targetUrl=e;if(typeof n=="object"){var i="";for(var s in n)i+=s+"="+n[s]+"&";t.sendString=i.substr(0,i.length-1)}else t.sendString=n;r!=null&&(t.XMLHttpRequest.onreadystatechange=t.processHandle,t.resultHandle=r),t.XMLHttpRequest.open("post",e),t.XMLHttpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),console.log(t.sendString),t.XMLHttpRequest.send(t.sendString)},t}var Ajax=ajax_ctor();this.createjs=this.createjs||{},function(){var e=function(){throw"UID cannot be instantiated"};e._nextID=0,e.get=function(){return e._nextID++},createjs.UID=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"Ticker cannot be instantiated."};e.useRAF=null,e._listeners=null,e._pauseable=null,e._paused=!1,e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._rafActive=!1,e._timeoutID=null,e.addListener=function(t,n){t!=null&&(e._inited||e.init(),e.removeListener(t),e._pauseable[e._listeners.length]=n==null?!0:n,e._listeners.push(t))},e.init=function(){e._inited=!0,e._times=[],e._tickTimes=[],e._pauseable=[],e._listeners=[],e._times.push(e._lastTime=e._startTime=e._getTime()),e.setInterval(e._interval)},e.removeListener=function(t){var n=e._listeners;n&&(t=n.indexOf(t),t!=-1&&(n.splice(t,1),e._pauseable.splice(t,1)))},e.removeAllListeners=function(){e._listeners=[],e._pauseable=[]},e.setInterval=function(t){e._interval=t,e._inited&&e._setupTick()},e.getInterval=function(){return e._interval},e.setFPS=function(t){e.setInterval(1e3/t)},e.getFPS=function(){return 1e3/e._interval},e.getMeasuredFPS=function(t){return e._times.length<2?-1:(t==null&&(t=e.getFPS()|0),t=Math.min(e._times.length-1,t),1e3/((e._times[0]-e._times[t])/t))},e.setPaused=function(t){e._paused=t},e.getPaused=function(){return e._paused},e.getTime=function(t){return e._getTime()-e._startTime-(t?e._pausedTime:0)},e.getTicks=function(t){return e._ticks-(t?e._pausedTicks:0)},e._handleAF=function(){e._rafActive=!1,e._setupTick(),e._getTime()-e._lastTime>=(e._interval-1)*.97&&e._tick()},e._handleTimeout=function(){e.timeoutID=null,e._setupTick(),e._tick()},e._setupTick=function(){if(!e._rafActive&&e.timeoutID==null){if(e.useRAF){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t){t(e._handleAF),e._rafActive=!0;return}}e.timeoutID=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var t=e._getTime();e._ticks++;var n=t-e._lastTime,r=e._paused;r&&(e._pausedTicks++,e._pausedTime+=n),e._lastTime=t;for(var i=e._pauseable,s=e._listeners.slice(),o=s?s.length:0,u=0;u<o;u++){var a=s[u];a==null||r&&i[u]||(a.tick?a.tick(n,r):a instanceof Function&&a(n,r))}for(e._tickTimes.unshift(e._getTime()-t);e._tickTimes.length>100;)e._tickTimes.pop();for(e._times.unshift(t);e._times.length>100;)e._times.pop()};var t=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);e._getTime=function(){return t&&t.call(performance)||(new Date).getTime()},createjs.Ticker=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r,i,s,o,u,a){this.initialize(e,t,n,r,i,s,o,u,a)},t=e.prototype;t.stageX=0,t.stageY=0,t.rawX=0,t.rawY=0,t.type=null,t.nativeEvent=null,t.onMouseMove=null,t.onMouseUp=null,t.target=null,t.pointerID=0,t.primary=!1,t.initialize=function(e,t,n,r,i,s,o,u,a){this.type=e,this.stageX=t,this.stageY=n,this.target=r,this.nativeEvent=i,this.pointerID=s,this.primary=o,this.rawX=u==null?t:u,this.rawY=a==null?n:a},t.clone=function(){return new e(this.type,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},t.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r,i,s){this.initialize(e,t,n,r,i,s)},t=e.prototype;e.identity=null,e.DEG_TO_RAD=Math.PI/180,t.a=1,t.b=0,t.c=0,t.d=1,t.tx=0,t.ty=0,t.alpha=1,t.shadow=null,t.compositeOperation=null,t.initialize=function(e,t,n,r,i,s){return e!=null&&(this.a=e),this.b=t||0,this.c=n||0,r!=null&&(this.d=r),this.tx=i||0,this.ty=s||0,this},t.prepend=function(e,t,n,r,i,s){var o=this.tx;if(e!=1||t!=0||n!=0||r!=1){var u=this.a,a=this.c;this.a=u*e+this.b*n,this.b=u*t+this.b*r,this.c=a*e+this.d*n,this.d=a*t+this.d*r}return this.tx=o*e+this.ty*n+i,this.ty=o*t+this.ty*r+s,this},t.append=function(e,t,n,r,i,s){var o=this.a,u=this.b,a=this.c,f=this.d;return this.a=e*o+t*a,this.b=e*u+t*f,this.c=n*o+r*a,this.d=n*u+r*f,this.tx=i*o+s*a+this.tx,this.ty=i*u+s*f+this.ty,this},t.prependMatrix=function(e){return this.prepend(e.a,e.b,e.c,e.d,e.tx,e.ty),this.prependProperties(e.alpha,e.shadow,e.compositeOperation),this},t.appendMatrix=function(e){return this.append(e.a,e.b,e.c,e.d,e.tx,e.ty),this.appendProperties(e.alpha,e.shadow,e.compositeOperation),this},t.prependTransform=function(t,n,r,i,s,o,u,a,f){if(s%360)var l=s*e.DEG_TO_RAD,s=Math.cos(l),l=Math.sin(l);else s=1,l=0;if(a||f)this.tx-=a,this.ty-=f;return o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.prepend(s*r,l*r,-l*i,s*i,0,0),this.prepend(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n)):this.prepend(s*r,l*r,-l*i,s*i,t,n),this},t.appendTransform=function(t,n,r,i,s,o,u,a,f){if(s%360)var l=s*e.DEG_TO_RAD,s=Math.cos(l),l=Math.sin(l);else s=1,l=0;o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.append(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n),this.append(s*r,l*r,-l*i,s*i,0,0)):this.append(s*r,l*r,-l*i,s*i,t,n);if(a||f)this.tx-=a*this.a+f*this.c,this.ty-=a*this.b+f*this.d;return this},t.rotate=function(e){var t=Math.cos(e),e=Math.sin(e),n=this.a,r=this.c,i=this.tx;return this.a=n*t-this.b*e,this.b=n*e+this.b*t,this.c=r*t-this.d*e,this.d=r*e+this.d*t,this.tx=i*t-this.ty*e,this.ty=i*e+this.ty*t,this},t.skew=function(t,n){return t*=e.DEG_TO_RAD,n*=e.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(t),Math.cos(t),0,0),this},t.scale=function(e,t){return this.a*=e,this.d*=t,this.tx*=e,this.ty*=t,this},t.translate=function(e,t){return this.tx+=e,this.ty+=t,this},t.identity=function(){return this.alpha=this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.shadow=this.compositeOperation=null,this},t.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,s=e*r-t*n;return this.a=r/s,this.b=-t/s,this.c=-n/s,this.d=e/s,this.tx=(n*this.ty-r*i)/s,this.ty=-(e*this.ty-t*i)/s,this},t.isIdentity=function(){return this.tx==0&&this.ty==0&&this.a==1&&this.b==0&&this.c==0&&this.d==1},t.decompose=function(t){t==null&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var n=Math.atan2(-this.c,this.d),r=Math.atan2(this.b,this.a);return n==r?(t.rotation=r/e.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=n/e.DEG_TO_RAD,t.skewY=r/e.DEG_TO_RAD),t},t.reinitialize=function(e,t,n,r,i,s,o,u,a){return this.initialize(e,t,n,r,i,s),this.alpha=o||1,this.shadow=u,this.compositeOperation=a,this},t.appendProperties=function(e,t,n){return this.alpha*=e,this.shadow=t||this.shadow,this.compositeOperation=n||this.compositeOperation,this},t.prependProperties=function(e,t,n){return this.alpha*=e,this.shadow=this.shadow||t,this.compositeOperation=this.compositeOperation||n,this},t.clone=function(){var t=new e(this.a,this.b,this.c,this.d,this.tx,this.ty);return t.shadow=this.shadow,t.alpha=this.alpha,t.compositeOperation=this.compositeOperation,t},t.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},e.identity=new e(1,0,0,1,0,0),createjs.Matrix2D=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t){this.initialize(e,t)},t=e.prototype;t.x=0,t.y=0,t.initialize=function(e,t){this.x=e==null?0:e,this.y=t==null?0:t},t.clone=function(){return new e(this.x,this.y)},t.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},t=e.prototype;t.x=0,t.y=0,t.width=0,t.height=0,t.initialize=function(e,t,n,r){this.x=e==null?0:e,this.y=t==null?0:t,this.width=n==null?0:n,this.height=r==null?0:r},t.clone=function(){return new e(this.x,this.y,this.width,this.height)},t.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},t=e.prototype;e.identity=null,t.color=null,t.offsetX=0,t.offsetY=0,t.blur=0,t.initialize=function(e,t,n,r){this.color=e,this.offsetX=t,this.offsetY=n,this.blur=r},t.toString=function(){return"[Shadow]"},t.clone=function(){return new e(this.color,this.offsetX,this.offsetY,this.blur)},e.identity=new e("transparent",0,0,0),createjs.Shadow=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype;t.complete=!0,t.onComplete=null,t._animations=null,t._frames=null,t._images=null,t._data=null,t._loadCount=0,t._frameHeight=0,t._frameWidth=0,t._numFrames=0,t._regX=0,t._regY=0,t.initialize=function(e){var t,n,r;if(e!=null){if(e.images&&(n=e.images.length)>0){r=this._images=[];for(t=0;t<n;t++){var i=e.images[t];if(typeof i=="string"){var s=i,i=new Image;i.src=s}r.push(i),!i.getContext&&!i.complete&&(this._loadCount++,this.complete=!1,function(e){i.onload=function(){e._handleImageLoad()}}(this))}}if(e.frames!=null)if(e.frames instanceof Array){this._frames=[],r=e.frames;for(t=0,n=r.length;t<n;t++)s=r[t],this._frames.push({image:this._images[s[4]?s[4]:0],rect:new createjs.Rectangle(s[0],s[1],s[2],s[3]),regX:s[5]||0,regY:s[6]||0})}else n=e.frames,this._frameWidth=n.width,this._frameHeight=n.height,this._regX=n.regX||0,this._regY=n.regY||0,this._numFrames=n.count,this._loadCount==0&&this._calculateFrames();if((n=e.animations)!=null){this._animations=[],this._data={};for(var o in n){e={name:o},s=n[o];if(isNaN(s))if(s instanceof Array){e.frequency=s[3],e.next=s[2],r=e.frames=[];for(t=s[0];t<=s[1];t++)r.push(t)}else e.frequency=s.frequency,e.next=s.next,t=s.frames,r=e.frames=isNaN(t)?t.slice(0):[t];else r=e.frames=[s];e.next=r.length<2||e.next==0?null:e.next==null||e.next==1?o:e.next,e.frequency||(e.frequency=1),this._animations.push(o),this._data[o]=e}}}},t.getNumFrames=function(e){return e==null?this._frames?this._frames.length:this._numFrames:(e=this._data[e],e==null?0:e.frames.length)},t.getAnimations=function(){return this._animations.slice(0)},t.getAnimation=function(e){return this._data[e]},t.getFrame=function(e){return this.complete&&this._frames&&(frame=this._frames[e])?frame:null},t.toString=function(){return"[SpriteSheet]"},t.clone=function(){var t=new e;return t.complete=this.complete,t._animations=this._animations,t._frames=this._frames,t._images=this._images,t._data=this._data,t._frameHeight=this._frameHeight,t._frameWidth=this._frameWidth,t._numFrames=this._numFrames,t._loadCount=this._loadCount,t},t._handleImageLoad=function(){--this._loadCount==0&&(this._calculateFrames(),this.complete=!0,this.onComplete&&this.onComplete())},t._calculateFrames=function(){if(!this._frames&&this._frameWidth!=0){this._frames=[];for(var e=0,t=this._frameWidth,n=this._frameHeight,r=0,i=this._images;r<i.length;r++){for(var s=i[r],o=(s.width+1)/t|0,u=(s.height+1)/n|0,u=this._numFrames>0?Math.min(this._numFrames-e,o*u):o*u,a=0;a<u;a++)this._frames.push({image:s,rect:new createjs.Rectangle(a%o*t,(a/o|0)*n,t,n),regX:this._regX,regY:this._regY});e+=u}this._numFrames=e}},createjs.SpriteSheet=e}(),this.createjs=this.createjs||{},function(){function e(e,t,n){this.f=e,this.params=t,this.path=n==null?!0:n}e.prototype.exec=function(e){this.f.apply(e,this.params)};var t=function(){this.initialize()},n=t.prototype;t.getRGB=function(e,t,n,r){return e!=null&&n==null&&(r=t,n=e&255,t=e>>8&255,e=e>>16&255),r==null?"rgb("+e+","+t+","+n+")":"rgba("+e+","+t+","+n+","+r+")"},t.getHSL=function(e,t,n,r){return r==null?"hsl("+e%360+","+t+"%,"+n+"%)":"hsla("+e%360+","+t+"%,"+n+"%,"+r+")"},t.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},t.STROKE_CAPS_MAP=["butt","round","square"],t.STROKE_JOINTS_MAP=["miter","round","bevel"],t._ctx=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),t.beginCmd=new e(t._ctx.beginPath,[],!1),t.fillCmd=new e(t._ctx.fill,[],!1),t.strokeCmd=new e(t._ctx.stroke,[],!1),n._strokeInstructions=null,n._strokeStyleInstructions=null,n._fillInstructions=null,n._instructions=null,n._oldInstructions=null,n._activeInstructions=null,n._active=!1,n._dirty=!1,n.initialize=function(){this.clear(),this._ctx=t._ctx},n.draw=function(e){this._dirty&&this._updateInstructions();for(var t=this._instructions,n=0,r=t.length;n<r;n++)t[n].exec(e)},n.drawAsPath=function(e){this._dirty&&this._updateInstructions();for(var t,n=this._instructions,r=0,i=n.length;r<i;r++)((t=n[r]).path||r==0)&&t.exec(e)},n.moveTo=function(t,n){return this._activeInstructions.push(new e(this._ctx.moveTo,[t,n])),this},n.lineTo=function(t,n){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.lineTo,[t,n])),this},n.arcTo=function(t,n,r,i,s){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.arcTo,[t,n,r,i,s])),this},n.arc=function(t,n,r,i,s,o){return this._dirty=this._active=!0,o==null&&(o=!1),this._activeInstructions.push(new e(this._ctx.arc,[t,n,r,i,s,o])),this},n.quadraticCurveTo=function(t,n,r,i){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.quadraticCurveTo,[t,n,r,i])),this},n.bezierCurveTo=function(t,n,r,i,s,o){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.bezierCurveTo,[t,n,r,i,s,o])),this},n.rect=function(t,n,r,i){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.rect,[t,n,r,i])),this},n.closePath=function(){return this._active&&(this._dirty=!0,this._activeInstructions.push(new e(this._ctx.closePath,[]))),this},n.clear=function(){return this._instructions=[],this._oldInstructions=[],this._activeInstructions=[],this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null,this._active=this._dirty=!1,this},n.beginFill=function(t){return this._active&&this._newPath(),this._fillInstructions=t?[new e(this._setProp,["fillStyle",t],!1)]:null,this},n.beginLinearGradientFill=function(t,n,r,i,s,o){this._active&&this._newPath(),r=this._ctx.createLinearGradient(r,i,s,o),i=0;for(s=t.length;i<s;i++)r.addColorStop(n[i],t[i]);return this._fillInstructions=[new e(this._setProp,["fillStyle",r],!1)],this},n.beginRadialGradientFill=function(t,n,r,i,s,o,u,a){this._active&&this._newPath(),r=this._ctx.createRadialGradient(r,i,s,o,u,a),i=0;for(s=t.length;i<s;i++)r.addColorStop(n[i],t[i]);return this._fillInstructions=[new e(this._setProp,["fillStyle",r],!1)],this},n.beginBitmapFill=function(t,n){this._active&&this._newPath();var r=this._ctx.createPattern(t,n||"");return this._fillInstructions=[new e(this._setProp,["fillStyle",r],!1)],this},n.endFill=function(){return this.beginFill()},n.setStrokeStyle=function(n,r,i,s){return this._active&&this._newPath(),this._strokeStyleInstructions=[new e(this._setProp,["lineWidth",n==null?"1":n],!1),new e(this._setProp,["lineCap",r==null?"butt":isNaN(r)?r:t.STROKE_CAPS_MAP[r]],!1),new e(this._setProp,["lineJoin",i==null?"miter":isNaN(i)?i:t.STROKE_JOINTS_MAP[i]],!1),new e(this._setProp,["miterLimit",s==null?"10":s],!1)],this},n.beginStroke=function(t){return this._active&&this._newPath(),this._strokeInstructions=t?[new e(this._setProp,["strokeStyle",t],!1)]:null,this},n.beginLinearGradientStroke=function(t,n,r,i,s,o){this._active&&this._newPath(),r=this._ctx.createLinearGradient(r,i,s,o),i=0;for(s=t.length;i<s;i++)r.addColorStop(n[i],t[i]);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",r],!1)],this},n.beginRadialGradientStroke=function(t,n,r,i,s,o,u,a){this._active&&this._newPath(),r=this._ctx.createRadialGradient(r,i,s,o,u,a),i=0;for(s=t.length;i<s;i++)r.addColorStop(n[i],t[i]);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",r],!1)],this},n.beginBitmapStroke=function(t,n){this._active&&this._newPath();var r=this._ctx.createPattern(t,n||"");return this._strokeInstructions=[new e(this._setProp,["strokeStyle",r],!1)],this},n.endStroke=function(){return this.beginStroke(),this},n.curveTo=n.quadraticCurveTo,n.drawRect=n.rect,n.drawRoundRect=function(e,t,n,r,i){return this.drawRoundRectComplex(e,t,n,r,i,i,i,i),this},n.drawRoundRectComplex=function(t,n,r,i,s,o,u,a){var f=(r<i?r:i)/2,l=0,h=0,p=0,d=0;s<0&&(s*=l=-1),s>f&&(s=f),o<0&&(o*=h=-1),o>f&&(o=f),u<0&&(u*=p=-1),u>f&&(u=f),a<0&&(a*=d=-1),a>f&&(a=f),this._dirty=this._active=!0;var f=this._ctx.arcTo,v=this._ctx.lineTo;return this._activeInstructions.push(new e(this._ctx.moveTo,[t+r-o,n]),new e(f,[t+r+o*h,n-o*h,t+r,n+o,o]),new e(v,[t+r,n+i-u]),new e(f,[t+r+u*p,n+i+u*p,t+r-u,n+i,u]),new e(v,[t+a,n+i]),new e(f,[t-a*d,n+i+a*d,t,n+i-a,a]),new e(v,[t,n+s]),new e(f,[t-s*l,n-s*l,t+s,n,s]),new e(this._ctx.closePath)),this},n.drawCircle=function(e,t,n){return this.arc(e,t,n,0,Math.PI*2),this},n.drawEllipse=function(t,n,r,i){this._dirty=this._active=!0;var s=r/2*.5522848,o=i/2*.5522848,u=t+r,a=n+i,r=t+r/2,i=n+i/2;return this._activeInstructions.push(new e(this._ctx.moveTo,[t,i]),new e(this._ctx.bezierCurveTo,[t,i-o,r-s,n,r,n]),new e(this._ctx.bezierCurveTo,[r+s,n,u,i-o,u,i]),new e(this._ctx.bezierCurveTo,[u,i+o,r+s,a,r,a]),new e(this._ctx.bezierCurveTo,[r-s,a,t,i+o,t,i])),this},n.drawPolyStar=function(t,n,r,i,s,o){this._dirty=this._active=!0,s==null&&(s=0),s=1-s,o==null?o=0:o/=180/Math.PI;var u=Math.PI/i;this._activeInstructions.push(new e(this._ctx.moveTo,[t+Math.cos(o)*r,n+Math.sin(o)*r]));for(var a=0;a<i;a++)o+=u,s!=1&&this._activeInstructions.push(new e(this._ctx.lineTo,[t+Math.cos(o)*r*s,n+Math.sin(o)*r*s])),o+=u,this._activeInstructions.push(new e(this._ctx.lineTo,[t+Math.cos(o)*r,n+Math.sin(o)*r]));return this},n.decodePath=function(e){for(var n=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo],r=[2,2,4,6],i=0,s=e.length,o=[],u=0,a=0,f=t.BASE_64;i<s;){var l=e.charAt(i),c=f[l],h=c>>3,p=n[h];if(!p||c&3)throw"bad path data (@"+i+"): "+l;l=r[h],h||(u=a=0),o.length=0,i++,c=(c>>2&1)+2;for(h=0;h<l;h++){var d=f[e.charAt(i)],v=d>>5?-1:1,d=(d&31)<<6|f[e.charAt(i+1)];c==3&&(d=d<<6|f[e.charAt(i+2)]),d=v*d/10,h%2?u=d+=u:a=d+=a,o[h]=d,i+=c}p.apply(this,o)}return this},n.clone=function(){var e=new t;return e._instructions=this._instructions.slice(),e._activeInstructions=this._activeInstructions.slice(),e._oldInstructions=this._oldInstructions.slice(),this._fillInstructions&&(e._fillInstructions=this._fillInstructions.slice()),this._strokeInstructions&&(e._strokeInstructions=this._strokeInstructions.slice()),this._strokeStyleInstructions&&(e._strokeStyleInstructions=this._strokeStyleInstructions.slice()),e._active=this._active,e._dirty=this._dirty,e.drawAsPath=this.drawAsPath,e},n.toString=function(){return"[Graphics]"},n.mt=n.moveTo,n.lt=n.lineTo,n.at=n.arcTo,n.bt=n.bezierCurveTo,n.qt=n.quadraticCurveTo,n.a=n.arc,n.r=n.rect,n.cp=n.closePath,n.c=n.clear,n.f=n.beginFill,n.lf=n.beginLinearGradientFill,n.rf=n.beginRadialGradientFill,n.bf=n.beginBitmapFill,n.ef=n.endFill,n.ss=n.setStrokeStyle,n.s=n.beginStroke,n.ls=n.beginLinearGradientStroke,n.rs=n.beginRadialGradientStroke,n.bs=n.beginBitmapStroke,n.es=n.endStroke,n.dr=n.drawRect,n.rr=n.drawRoundRect,n.rc=n.drawRoundRectComplex,n.dc=n.drawCircle,n.de=n.drawEllipse,n.dp=n.drawPolyStar,n.p=n.decodePath,n._updateInstructions=function(){this._instructions=this._oldInstructions.slice(),this._instructions.push(t.beginCmd),this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions),this._strokeInstructions&&(this._instructions.push.apply(this._instructions,this._strokeInstructions),this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions)),this._instructions.push.apply(this._instructions,this._activeInstructions),this._fillInstructions&&this._instructions.push(t.fillCmd),this._strokeInstructions&&this._instructions.push(t.strokeCmd)},n._getEllipseArc=function(t,n,r,i){var s=r/2*.5522848,o=i/2*.5522848,u=t+r,a=n+i,r=t+r/2,i=n+i/2;return this._activeInstructions.push(new e(this._ctx.moveTo,[t,i]),new e(this._ctx.bezierCurveTo,[t,i-o,r-s,n,r,n]),new e(this._ctx.bezierCurveTo,[r+s,n,u,i-o,u,i]),new e(this._ctx.bezierCurveTo,[u,i+o,r+s,a,r,a]),new e(this._ctx.bezierCurveTo,[r-s,a,t,i+o,t,i])),this},n._newPath=function(){this._dirty&&this._updateInstructions(),this._oldInstructions=this._instructions,this._activeInstructions=[],this._active=this._dirty=!1},n._setProp=function(e,t){this[e]=t},createjs.Graphics=t}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;e.suppressCrossDomainErrors=!1,e._hitTestCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),e._hitTestCanvas.width=e._hitTestCanvas.height=1,e._hitTestContext=e._hitTestCanvas.getContext("2d"),e._nextCacheID=1,t.alpha=1,t.cacheCanvas=null,t.id=-1,t.mouseEnabled=!0,t.name=null,t.parent=null,t.regX=0,t.regY=0,t.rotation=0,t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.shadow=null,t.visible=!0,t.x=0,t.y=0,t.compositeOperation=null,t.snapToPixel=!1,t.onPress=null,t.onClick=null,t.onDoubleClick=null,t.onMouseOver=null,t.onMouseOut=null,t.onTick=null,t.filters=null,t.cacheID=0,t.mask=null,t.hitArea=null,t._cacheOffsetX=0,t._cacheOffsetY=0,t._cacheScale=1,t._cacheDataURLID=0,t._cacheDataURL=null,t._matrix=null,t.initialize=function(){this.id=createjs.UID.get(),this._matrix=new createjs.Matrix2D},t.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0},t.draw=function(e,t){var n=this.cacheCanvas;if(t||!n)return!1;var r=this._cacheScale;return e.drawImage(n,this._cacheOffsetX,this._cacheOffsetY,n.width/r,n.height/r),!0},t.updateContext=function(e){var t,n=this.mask;n&&n.graphics&&(t=n.getMatrix(n._matrix),e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),n.graphics.drawAsPath(e),e.clip(),t.invert(),e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty)),t=this._matrix.identity().appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY),createjs.Stage._snapToPixelEnabled&&this.snapToPixel?e.transform(t.a,t.b,t.c,t.d,t.tx+.5|0,t.ty+.5|0):e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),e.globalAlpha*=this.alpha,this.compositeOperation&&(e.globalCompositeOperation=this.compositeOperation),this.shadow&&this._applyShadow(e,this.shadow)},t.cache=function(e,t,n,r,i){i=i||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this.cacheCanvas.width=Math.ceil(n*i),this.cacheCanvas.height=Math.ceil(r*i),this._cacheOffsetX=e,this._cacheOffsetY=t,this._cacheScale=i||1,this.updateCache()},t.updateCache=function(t){var n=this.cacheCanvas,r=this._cacheOffsetX,i=this._cacheOffsetY,s=this._cacheScale;if(!n)throw"cache() must be called before updateCache()";var o=n.getContext("2d");o.save(),t||o.clearRect(0,0,n.width,n.height),o.globalCompositeOperation=t,o.setTransform(s,0,0,s,-r,-i),this.draw(o,!0),this._applyFilters(),o.restore(),this.cacheID=e._nextCacheID++},t.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0,this._cacheScale=1},t.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},t.getStage=function(){for(var e=this;e.parent;)e=e.parent;return e instanceof createjs.Stage?e:null},t.localToGlobal=function(e,t){var n=this.getConcatenatedMatrix(this._matrix);return n==null?null:(n.append(1,0,0,1,e,t),new createjs.Point(n.tx,n.ty))},t.globalToLocal=function(e,t){var n=this.getConcatenatedMatrix(this._matrix);return n==null?null:(n.invert(),n.append(1,0,0,1,e,t),new createjs.Point(n.tx,n.ty))},t.localToLocal=function(e,t,n){return e=this.localToGlobal(e,t),n.globalToLocal(e.x,e.y)},t.setTransform=function(e,t,n,r,i,s,o,u,a){return this.x=e||0,this.y=t||0,this.scaleX=n==null?1:n,this.scaleY=r==null?1:r,this.rotation=i||0,this.skewX=s||0,this.skewY=o||0,this.regX=u||0,this.regY=a||0,this},t.getMatrix=function(e){return(e?e.identity():new createjs.Matrix2D).appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY).appendProperties(this.alpha,this.shadow,this.compositeOperation)},t.getConcatenatedMatrix=function(e){e?e.identity():e=new createjs.Matrix2D;for(var t=this;t!=null;)e.prependTransform(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.regX,t.regY).prependProperties(t.alpha,t.shadow,t.compositeOperation),t=t.parent;return e},t.hitTest=function(t,n){var r=e._hitTestContext,i=e._hitTestCanvas;return r.setTransform(1,0,0,1,-t,-n),this.draw(r),r=this._testHit(r),i.width=0,i.width=1,r},t.clone=function(){var t=new e;return this.cloneProps(t),t},t.toString=function(){return"[DisplayObject (name="+this.name+")]"},t.cloneProps=function(e){e.alpha=this.alpha,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.rotation=this.rotation,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.shadow=this.shadow,e.skewX=this.skewX,e.skewY=this.skewY,e.visible=this.visible,e.x=this.x,e.y=this.y,e.mouseEnabled=this.mouseEnabled,e.compositeOperation=this.compositeOperation,this.cacheCanvas&&(e.cacheCanvas=this.cacheCanvas.cloneNode(!0),e.cacheCanvas.getContext("2d").putImageData(this.cacheCanvas.getContext("2d").getImageData(0,0,this.cacheCanvas.width,this.cacheCanvas.height),0,0))},t._applyShadow=function(e,t){t=t||Shadow.identity,e.shadowColor=t.color,e.shadowOffsetX=t.offsetX,e.shadowOffsetY=t.offsetY,e.shadowBlur=t.blur},t._tick=function(e){this.onTick&&(e?this.onTick.apply(this,e):this.onTick())},t._testHit=function(t){try{var n=t.getImageData(0,0,1,1).data[3]>1}catch(r){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return n},t._applyFilters=function(){if(this.filters&&this.filters.length!=0&&this.cacheCanvas)for(var e=this.filters.length,t=this.cacheCanvas.getContext("2d"),n=this.cacheCanvas.width,r=this.cacheCanvas.height,i=0;i<e;i++)this.filters[i].applyFilter(t,0,0,n,r)},createjs.DisplayObject=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype=new createjs.DisplayObject;t.children=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(){this.DisplayObject_initialize(),this.children=[]},t.isVisible=function(){return this.visible&&this.alpha>0&&this.children.length&&this.scaleX!=0&&this.scaleY!=0},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;for(var n=this.children.slice(0),r=0,i=n.length;r<i;r++){var s=n[r];s.isVisible()&&(e.save(),s.updateContext(e),s.draw(e),e.restore())}return!0},t.addChild=function(e){if(e==null)return e;var t=arguments.length;if(t>1){for(var n=0;n<t;n++)this.addChild(arguments[n]);return arguments[t-1]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.push(e),e},t.addChildAt=function(e,t){var n=arguments.length,r=arguments[n-1];if(r<0||r>this.children.length)return arguments[n-2];if(n>2){for(var i=0;i<n-1;i++)this.addChildAt(arguments[i],r+i);return arguments[n-2]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),e},t.removeChild=function(e){var t=arguments.length;if(t>1){for(var n=!0,r=0;r<t;r++)n=n&&this.removeChild(arguments[r]);return n}return this.removeChildAt(this.children.indexOf(e))},t.removeChildAt=function(e){var t=arguments.length;if(t>1){for(var n=[],r=0;r<t;r++)n[r]=arguments[r];n.sort(function(e,t){return t-e});for(var i=!0,r=0;r<t;r++)i=i&&this.removeChildAt(n[r]);return i}if(e<0||e>this.children.length-1)return!1;if(t=this.children[e])t.parent=null;return this.children.splice(e,1),!0},t.removeAllChildren=function(){for(var e=this.children;e.length;)e.pop().parent=null},t.getChildAt=function(e){return this.children[e]},t.sortChildren=function(e){this.children.sort(e)},t.getChildIndex=function(e){return this.children.indexOf(e)},t.getNumChildren=function(){return this.children.length},t.swapChildrenAt=function(e,t){var n=this.children,r=n[e],i=n[t];r&&i&&(n[e]=i,n[t]=r)},t.swapChildren=function(e,t){for(var n=this.children,r,i,s=0,o=n.length;s<o;s++)if(n[s]==e&&(r=s),n[s]==t&&(i=s),r!=null&&i!=null)break;s!=o&&(n[r]=t,n[i]=e)},t.setChildIndex=function(e,t){var n=this.children,r=n.length;if(!(e.parent!=this||t<0||t>=r)){for(var i=0;i<r;i++)if(n[i]==e)break;i==r||i==t||(n.splice(i,1),t<i&&t--,n.splice(t,0,e))}},t.contains=function(e){for(;e;){if(e==this)return!0;e=e.parent}return!1},t.hitTest=function(e,t){return this.getObjectUnderPoint(e,t)!=null},t.getObjectsUnderPoint=function(e,t){var n=[],r=this.localToGlobal(e,t);return this._getObjectsUnderPoint(r.x,r.y,n),n},t.getObjectUnderPoint=function(e,t){var n=this.localToGlobal(e,t);return this._getObjectsUnderPoint(n.x,n.y)},t.clone=function(t){var n=new e;this.cloneProps(n);if(t)for(var r=n.children=[],i=0,s=this.children.length;i<s;i++){var o=this.children[i].clone(t);o.parent=n,r.push(o)}return n},t.toString=function(){return"[Container (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){for(var t=this.children.length-1;t>=0;t--){var n=this.children[t];n._tick&&n._tick(e)}this.DisplayObject__tick(e)},t._getObjectsUnderPoint=function(t,n,r,i){var s=createjs.DisplayObject._hitTestContext,o=createjs.DisplayObject._hitTestCanvas,u=this._matrix,a=i&1&&(this.onPress||this.onClick||this.onDoubleClick)||i&2&&(this.onMouseOver||this.onMouseOut);if(this.cacheCanvas&&a&&(this.getConcatenatedMatrix(u),s.setTransform(u.a,u.b,u.c,u.d,u.tx-t,u.ty-n),s.globalAlpha=u.alpha,this.draw(s),this._testHit(s)))return o.width=0,o.width=1,this;for(var f=this.children.length-1;f>=0;f--){var l=this.children[f];if(l.isVisible()&&l.mouseEnabled)if(l instanceof e){if(a){if(l=l._getObjectsUnderPoint(t,n))return this}else if(l=l._getObjectsUnderPoint(t,n,r,i),!r&&l)return l}else if(!i||a||i&1&&(l.onPress||l.onClick||l.onDoubleClick)||i&2&&(l.onMouseOver||l.onMouseOut)){var h=l.hitArea;l.getConcatenatedMatrix(u),h&&(u.appendTransform(h.x+l.regX,h.y+l.regY,h.scaleX,h.scaleY,h.rotation,h.skewX,h.skewY,h.regX,h.regY),u.alpha*=h.alpha/l.alpha),s.globalAlpha=u.alpha,s.setTransform(u.a,u.b,u.c,u.d,u.tx-t,u.ty-n),(h||l).draw(s);if(this._testHit(s)){if(o.width=0,o.width=1,a)return this;if(!r)return l;r.push(l)}}}return null},createjs.Container=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.Container;e._snapToPixelEnabled=!1,t.autoClear=!0,t.canvas=null,t.mouseX=0,t.mouseY=0,t.onMouseMove=null,t.onMouseUp=null,t.onMouseDown=null,t.snapToPixelEnabled=!1,t.mouseInBounds=!1,t.tickOnUpdate=!0,t.mouseMoveOutside=!1,t._pointerData=null,t._pointerCount=0,t._primaryPointerID=null,t._mouseOverIntervalID=null,t.Container_initialize=t.initialize,t.initialize=function(e){this.Container_initialize(),this.canvas=e instanceof HTMLCanvasElement?e:document.getElementById(e),this._pointerData={},this._enableMouseEvents(!0)},t.update=function(){if(this.canvas){this.autoClear&&this.clear(),e._snapToPixelEnabled=this.snapToPixelEnabled,this.tickOnUpdate&&this._tick(arguments.length?arguments:null);var t=this.canvas.getContext("2d");t.save(),this.updateContext(t),this.draw(t,!1),t.restore()}},t.tick=t.update,t.clear=function(){if(this.canvas){var e=this.canvas.getContext("2d");e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this.canvas.width,this.canvas.height)}},t.toDataURL=function(e,t){t||(t="image/png");var n=this.canvas.getContext("2d"),r=this.canvas.width,i=this.canvas.height,s;if(e){s=n.getImageData(0,0,r,i);var o=n.globalCompositeOperation;n.globalCompositeOperation="destination-over",n.fillStyle=e,n.fillRect(0,0,r,i)}var u=this.canvas.toDataURL(t);return e&&(n.clearRect(0,0,r,i),n.putImageData(s,0,0),n.globalCompositeOperation=o),u},t.enableMouseOver=function(e){this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null);if(e==null)e=20;else if(e<=0)return;var t=this;this._mouseOverIntervalID=setInterval(function(){t._testMouseOver()},1e3/Math.min(50,e))},t.clone=function(){var t=new e(null);return this.cloneProps(t),t},t.toString=function(){return"[Stage (name="+this.name+")]"},t._enableMouseEvents=function(){var e=this,t=window.addEventListener?window:document;t.addEventListener("mouseup",function(t){e._handleMouseUp(t)},!1),t.addEventListener("mousemove",function(t){e._handleMouseMove(t)},!1),t.addEventListener("dblclick",function(t){e._handleDoubleClick(t)},!1),this.canvas&&this.canvas.addEventListener("mousedown",function(t){e._handleMouseDown(t)},!1)},t._getPointerData=function(e){var t=this._pointerData[e];return!t&&(t=this._pointerData[e]={x:0,y:0},this._primaryPointerID==null)&&(this._primaryPointerID=e),t},t._handleMouseMove=function(e){e||(e=window.event),this._handlePointerMove(-1,e,e.pageX,e.pageY)},t._handlePointerMove=function(e,t,n,r){if(this.canvas){var i=this._getPointerData(e),s=i.inBounds;this._updatePointerPosition(e,n,r);if(s||i.inBounds||this.mouseMoveOutside)e=new createjs.MouseEvent("onMouseMove",i.x,i.y,this,t,e,e==this._primaryPointerID,i.rawX,i.rawY),this.onMouseMove&&this.onMouseMove(e),i.event&&i.event.onMouseMove&&(e=e.clone(),e.target=i.event.target,i.event.onMouseMove(e))}},t._updatePointerPosition=function(e,t,n){var r=this._getElementRect(this.canvas);t-=r.left,n-=r.top;var i=this.canvas.width,s=this.canvas.height;t/=(r.right-r.left)/i,n/=(r.bottom-r.top)/s,r=this._getPointerData(e),(r.inBounds=t>=0&&n>=0&&t<=i-1&&n<=s-1)?(r.x=t,r.y=n):this.mouseMoveOutside&&(r.x=t<0?0:t>i-1?i-1:t,r.y=n<0?0:n>s-1?s-1:n),r.rawX=t,r.rawY=n,e==this._primaryPointerID&&(this.mouseX=r.x,this.mouseY=r.y,this.mouseInBounds=r.inBounds)},t._getElementRect=function(e){var t=e.getBoundingClientRect(),n=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),r=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),i=window.getComputedStyle?getComputedStyle(e):e.currentStyle,e=parseInt(i.paddingLeft)+parseInt(i.borderLeftWidth),s=parseInt(i.paddingTop)+parseInt(i.borderTopWidth),o=parseInt(i.paddingRight)+parseInt(i.borderRightWidth),i=parseInt(i.paddingBottom)+parseInt(i.borderBottomWidth);return{left:t.left+n+e,right:t.right+n-o,top:t.top+r+s,bottom:t.bottom+r-i}},t._handleMouseUp=function(e){this._handlePointerUp(-1,e,!1)},t._handlePointerUp=function(e,t,n){var r=this._getPointerData(e),i=new createjs.MouseEvent("onMouseUp",r.x,r.y,this,t,e,e==this._primaryPointerID,r.rawX,r.rawY);this.onMouseUp&&this.onMouseUp(i),r.event&&r.event.onMouseUp&&(i=i.clone(),i.target=r.event.target,r.event.onMouseUp(i)),r.target&&r.target.onClick&&this._getObjectsUnderPoint(r.x,r.y,null,true,this._mouseOverIntervalID?3:1)==r.target&&r.target.onClick(new createjs.MouseEvent("onClick",r.x,r.y,r.target,t,e,e==this._primaryPointerID,r.rawX,r.rawY)),n?(e==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[e]):r.event=r.target=null},t._handleMouseDown=function(e){this._handlePointerDown(-1,e,!1)},t._handlePointerDown=function(e,t,n,r){var i=this._getPointerData(e);r!=null&&this._updatePointerPosition(e,n,r),this.onMouseDown&&this.onMouseDown(new createjs.MouseEvent("onMouseDown",i.x,i.y,this,t,e,e==this._primaryPointerID,i.rawX,i.rawY));if(n=this._getObjectsUnderPoint(i.x,i.y,null,this._mouseOverIntervalID?3:1))n.onPress&&(e=new createjs.MouseEvent("onPress",i.x,i.y,n,t,e,e==this._primaryPointerID,i.rawX,i.rawY),n.onPress(e),e.onMouseMove||e.onMouseUp)&&(i.event=e),i.target=n},t._testMouseOver=function(){if(this._primaryPointerID==-1&&(this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var e=null;this.mouseInBounds&&(e=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY),this._mouseOverTarget!=e&&(this._mouseOverTarget&&this._mouseOverTarget.onMouseOut&&this._mouseOverTarget.onMouseOut(new createjs.MouseEvent("onMouseOut",this.mouseX,this.mouseY,this._mouseOverTarget)),e&&e.onMouseOver&&e.onMouseOver(new createjs.MouseEvent("onMouseOver",this.mouseX,this.mouseY,e)),this._mouseOverTarget=e)}},t._handleDoubleClick=function(e){this.onDoubleClick&&this.onDoubleClick(new createjs.MouseEvent("onDoubleClick",this.mouseX,this.mouseY,this,e,-1,!0));var t=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,this._mouseOverIntervalID?3:1);t&&t.onDoubleClick&&t.onDoubleClick(new createjs.MouseEvent("onDoubleClick",this.mouseX,this.mouseY,t,e,-1,!0))},createjs.Stage=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.image=null,t.snapToPixel=!0,t.sourceRect=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),typeof e=="string"?(this.image=new Image,this.image.src=e):this.image=e},t.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;var n=this.sourceRect;return n?e.drawImage(this.image,n.x,n.y,n.width,n.height,0,0,n.width,n.height):e.drawImage(this.image,0,0),!0},t.clone=function(){var t=new e(this.image);return this.cloneProps(t),t},t.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.onAnimationEnd=null,t.currentFrame=-1,t.currentAnimation=null,t.paused=!0,t.spriteSheet=null,t.snapToPixel=!0,t.offset=0,t.currentAnimationFrame=0,t._advanceCount=0,t._animation=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),this.spriteSheet=e},t.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.spriteSheet.complete&&this.currentFrame>=0},t.DisplayObject_draw=t.draw,t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;this._normalizeFrame();var n=this.spriteSheet.getFrame(this.currentFrame);if(n!=null){var r=n.rect;return e.drawImage(n.image,r.x,r.y,r.width,r.height,-n.regX,-n.regY,r.width,r.height),!0}},t.play=function(){this.paused=!1},t.stop=function(){this.paused=!0},t.gotoAndPlay=function(e){this.paused=!1,this._goto(e)},t.gotoAndStop=function(e){this.paused=!0,this._goto(e)},t.advance=function(){this._animation?this.currentAnimationFrame++:this.currentFrame++,this._normalizeFrame()},t.clone=function(){var t=new e(this.spriteSheet);return this.cloneProps(t),t},t.toString=function(){return"[BitmapAnimation (name="+this.name+")]"},t.DisplayObject__tick=t._tick,t._tick=function(e){var t=this._animation?this._animation.frequency:1;!this.paused&&(++this._advanceCount+this.offset)%t==0&&this.advance(),this.DisplayObject__tick(e)},t._normalizeFrame=function(){var e=this._animation;e?this.currentAnimationFrame>=e.frames.length?(e.next?this._goto(e.next):(this.paused=!0,this.currentAnimationFrame=e.frames.length-1,this.currentFrame=e.frames[this.currentAnimationFrame]),this.onAnimationEnd)&&this.onAnimationEnd(this,e.name):this.currentFrame=e.frames[this.currentAnimationFrame]:this.currentFrame>=this.spriteSheet.getNumFrames()&&(this.currentFrame=0,this.onAnimationEnd)&&this.onAnimationEnd(this,null)},t.DisplayObject_cloneProps=t.cloneProps,t.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.onAnimationEnd=this.onAnimationEnd,e.currentFrame=this.currentFrame,e.currentAnimation=this.currentAnimation,e.paused=this.paused,e.offset=this.offset,e._animation=this._animation,e.currentAnimationFrame=this.currentAnimationFrame},t._goto=function(e){if(isNaN(e)){var t=this.spriteSheet.getAnimation(e);t&&(this.currentAnimationFrame=0,this._animation=t,this.currentAnimation=e,this._normalizeFrame())}else this.currentAnimation=this._animation=null,this.currentFrame=e},createjs.BitmapAnimation=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.graphics=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){this.DisplayObject_initialize(),this.graphics=e?e:new createjs.Graphics},t.isVisible=function(){return Boolean(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.graphics)},t.DisplayObject_draw=t.draw,t.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this.graphics.draw(e),!0)},t.clone=function(t){return t=new e(t&&this.graphics?this.graphics.clone():this.graphics),this.cloneProps(t),t},t.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype=new createjs.DisplayObject;e._workingContext=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),t.text="",t.font=null,t.color="#000",t.textAlign="left",t.textBaseline="top",t.maxWidth=null,t.outline=!1,t.lineHeight=0,t.lineWidth=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e,t,n){this.DisplayObject_initialize(),this.text=e,this.font=t,this.color=n?n:"#000"},t.isVisible=function(){return Boolean(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.text!=null&&this.text!=="")},t.DisplayObject_draw=t.draw,t.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this.outline?e.strokeStyle=this.color:e.fillStyle=this.color,e.font=this.font,e.textAlign=this.textAlign||"start",e.textBaseline=this.textBaseline||"alphabetic",this._drawText(e),!0)},t.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width},t.getMeasuredLineHeight=function(){return this._getWorkingContext().measureText("M").width*1.2},t.getMeasuredHeight=function(){return this._drawText()*(this.lineHeight||this.getMeasuredLineHeight())},t.clone=function(){var t=new e(this.text,this.font,this.color);return this.cloneProps(t),t},t.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},t.DisplayObject_cloneProps=t.cloneProps,t.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.maxWidth=this.maxWidth,e.outline=this.outline,e.lineHeight=this.lineHeight,e.lineWidth=this.lineWidth},t._getWorkingContext=function(){var t=e._workingContext;return t.font=this.font,t.textAlign=this.textAlign||"start",t.textBaseline=this.textBaseline||"alphabetic",t},t._drawText=function(e){var t=!!e;t||(e=this._getWorkingContext());for(var n=String(this.text).split(/(?:\r\n|\r|\n)/),r=this.lineHeight||this.getMeasuredLineHeight(),i=0,s=0,o=n.length;s<o;s++){var u=e.measureText(n[s]).width;if(this.lineWidth==null||u<this.lineWidth)t&&this._drawTextLine(e,n[s],i*r);else{for(var u=n[s].split(/(\s)/),a=u[0],f=1,l=u.length;f<l;f+=2)e.measureText(a+u[f]+u[f+1]).width>this.lineWidth?(t&&this._drawTextLine(e,a,i*r),i++,a=u[f+1]):a+=u[f]+u[f+1];t&&this._drawTextLine(e,a,i*r)}i++}return i},t._drawTextLine=function(e,t,n){this.outline?e.strokeText(t,0,n,this.maxWidth||65535):e.fillText(t,0,n,this.maxWidth||65535)},createjs.Text=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"SpriteSheetUtils cannot be instantiated"};e._workingCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),e._workingContext=e._workingCanvas.getContext("2d"),e.addFlippedFrames=function(t,n,r,i){if(n||r||i){var s=0;n&&e._flip(t,++s,!0,!1),r&&e._flip(t,++s,!1,!0),i&&e._flip(t,++s,!0,!0)}},e.extractFrame=function(t,n){isNaN(n)&&(n=t.getAnimation(n).frames[0]);var r=t.getFrame(n);if(!r)return null;var i=r.rect,s=e._workingCanvas;return s.width=i.width,s.height=i.height,e._workingContext.drawImage(r.image,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r=new Image,r.src=s.toDataURL("image/png"),r},e.mergeAlpha=function(e,t,n){n||(n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),n.width=Math.max(t.width,e.width),n.height=Math.max(t.height,e.height);var r=n.getContext("2d");return r.save(),r.drawImage(e,0,0),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),r.restore(),n},e._flip=function(t,n,r,i){for(var s=t._images,o=e._workingCanvas,u=e._workingContext,a=s.length/n,f=0;f<a;f++){var l=s[f];l.__tmp=f,o.width=0,o.width=l.width,o.height=l.height,u.setTransform(r?-1:1,0,0,i?-1:1,r?l.width:0,i?l.height:0),u.drawImage(l,0,0);var h=new Image;h.src=o.toDataURL("image/png"),h.width=l.width,h.height=l.height,s.push(h)}u=t._frames,o=u.length/n;for(f=0;f<o;f++){var l=u[f],p=l.rect.clone(),h=s[l.image.__tmp+a*n],d={image:h,rect:p,regX:l.regX,regY:l.regY};r&&(p.x=h.width-p.x-p.width,d.regX=p.width-l.regX),i&&(p.y=h.height-p.y-p.height,d.regY=p.height-l.regY),u.push(d)}r="_"+(r?"h":"")+(i?"v":""),i=t._animations,t=t._data,s=i.length/n;for(f=0;f<s;f++){u=i[f],l=t[u],a={name:u+r,frequency:l.frequency,next:l.next,frames:[]},l.next&&(a.next+=r),u=l.frames,l=0;for(h=u.length;l<h;l++)a.frames.push(u[l]+o*n);t[a.name]=a,i.push(a.name)}},createjs.SpriteSheetUtils=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;e.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",e.ERR_RUNNING="a build is already running",t.maxWidth=2048,t.maxHeight=2048,t.spriteSheet=null,t.scale=1,t.padding=1,t._frames=null,t._animations=null,t._data=null,t._nextFrameIndex=0,t._index=0,t._callback=null,t._timeSlice=null,t._timerID=null,t._scale=1,t.initialize=function(){this._frames=[],this._animations={}},t.addFrame=function(t,n,r,i,s,o){if(this._data)throw e.ERR_RUNNING;return n=n||t.bounds||t.nominalBounds,!n&&t.getBounds&&(n=t.getBounds()),n?(r=r||1,this._frames.push({source:t,sourceRect:n,scale:r,funct:i,params:s,scope:o,index:this._frames.length,height:n.height*r})-1):null},t.addAnimation=function(t,n,r,i){if(this._data)throw e.ERR_RUNNING;this._animations[t]={frames:n,next:r,frequency:i}},t.addMovieClip=function(t,n,r){if(this._data)throw e.ERR_RUNNING;var i=t.frameBounds,s=n||t.bounds||t.nominalBounds;!s&&t.getBounds&&(s=t.getBounds());if(!s&&!i)return null;for(var n=t.timeline.duration,o=0;o<n;o++)this.addFrame(t,i&&i[o]?i[o]:s,r,function(e){var t=this.actionsEnabled;this.actionsEnabled=!1,this.gotoAndStop(e),this.actionsEnabled=t},[o],t);var o=t.timeline._labels,t=[],u;for(u in o)t.push({index:o[u],label:u});if(t.length){t.sort(function(e,t){return e.index-t.index}),o=0;for(u=t.length;o<u;o++){for(var r=t[o].label,i=o==u-1?n:t[o+1].index,s=[],a=t[o].index;a<i;a++)s.push(a);this.addAnimation(r,s,!0)}}},t.build=function(){if(this._data)throw e.ERR_RUNNING;this._callback=null;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},t.buildAsync=function(t,n){if(this._data)throw e.ERR_RUNNING;this._callback=t,this._startBuild(),this._timeSlice=Math.max(.01,Math.min(.99,n||.3))*50;var r=this;this._timerID=setTimeout(function(){r._run()},50-this._timeSlice)},t.stopAsync=function(){clearTimeout(this._timerID),this._data=null},t.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},t.toString=function(){return"[SpriteSheetBuilder]"},t._startBuild=function(){var t=this.padding||0;this.spriteSheet=null,this._index=0,this._scale=this.scale;var n=[];this._data={images:[],frames:n,animations:this._animations};var r=this._frames.slice();r.sort(function(e,t){return e.height<=t.height?-1:1});if(r[r.length-1].height+t*2>this.maxHeight)throw e.ERR_DIMENSIONS;for(var i=0,s=0,o=0;r.length;){var u=this._fillRow(r,i,o,n,t);u.w>s&&(s=u.w),i+=u.h;if(!u.h||!r.length){var a=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");a.width=this._getSize(s,this.maxWidth),a.height=this._getSize(i,this.maxHeight),this._data.images[o]=a,u.h||(s=i=0,o++)}}},t._getSize=function(e,t){for(var n=4;Math.pow(2,++n)<e;);return Math.min(t,Math.pow(2,n))},t._fillRow=function(t,n,r,i,s){var o=this.maxWidth,u=this.maxHeight-n,a=s;n+=s;for(var f=0,l=t.length-1;l>=0;l--){var h=t[l],p=this._scale*h.scale,d=h.sourceRect,v=h.source,m=Math.floor(p*d.x-s),g=Math.floor(p*d.y-s),y=Math.ceil(p*d.height+s*2),d=Math.ceil(p*d.width+s*2);if(d>o)throw e.ERR_DIMENSIONS;y>u||a+d>o||(h.img=r,h.rect=new createjs.Rectangle(a,n,d,y),f=f||y,t.splice(l,1),i[h.index]=[a,n,d,y,r,Math.round(-m+p*v.regX-s),Math.round(-g+p*v.regY-s)],a+=d)}return{w:a,h:f}},t._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this._callback&&this._callback(this)},t._run=function(){for(var e=(new Date).getTime()+this._timeSlice,t=!1;e>(new Date).getTime();)if(!this._drawNext()){t=!0;break}if(t)this._endBuild();else{var n=this;this._timerID=setTimeout(function(){n._run()},50-this._timeSlice)}},t._drawNext=function(){var e=this._frames[this._index],t=e.scale*this._scale,n=e.rect,r=e.sourceRect,i=this._data.images[e.img].getContext("2d");return e.funct&&e.funct.apply(e.scope,e.params),i.save(),i.beginPath(),i.rect(n.x,n.y,n.width,n.height),i.clip(),i.translate(Math.ceil(n.x-r.x*t),Math.ceil(n.y-r.y*t)),i.scale(t,t),e.source.draw(i),i.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.DisplayObject;t.htmlElement=null,t._style=null,t.DisplayObject_initialize=t.initialize,t.initialize=function(e){typeof e=="string"&&(e=document.getElementById(e)),this.DisplayObject_initialize(),this.mouseEnabled=!1;if(this.htmlElement=e)this._style=e.style,this._style.position="absolute",this._style.transformOrigin=this._style.WebkitTransformOrigin=this._style.msTransformOrigin=this._style.MozTransformOrigin=this._style.OTransformOrigin="0% 0%"},t.isVisible=function(){return this.htmlElement!=null},t.draw=function(){if(this.htmlElement!=null){var e=this.getConcatenatedMatrix(this._matrix),t=this.htmlElement;return t.style.opacity=""+e.alpha,t.style.visibility=this.visible?"visible":"hidden",t.style.transform=t.style.WebkitTransform=t.style.OTransform=t.style.msTransform=["matrix("+e.a,e.b,e.c,e.d,e.tx+.5|0,(e.ty+.5|0)+")"].join(","),t.style.MozTransform=["matrix("+e.a,e.b,e.c,e.d,(e.tx+.5|0)+"px",(e.ty+.5|0)+"px)"].join(","),!0}},t.cache=function(){},t.uncache=function(){},t.updateCache=function(){},t.hitTest=function(){},t.localToGlobal=function(){},t.globalToLocal=function(){},t.localToLocal=function(){},t.clone=function(){var t=new e;return this.cloneProps(t),t},t.toString=function(){return"[DOMElement (name="+this.name+")]"},t._tick=function(e){this.htmlElement!=null&&(this.htmlElement.style.visibility="hidden",this.onTick)&&this.onTick(e)},createjs.DOMElement=e}(),this.createjs=this.createjs||{},function(){var e=function(){this.initialize()},t=e.prototype;t.initialize=function(){},t.getBounds=function(){return new createjs.Rectangle(0,0,0,0)},t.applyFilter=function(){},t.toString=function(){return"[Filter]"},t.clone=function(){return new e},createjs.Filter=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"Touch cannot be instantiated"};e.isSupported=function(){return"ontouchstart"in window||window.navigator.msPointerEnabled},e.enable=function(t,n,r){return!t||!t.canvas||!e.isSupported()?!1:(t.__touch={pointers:{},multitouch:!n,preventDefault:!r,count:0},"ontouchstart"in window?e._IOS_enable(t):window.navigator.msPointerEnabled&&e._IE_enable(t),!0)},e.disable=function(t){t&&("ontouchstart"in window?e._IOS_disable(t):window.navigator.msPointerEnabled&&e._IE_disable(t))},e._IOS_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IOS_handleEvent(t,n)};n.addEventListener("touchstart",r,!1),n.addEventListener("touchmove",r,!1),n.addEventListener("touchend",r,!1),n.addEventListener("touchcancel",r,!1)},e._IOS_disable=function(e){var t=e.canvas;t&&(e=e.__touch.f,t.removeEventListener("touchstart",e,!1),t.removeEventListener("touchmove",e,!1),t.removeEventListener("touchend",e,!1),t.removeEventListener("touchcancel",e,!1))},e._IOS_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();for(var n=t.changedTouches,r=t.type,i=0,s=n.length;i<s;i++){var o=n[i],u=o.identifier;o.target==e.canvas&&(r=="touchstart"?this._handleStart(e,u,t,o.pageX,o.pageY):r=="touchmove"?this._handleMove(e,u,t,o.pageX,o.pageY):(r=="touchend"||r=="touchcancel")&&this._handleEnd(e,u,t))}}},e._IE_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IE_handleEvent(t,n)};n.addEventListener("MSPointerDown",r,!1),window.addEventListener("MSPointerMove",r,!1),window.addEventListener("MSPointerUp",r,!1),window.addEventListener("MSPointerCancel",r,!1),t.__touch.preventDefault&&(n.style.msTouchAction="none"),t.__touch.activeIDs={}},e._IE_disable=function(e){var t=e.__touch.f;window.removeEventListener("MSPointerMove",t,!1),window.removeEventListener("MSPointerUp",t,!1),window.removeEventListener("MSPointerCancel",t,!1),e.canvas&&e.canvas.removeEventListener("MSPointerDown",t,!1)},e._IE_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();var n=t.type,r=t.pointerId,i=e.__touch.activeIDs;if(n=="MSPointerDown")t.srcElement==e.canvas&&(i[r]=!0,this._handleStart(e,r,t,t.pageX,t.pageY));else if(i[r])if(n=="MSPointerMove")this._handleMove(e,r,t,t.pageX,t.pageY);else if(n=="MSPointerUp"||n=="MSPointerCancel")delete i[r],this._handleEnd(e,r,t)}},e._handleStart=function(e,t,n,r,i){var s=e.__touch;if(s.multitouch||!s.count){var o=s.pointers;o[t]||(o[t]=!0,s.count++,e._handlePointerDown(t,n,r,i))}},e._handleMove=function(e,t,n,r,i){e.__touch.pointers[t]&&e._handlePointerMove(t,n,r,i)},e._handleEnd=function(e,t,n){var r=e.__touch,i=r.pointers;i[t]&&(r.count--,e._handlePointerUp(t,n,!0),delete i[t])},createjs.Touch=e}();this.createjs=this.createjs||{},function(){var e=function(){this.init()};e.prototype={};var t=e.prototype;t.loaded=!1,t.canceled=!1,t.progress=0,t._item=null,t.onProgress=null,t.onLoadStart=null,t.onFileLoad=null,t.onFileProgress=null,t.onComplete=null,t.onError=null,t.getItem=function(){return this._item},t.init=function(){},t.load=function(){},t.cancel=function(){},t._sendLoadStart=function(){!this._isCanceled()&&this.onLoadStart&&this.onLoadStart({target:this})},t._sendProgress=function(e){if(!this._isCanceled()){var t;if(e instanceof Number)this.progress=e,t={loaded:this.progress,total:1};else if(t=e,this.progress=e.loaded/e.total,isNaN(this.progress)||this.progress==Infinity)this.progress=0;t.target=this,this.onProgress&&this.onProgress(t)}},t._sendFileProgress=function(e){this._isCanceled()?this._cleanUp():this.onFileProgress&&(e.target=this,this.onFileProgress(e))},t._sendComplete=function(){!this._isCanceled()&&this.onComplete&&this.onComplete({target:this})},t._sendFileComplete=function(e){!this._isCanceled()&&this.onFileLoad&&(e.target=this,this.onFileLoad(e))},t._sendError=function(e){!this._isCanceled()&&this.onError&&(e==null&&(e={}),e.target=this,this.onError(e))},t._isCanceled=function(){return window.createjs==null||this.canceled?!0:!1},t.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.initialize(e)},t=e.prototype=new createjs.AbstractLoader;e.IMAGE="image",e.SVG="svg",e.SOUND="sound",e.JSON="json",e.JAVASCRIPT="javascript",e.CSS="css",e.XML="xml",e.TEXT="text",e.TIMEOUT_TIME=8e3,t.useXHR=!0,t.stopOnError=!1,t.maintainScriptOrder=!0,t.next=null,t.typeHandlers=null,t.extensionHandlers=null,t._loadStartWasDispatched=!1,t._maxConnections=1,t._currentLoads=null,t._loadQueue=null,t._loadedItemsById=null,t._loadedItemsBySrc=null,t._targetProgress=0,t._numItems=0,t._numItemsLoaded=null,t._scriptOrder=null,t._loadedScripts=null,t.TAG_LOAD_OGGS=!0,t.initialize=function(e){this._targetProgress=this._numItemsLoaded=this._numItems=0,this._paused=!1,this._currentLoads=[],this._loadQueue=[],this._scriptOrder=[],this._loadedScripts=[],this._loadedItemsById={},this._loadedItemsBySrc={},this.typeHandlers={},this.extensionHandlers={},this._loadStartWasDispatched=!1,this.useXHR=e!=0&&window.XMLHttpRequest!=null,this.determineCapabilities()},t.determineCapabilities=function(){var e=createjs.PreloadJS.BrowserDetect;e!=null&&(createjs.PreloadJS.TAG_LOAD_OGGS=e.isFirefox||e.isOpera)},e.isBinary=function(e){switch(e){case createjs.PreloadJS.IMAGE:case createjs.PreloadJS.SOUND:return!0;default:return!1}},t.installPlugin=function(e){if(e!=null&&e.getPreloadHandlers!=null){e=e.getPreloadHandlers();if(e.types!=null)for(var t=0,n=e.types.length;t<n;t++)this.typeHandlers[e.types[t]]=e.callback;if(e.extensions!=null)for(t=0,n=e.extensions.length;t<n;t++)this.extensionHandlers[e.extensions[t]]=e.callback}},t.setMaxConnections=function(e){this._maxConnections=e,this._paused||this._loadNext()},t.loadFile=function(e,t){e==null?this._sendError({text:"File is null."}):(this._addItem(e),t!==!1&&this.setPaused(!1))},t.loadManifest=function(e,t){var n;if(e instanceof Array){if(e.length==0){this._sendError({text:"Manifest is empty."});return}n=e}else{if(e==null){this._sendError({text:"Manifest is null."});return}n=[e]}for(var r=0,i=n.length;r<i;r++)this._addItem(n[r],!1);t!==!1&&this._loadNext()},t.load=function(){this.setPaused(!1)},t.getResult=function(e){return this._loadedItemsById[e]||this._loadedItemsBySrc[e]},t.setPaused=function(e){(this._paused=e)||this._loadNext()},t.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0},t._addItem=function(e){e=this._createLoadItem(e),e!=null&&(this._loadQueue.push(e),this._numItems++,this._updateProgress(),e.getItem().type==createjs.PreloadJS.JAVASCRIPT&&(this._scriptOrder.push(e.getItem()),this._loadedScripts.push(null)))},t._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded&&(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load.apply(this.next));for(;this._loadQueue.length&&this._currentLoads.length<this._maxConnections;)this._loadItem(this._loadQueue.shift())}},t._loadItem=function(e){e.onProgress=createjs.PreloadJS.proxy(this._handleProgress,this),e.onComplete=createjs.PreloadJS.proxy(this._handleFileComplete,this),e.onError=createjs.PreloadJS.proxy(this._handleFileError,this),this._currentLoads.push(e),e.load()},t._handleFileError=function(e){var e=e.target,t=this._createResultData(e.getItem());this._numItemsLoaded++,this._updateProgress(),this._sendError(t),this.stopOnError||(this._removeLoadItem(e),this._loadNext())},t._createResultData=function(e){var t={id:e.id,result:null,data:e.data,type:e.type,src:e.src};return this._loadedItemsById[e.id]=t,this._loadedItemsBySrc[e.src]=t},t._handleFileComplete=function(e){var e=e.target,t=e.getItem(),n=this._createResultData(t);this._removeLoadItem(e),n.result=e instanceof createjs.XHRLoader?this._createResult(t,e.getResult()):t.tag;switch(t.type){case createjs.PreloadJS.IMAGE:if(e instanceof createjs.XHRLoader){var r=this;n.result.onload=function(){r._handleFileTagComplete(t,n)};return}break;case createjs.PreloadJS.JAVASCRIPT:if(this.maintainScriptOrder){this._loadedScripts[this._scriptOrder.indexOf(t)]=t,this._checkScriptLoadOrder(e);return}}this._handleFileTagComplete(t,n)},t._checkScriptLoadOrder=function(){for(var e=this._loadedScripts.length,t=0;t<e;t++){var n=this._loadedScripts[t];if(n===null)break;if(n!==!0){var r=this.getResult(n.src),n=this.getResult(n.id);n.result=r.result,this._handleFileTagComplete(r,n),this._loadedScripts[t]=!0,t--,e--}}},t._handleFileTagComplete=function(e,t){this._numItemsLoaded++,e.completeHandler&&e.completeHandler(t),this._updateProgress(),this._sendFileComplete(t),this._loadNext()},t._removeLoadItem=function(e){for(var t=this._currentLoads.length,n=0;n<t;n++)if(this._currentLoads[n]==e){this._currentLoads.splice(n,1);break}},t._createResult=function(e,t){var n=null,r;switch(e.type){case createjs.PreloadJS.IMAGE:n=this._createImage();break;case createjs.PreloadJS.SOUND:n=e.tag||this._createAudio();break;case createjs.PreloadJS.CSS:n=this._createLink();break;case createjs.PreloadJS.JAVASCRIPT:n=this._createScript();break;case createjs.PreloadJS.SVG:var n=this._createSVG(),i=this._createXML(t,"image/svg+xml");n.appendChild(i);break;case createjs.PreloadJS.XML:r=this._createXML(t,"text/xml");break;case createjs.PreloadJS.JSON:case createjs.PreloadJS.TEXT:r=t}return n?(e.type==createjs.PreloadJS.CSS?n.href=e.src:e.type!=createjs.PreloadJS.SVG&&(n.src=e.src),n):r},t._createXML=function(e,t){var n;return window.DOMParser?(n=new DOMParser,n=n.parseFromString(e,t)):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e)),n},t._handleProgress=function(e){var e=e.target,t=this._createResultData(e.getItem());t.progress=e.progress,this._sendFileProgress(t),this._updateProgress()},t._updateProgress=function(){var e=this._numItemsLoaded/this._numItems,t=this._numItems-this._numItemsLoaded;if(t>0){for(var n=0,r=0,i=this._currentLoads.length;r<i;r++)n+=this._currentLoads[r].progress;e+=n/t*(t/this._numItems)}this._sendProgress({loaded:e,total:1})},t._createLoadItem=function(e){var t={};switch(typeof e){case"string":t.src=e;break;case"object":e instanceof HTMLAudioElement?(t.tag=e,t.src=t.tag.src,t.type=createjs.PreloadJS.SOUND):t=e}t.ext=this._getNameAfter(t.src,"."),t.type||(t.type=this.getType(t.ext));if(t.id==null||t.id=="")t.id=t.src;if(e=this.typeHandlers[t.type]||this.extensionHandlers[t.ext]){e=e(t.src,t.type,t.id,t.data);if(e===!1)return null;e!==!0&&(e.src!=null&&(t.src=e.src),e.id!=null&&(t.id=e.id),e.tag!=null&&e.tag.load instanceof Function&&(t.tag=e.tag)),t.ext=this._getNameAfter(t.src,".")}e=this.useXHR;switch(t.type){case createjs.PreloadJS.JSON:case createjs.PreloadJS.XML:case createjs.PreloadJS.TEXT:e=!0;break;case createjs.PreloadJS.SOUND:t.ext=="ogg"&&createjs.PreloadJS.TAG_LOAD_OGGS&&(e=!1)}return this.useXHR!=1||t.type!=createjs.PreloadJS.IMAGE&&t.type!=createjs.PreloadJS.SVG?e?new createjs.XHRLoader(t):t.tag?new createjs.TagLoader(t):this._createTagItem(t):(t=this._createTagItem(t),t.useXHR=!0,t)},t._createTagItem=function(e){var t,n="src",r=!1;switch(e.type){case createjs.PreloadJS.IMAGE:t=this._createImage();break;case createjs.PreloadJS.SOUND:t=this._createAudio();break;case createjs.PreloadJS.CSS:n="href",r=!0,t=this._createLink();break;case createjs.PreloadJS.JAVASCRIPT:r=!0,t=this._createScript();break;case createjs.PreloadJS.SVG:n="data",t=this._createSVG()}return e.tag=t,new createjs.TagLoader(e,n,r)},t.getType=function(e){switch(e){case"jpeg":case"jpg":case"gif":case"png":return createjs.PreloadJS.IMAGE;case"ogg":case"mp3":case"wav":return createjs.PreloadJS.SOUND;case"json":return createjs.PreloadJS.JSON;case"xml":return createjs.PreloadJS.XML;case"css":return createjs.PreloadJS.CSS;case"js":return createjs.PreloadJS.JAVASCRIPT;case"svg":return createjs.PreloadJS.SVG;default:return createjs.PreloadJS.TEXT}},t._getNameAfter=function(e,t){var n=e.lastIndexOf(t),n=e.substr(n+1),r=n.lastIndexOf(/[\b|\?|\#|\s]/);return r==-1?n:n.substr(0,r)},t._createImage=function(){return document.createElement("img")},t._createSVG=function(){var e=document.createElement("object");return e.type="image/svg+xml",e},t._createAudio=function(){var e=document.createElement("audio");return e.autoplay=!1,e.type="audio/ogg",e},t._createScript=function(){var e=document.createElement("script");return e.type="text/javascript",e},t._createLink=function(){var e=document.createElement("link");return e.type="text/css",e.rel="stylesheet",e},t.toString=function(){return"[PreloadJS]"},e.proxy=function(e,t){return function(n){return e.apply(t,arguments)}},createjs.PreloadJS=e;var n=function(){};n.init=function(){var e=navigator.userAgent;n.isFirefox=e.indexOf("Firefox")>-1,n.isOpera=window.opera!=null,n.isIOS=e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1},n.init(),createjs.PreloadJS.BrowserDetect=n}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.init(e,t,n)},t=e.prototype=new createjs.AbstractLoader;t._srcAttr=null,t._loadTimeOutTimeout=null,t.tagCompleteProxy=null,t.init=function(e,t,n){this._item=e,this._srcAttr=t||"src",this.useXHR=n==1,this.isAudio=e.tag instanceof HTMLAudioElement,this.tagCompleteProxy=createjs.PreloadJS.proxy(this._handleTagLoad,this)},t.cancel=function(){this.canceled=!0,this._clean();var e=this.getItem();e!=null&&(e.src=null)},t.load=function(){this.useXHR?this.loadXHR():this.loadTag()},t.loadXHR=function(){var e=this.getItem(),e=new createjs.XHRLoader(e);e.onProgress=createjs.PreloadJS.proxy(this._handleProgress,this),e.onFileLoad=createjs.PreloadJS.proxy(this._handleXHRComplete,this),e.onComplete=createjs.PreloadJS.proxy(this._handleXHRComplete,this),e.onError=createjs.PreloadJS.proxy(this._handleLoadError,this),e.load()},t._handleXHRComplete=function(e){if(!this._isCanceled()){this._clean(),e.target.onFileLoad=null,e.target.onComplete=null;var t=e.target.getItem();e.target.getResult(),t.type==createjs.PreloadJS.IMAGE?(t.tag.onload=createjs.PreloadJS.proxy(this._sendComplete,this),t.tag.src=t.src):(t.tag[this._srcAttr]=t.src,this._sendComplete())}},t._handleLoadError=function(e){e.error&&e.error.code==101?this.loadTag():(this._clean(),this._sendError(e))},t.loadTag=function(){var e=this.getItem(),t=e.tag;clearTimeout(this._loadTimeOutTimeout),this._loadTimeOutTimeout=setTimeout(createjs.PreloadJS.proxy(this._handleLoadTimeOut,this),createjs.PreloadJS.TIMEOUT_TIME),this.isAudio&&(t.src=null,t.preload="auto",t.setAttribute("data-temp","true")),t.onerror=createjs.PreloadJS.proxy(this._handleLoadError,this),t.onprogress=createjs.PreloadJS.proxy(this._handleProgress,this),this.isAudio?(t.onstalled=createjs.PreloadJS.proxy(this._handleStalled,this),t.addEventListener("canplaythrough",this.tagCompleteProxy,!1)):t.onload=createjs.PreloadJS.proxy(this._handleTagLoad,this),t[this._srcAttr]=e.src,e.type==createjs.PreloadJS.SVG&&document.getElementsByTagName("body")[0].appendChild(t),e=e.type==createjs.PreloadJS.SOUND&&e.ext=="ogg"&&createjs.PreloadJS.BrowserDetect.isFirefox,t.load!=null&&!e&&t.load()},t._handleLoadTimeOut=function(){this._clean(),this._sendError()},t._handleStalled=function(){},t._handleLoadError=function(){this._clean(),this._sendError()},t._handleTagLoad=function(){if(!this._isCanceled()){var e=this.getItem().tag;clearTimeout(this._loadTimeOutTimeout),this.loaded||this.isAudio&&e.readyState!==4||(this.getItem().type==createjs.PreloadJS.SVG&&document.getElementsByTagName("body")[0].removeChild(e),this.loaded=!0,this._clean(),this._sendComplete())}},t._clean=function(){clearTimeout(this._loadTimeOutTimeout);var e=this.getItem().tag;e.onload=null,e.removeEventListener&&e.removeEventListener("canplaythrough",this.tagCompleteProxy,!1),e.onstalled=null,e.onprogress=null,e.onerror=null},t._handleProgress=function(e){clearTimeout(this._loadTimeOutTimeout);if(this.isAudio){e=this.getItem();if(e.buffered==null)return;e={loaded:e.buffered.length>0?e.buffered.end(0):0,total:e.duration}}this._sendProgress(e)},t.toString=function(){return"[PreloadJS TagLoader]"},createjs.TagLoader=e}(),this.createjs=this.createjs||{},function(){var e=function(e){this.init(e)},t=e.prototype=new createjs.AbstractLoader;t._wasLoaded=!1,t._request=null,t._loadTimeOutTimeout=null,t._xhrLevel=null,t.init=function(e){this._item=e,this._createXHR(e)},t.getResult=function(){try{return this._request.responseText}catch(e){}return this._request.response},t.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},t.load=function(){if(this._request==null)this.handleError();else{this._xhrLevel==1&&(this._loadTimeOutTimeout=setTimeout(createjs.PreloadJS.proxy(this.handleTimeout,this),createjs.PreloadJS.TIMEOUT_TIME)),this._request.onloadstart=createjs.PreloadJS.proxy(this.handleLoadStart,this),this._request.onprogress=createjs.PreloadJS.proxy(this.handleProgress,this),this._request.onabort=createjs.PreloadJS.proxy(this.handleAbort,this),this._request.onerror=createjs.PreloadJS.proxy(this.handleError,this),this._request.ontimeout=createjs.PreloadJS.proxy(this.handleTimeout,this),this._request.onload=createjs.PreloadJS.proxy(this.handleLoad,this),this._request.onreadystatechange=createjs.PreloadJS.proxy(this.handleReadyStateChange,this);try{this._request.send()}catch(e){this._sendError({source:e})}}},t.handleProgress=function(e){e.loaded>0&&e.total==0||this._sendProgress({loaded:e.loaded,total:e.total})},t.handleLoadStart=function(){clearTimeout(this._loadTimeOutTimeout),this._sendLoadStart()},t.handleAbort=function(){this._clean(),this._sendError()},t.handleError=function(){this._clean(),this._sendError()},t.handleReadyStateChange=function(){this._request.readyState==4&&this.handleLoad()},t._checkError=function(){switch(parseInt(this._request.status)){case 404:case 0:return!1}return this._hasResponse()||this._hasTextResponse()||this._hasXMLResponse()},t._hasResponse=function(){return this._request.response!=null},t._hasTextResponse=function(){try{return this._request.responseText!=null}catch(e){return!1}},t._hasXMLResponse=function(){try{return this._request.responseXML!=null}catch(e){return!1}},t.handleLoad=function(){this.loaded||(this.loaded=!0,this._checkError()?(this._clean(),this._sendComplete()):this.handleError())},t.handleTimeout=function(){this._clean(),this._sendError()},t._createXHR=function(e){this._xhrLevel=1,window.ArrayBuffer&&(this._xhrLevel=2);if(window.XMLHttpRequest)this._request=new XMLHttpRequest;else try{this._request=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(t){return null}return e.type==createjs.PreloadJS.TEXT&&this._request.overrideMimeType&&this._request.overrideMimeType("text/plain; charset=x-user-defined"),this._request.open("GET",e.src,!0),createjs.PreloadJS.isBinary(e.type)&&(this._request.responseType="arraybuffer"),!0},t._clean=function(){clearTimeout(this._loadTimeOutTimeout);var e=this._request;e.onloadstart=null,e.onprogress=null,e.onabort=null,e.onerror=null,e.onload=null,e.ontimeout=null,e.onloadend=null,e.onreadystatechange=null,clearInterval(this._checkLoadInterval)},t.toString=function(){return"[PreloadJS XHRLoader]"},createjs.XHRLoader=e}();this.createjs=this.createjs||{},function(){function e(){throw"SoundJS cannot be instantiated"}function t(e,t){this.init(e,t)}function n(){}e.DELIMITER="|",e.AUDIO_TIMEOUT=8e3,e.INTERRUPT_ANY="any",e.INTERRUPT_EARLY="early",e.INTERRUPT_LATE="late",e.INTERRUPT_NONE="none",e.PLAY_INITED="playInited",e.PLAY_SUCCEEDED="playSucceeded",e.PLAY_INTERRUPTED="playInterrupted",e.PLAY_FINISHED="playFinished",e.PLAY_FAILED="playFailed",e.activePlugin=null,e.muted=!1,e.pluginsRegistered=!1,e.masterVolume=1,e.instances=[],e.instanceHash={},e.idHash=null,e.defaultSoundInstance=null,e.getPreloadHandlers=function(){return{callback:e.proxy(e.initLoad,e),types:["sound"],extensions:["mp3","ogg","wav"]}},e.registerPlugins=function(t){e.pluginsRegistered=!0;for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i!=null&&i.isSupported())return e.activePlugin=new i,!0}return!1},e.registerPlugin=function(t){return e.pluginsRegistered=!0,t==null?!1:t.isSupported()?(e.activePlugin=new t,!0):!1},e.isReady=function(){return e.activePlugin!=null},e.getCapabilities=function(){return e.activePlugin==null?null:e.activePlugin.capabilities},e.getCapability=function(t){return e.activePlugin==null?null:e.activePlugin.capabilities[t]},e.initLoad=function(n,r,i,s){return e.checkPlugin(!0)?(n=e.parsePath(n,r,i,s),n==null?!1:(i!=null&&(e.idHash==null&&(e.idHash={}),e.idHash[i]=n.src),t.create(n.src,s),i=e.activePlugin.register(n.src,s),i!=null&&(i.tag!=null?n.tag=i.tag:i.src&&(n.src=i.src),i.completeHandler!=null&&(n.handler=i.completeHandler)),n)):!1},e.parsePath=function(t,n,r,i){for(var t=t.split(e.DELIMITER),n={type:n||"sound",id:r,data:i,handler:e.handleSoundReady},r=!1,i=e.getCapabilities(),s=0,o=t.length;s<o;s++){var u=t[s],a=u.lastIndexOf("."),f=u.substr(a+1).toLowerCase(),a=u.substr(0,a).split("/").pop();switch(f){case"mp3":i.mp3&&(r=!0);break;case"ogg":i.ogg&&(r=!0);break;case"wav":i.wav&&(r=!0)}if(r)return n.name=a,n.src=u,n.extension=f,n}return null},e.play=function(t,n,r,i,s,o,u){if(!e.checkPlugin(!0))return e.defaultSoundInstance;t=e.getSrcFromId(t),t=e.activePlugin.create(t);try{t.mute(e.muted)}catch(a){}return e.playInstance(t,n,r,i,s,o,u)||t.playFailed(),t},e.playInstance=function(t,n,r,i,s,o,u){n=n||e.INTERRUPT_NONE,r==null&&(r=0),i==null&&(i=0),s==null&&(s=0),o==null&&(o=1),u==null&&(u=0);if(r==0){if(!e.beginPlaying(t,n,i,s,o,u))return!1}else setTimeout(function(){e.beginPlaying(t,n,i,s,o,u)},r);return this.instances.push(t),this.instanceHash[t.uniqueId]=t,!0},e.beginPlaying=function(e,n,r,i,s,o){return t.add(e,n)?e.beginPlaying(r,i,s,o)?!0:(this.instances.splice(this.instances.indexOf(e),1),delete this.instanceHash[e.uniqueId],!1):!1},e.checkPlugin=function(t){return e.activePlugin==null&&(t&&!e.pluginsRegistered&&e.registerPlugin(createjs.HTMLAudioPlugin),e.activePlugin==null)?!1:!0},e.getSrcFromId=function(t){return e.idHash==null||e.idHash[t]==null?t:e.idHash[t]},e.setVolume=function(t,n){return Number(t)==null?!1:(t=Math.max(0,Math.min(1,t)),e.tellAllInstances("setVolume",n,t))},e.getMasterVolume=function(){return e.masterVolume},e.setMasterVolume=function(t){return e.masterVolume=t,e.tellAllInstances("setMasterVolume",null,t)},e.setMute=function(t){return this.muted=t,e.tellAllInstances("mute",null,t)},e.pause=function(t){return e.tellAllInstances("pause",t)},e.resume=function(t){return e.tellAllInstances("resume",t)},e.stop=function(t){return e.tellAllInstances("stop",t)},e.getInstanceById=function(e){return this.instanceHash[e]},e.playFinished=function(e){t.remove(e),this.instances.splice(this.instances.indexOf(e),1)},e.tellAllInstances=function(e,t,n){if(this.activePlugin==null)return!1;for(var t=this.getSrcFromId(t),r=this.instances.length-1;r>=0;r--){var i=this.instances[r];if(t==null||i.src==t)switch(e){case"pause":i.pause();break;case"resume":i.resume();break;case"setVolume":i.setVolume(n);break;case"setMasterVolume":i.setMasterVolume(n);break;case"mute":i.mute(n);break;case"stop":i.stop();break;case"setPan":i.setPan(n)}}return!0},e.proxy=function(e,t){return function(){return e.apply(t,arguments)}},createjs.SoundJS=e,t.channels={},t.create=function(e,n){var r=t.get(e);r==null?t.channels[e]=new t(e,n):r.max+=n},t.add=function(e,n){var r=t.get(e.src);return r==null?!1:r.add(e,n)},t.remove=function(e){var n=t.get(e.src);return n==null?!1:(n.remove(e),!0)},t.get=function(e){return t.channels[e]},t.prototype={src:null,max:null,length:0,init:function(e,t){this.src=e,this.max=t||1,this.instances=[]},get:function(e){return this.instances[e]},add:function(e,t){return this.getSlot(t,e)?(this.instances.push(e),this.length++,!0):!1},remove:function(e){return e=this.instances.indexOf(e),e==-1?!1:(this.instances.splice(e,1),this.length--,!0)},getSlot:function(t){for(var n,r,i=0,s=this.max||100;i<s;i++){n=this.get(i);if(n==null)return!0;if(t==e.INTERRUPT_NONE)continue;if(i==0)r=n;else if(n.playState==e.PLAY_FINISHED||n==e.PLAY_INTERRUPTED||n==e.PLAY_FAILED)r=n;else if(t==e.INTERRUPT_EARLY&&n.getPosition()<r.getPosition()||t==e.INTERRUPT_LATE&&n.getPosition()>r.getPosition())r=n}return r!=null?(r.interrupt(),this.remove(r),!0):!1},toString:function(){return"[SoundJS SoundChannel]"}},e.defaultSoundInstance=new function(){this.isDefault=!0,this.pause=this.resume=this.play=this.beginPlaying=this.cleanUp=this.interrupt=this.stop=this.setMasterVolume=this.setVolume=this.mute=this.setPan=this.getPosition=this.setPosition=this.playFailed=function(){return!1},this.getVolume=this.getPan=this.getDuration=function(){return 0},this.playState=e.PLAY_FAILED,this.toString=function(){return"[SoundJS Default Sound Instance]"}},n.init=function(){var e=navigator.userAgent;n.isFirefox=e.indexOf("Firefox")>-1,n.isOpera=window.opera!=null,n.isIOS=e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1},n.init(),createjs.SoundJS.BrowserDetect=n}(),this.createjs=this.createjs||{},function(){function e(){this.init()}function t(e){this.init(e)}function n(e){this.init(e)}e.MAX_INSTANCES=30,e.capabilities=null,e.lastId=0,e.AUDIO_READY="canplaythrough",e.AUDIO_ENDED="ended",e.AUDIO_ERROR="error",e.AUDIO_STALLED="stalled",e.fillChannels=!1,e.isSupported=function(){return createjs.SoundJS.BrowserDetect.isIOS?!1:(e.generateCapabilities(),e.tag==null?!1:!0)},e.generateCapabilities=function(){if(e.capabilities==null){var t=e.tag=document.createElement("audio");if(t.canPlayType==null)return null;e.capabilities={panning:!1,volume:!0,mp3:t.canPlayType("audio/mp3")!="no"&&t.canPlayType("audio/mp3")!="",ogg:t.canPlayType("audio/ogg")!="no"&&t.canPlayType("audio/ogg")!="",mpeg:t.canPlayType("audio/mpeg")!="no"&&t.canPlayType("audio/mpeg")!="",wav:t.canPlayType("audio/wav")!="no"&&t.canPlayType("audio/wav")!="",channels:e.MAX_INSTANCES}}},e.prototype={capabilities:null,FT:.001,channels:null,init:function(){this.capabilities=e.capabilities,this.channels={}},register:function(e,t){for(var r=n.get(e),i,s=0,o=t||1;s<o;s++)i=this.createTag(e),r.add(i);return{tag:i}},createTag:function(e){var t=document.createElement("audio");return t.preload=!1,t.src=e,t},create:function(e){return e=new t(e),e.owner=this,e},toString:function(){return"[HTMLAudioPlugin]"}},createjs.HTMLAudioPlugin=e,t.prototype={src:null,uniqueId:-1,playState:null,owner:null,loaded:!1,lastInterrupt:createjs.SoundJS.INTERRUPT_NONE,offset:0,delay:0,volume:1,pan:0,remainingLoops:0,delayTimeout:-1,tag:null,muted:!1,paused:!1,onComplete:null,onLoop:null,onReady:null,onPlayFailed:null,onPlayInterrupted:null,endedHandler:null,readyHandler:null,stalledHandler:null,init:function(e){this.uniqueId=createjs.HTMLAudioPlugin.lastId++,this.src=e,this.endedHandler=createjs.SoundJS.proxy(this.handleSoundComplete,this),this.readyHandler=createjs.SoundJS.proxy(this.handleSoundReady,this),this.stalledHandler=createjs.SoundJS.proxy(this.handleSoundStalled,this)},cleanUp:function(){var e=this.tag;if(e!=null){e.pause();try{e.currentTime=0}catch(t){}e.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_ENDED,this.endedHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_READY,this.readyHandler,!1),n.setInstance(this.src,e),this.tag=null}window.createjs!=null&&createjs.SoundJS.playFinished(this)},interrupt:function(){this.tag!=null&&(this.playState=createjs.SoundJS.PLAY_INTERRUPTED,this.onPlayInterrupted&&this.onPlayInterrupted(this),this.cleanUp(),this.paused=!1)},play:function(e,t,n,r,i,s){this.cleanUp(),createjs.SoundJS.playInstance(this,e,t,n,r,i,s)},beginPlaying:function(e,t,r){if(window.createjs!=null){var i=this.tag=n.getInstance(this.src);return i==null?(this.playFailed(),-1):(i.addEventListener(createjs.HTMLAudioPlugin.AUDIO_ENDED,this.endedHandler,!1),this.offset=e,this.volume=r,this.updateVolume(),this.remainingLoops=t,i.readyState!==4?(i.addEventListener(createjs.HTMLAudioPlugin.AUDIO_READY,this.readyHandler,!1),i.addEventListener(createjs.HTMLAudioPlugin.AUDIO_STALLED,this.stalledHandler,!1),i.load()):this.handleSoundReady(null),1)}},handleSoundStalled:function(){this.onPlayFailed!=null&&this.onPlayFailed(this),this.cleanUp()},handleSoundReady:function(){window.createjs!=null&&((this.playState=createjs.SoundJS.PLAY_SUCCEEDED,this.paused=!1,this.tag.removeEventListener(createjs.HTMLAudioPlugin.AUDIO_READY,this.readyHandler,!1),this.offset>=this.getDuration())?this.playFailed():(this.offset>0&&(this.tag.currentTime=this.offset*.001),this.remainingLoops==-1&&(this.tag.loop=!0),this.tag.play()))},pause:function(){return this.paused=!0,this.tag!=null?(this.tag.pause(),!1):!0},resume:function(){return this.paused=!1,this.tag!=null?(this.tag.play(),!1):!0},stop:function(){return this.pause(),this.playState=createjs.SoundJS.PLAY_FINISHED,this.cleanUp(),!0},setMasterVolume:function(){return this.updateVolume(),!0},setVolume:function(e){return this.volume=e,this.updateVolume(),!0},updateVolume:function(){return this.tag!=null?(this.tag.volume=this.muted?0:this.volume*createjs.SoundJS.masterVolume,!0):!1},getVolume:function(){return this.volume},mute:function(e){return this.muted=e,this.updateVolume(),!0},setPan:function(){return!1},getPan:function(){return 0},getPosition:function(){return this.tag==null?0:this.tag.currentTime*1e3},setPosition:function(e){if(this.tag==null)return!1;try{this.tag.currentTime=e*.001}catch(t){return!1}return!0},getDuration:function(){return this.tag==null?0:this.tag.duration*1e3},handleSoundComplete:function(){this.remainingLoops!=0?(this.remainingLoops--,this.tag.play(),this.onLoop!=null)&&this.onLoop(this):window.createjs!=null&&(this.playState=createjs.SoundJS.PLAY_FINISHED,this.onComplete!=null&&this.onComplete(this),this.cleanUp())},playFailed:function(){window.createjs!=null&&(this.playState=createjs.SoundJS.PLAY_FAILED,this.onPlayFailed!=null&&this.onPlayFailed(this),this.cleanUp())},toString:function(){return"[HTMLAudioPlugin SoundInstance]"}},n.channels={},n.get=function(e){var t=n.channels[e];return t==null&&(t=n.channels[e]=new n(e)),t},n.getInstance=function(e){return e=n.channels[e],e==null?null:e.get()},n.setInstance=function(e,t){var r=n.channels[e];return r==null?null:r.set(t)},n.prototype={src:null,length:0,available:0,tags:null,init:function(e){this.src=e,this.tags=[]},add:function(e){this.tags.push(e),this.length++,this.available=this.tags.length},get:function(){if(this.tags.length==0)return null;this.available=this.tags.length;var e=this.tags.pop();return document.body.appendChild(e),e},set:function(e){this.tags.indexOf(e)==-1&&this.tags.push(e),document.body.removeChild(e),this.available=this.tags.length},toString:function(){return"[HTMLAudioPlugin TagChannel]"}}}();this.createjs=this.createjs||{},function(){var e=function(e,t){this.initialize(e,t)},t=e.prototype;e.NONE=0,e.LOOP=1,e.REVERSE=2,e.IGNORE={},e._tweens=[],e._plugins={},e.get=function(t,n,r){return new e(t,n,r)},e.tick=function(t,n){for(var r=e._tweens.slice(),i=r.length-1;i>=0;i--){var s=r[i];n&&!s.ignoreGlobalPause||s._paused||s.tick(s._useTicks?1:t)}},createjs.Ticker&&createjs.Ticker.addListener(e,!1),e.removeTweens=function(t){if(t.tweenjs_count){for(var n=e._tweens,r=n.length-1;r>=0;r--)n[r]._target==t&&(n[r]._paused=!0,n.splice(r,1));t.tweenjs_count=0}},e.hasActiveTweens=function(t){return t?t.tweenjs_count:e._tweens&&e._tweens.length},e.installPlugin=function(t,n){var r=t.priority;r==null&&(t.priority=r=0);for(var i=0,s=n.length,o=e._plugins;i<s;i++){var u=n[i];if(o[u]){for(var a=o[u],f=0,l=a.length;f<l;f++)if(r<a[f].priority)break;o[u].splice(f,0,t)}else o[u]=[t]}},e._register=function(t,n){var r=t._target;n?(r&&(r.tweenjs_count=r.tweenjs_count?r.tweenjs_count+1:1),e._tweens.push(t)):(r&&r.tweenjs_count--,r=e._tweens.indexOf(t),r!=-1&&e._tweens.splice(r,1))},t.ignoreGlobalPause=!1,t.loop=!1,t.duration=0,t.pluginData=null,t.onChange=null,t.target=null,t.position=null,t._paused=!1,t._curQueueProps=null,t._initQueueProps=null,t._steps=null,t._actions=null,t._prevPosition=0,t._stepPosition=0,t._prevPos=-1,t._target=null,t._useTicks=!1,t.initialize=function(t,n,r){this.target=this._target=t,n&&(this._useTicks=n.useTicks,this.ignoreGlobalPause=n.ignoreGlobalPause,this.loop=n.loop,this.onChange=n.onChange,n.override&&e.removeTweens(t)),this.pluginData=r||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],n&&n.paused?this._paused=!0:e._register(this,!0),n&&n.position!=null&&this.setPosition(n.position,e.NONE)},t.wait=function(e){if(e==null||e<=0)return this;var t=this._cloneProps(this._curQueueProps);return this._addStep({d:e,p0:t,e:this._linearEase,p1:t})},t.to=function(e,t,n){if(isNaN(t)||t<0)t=0;return this._addStep({d:t||0,p0:this._cloneProps(this._curQueueProps),e:n,p1:this._cloneProps(this._appendQueueProps(e))})},t.call=function(e,t,n){return this._addAction({f:e,p:t?t:[this],o:n?n:this._target})},t.set=function(e,t){return this._addAction({f:this._set,o:this,p:[e,t?t:this._target]})},t.play=function(e){return this.call(e.setPaused,[!1],e)},t.pause=function(e){return e||(e=this),this.call(e.setPaused,[!0],e)},t.setPosition=function(e,t){e<0&&(e=0),t==null&&(t=1);var n=e,r=!1;n>=this.duration&&(this.loop?n%=this.duration:(n=this.duration,r=!0));if(n==this._prevPos)return r;if(this._target)if(r)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var i=0,s=this._steps.length;i<s;i++)if(this._steps[i].t>n)break;i=this._steps[i-1],this._updateTargetProps(i,(this._stepPosition=n-i.t)/i.d,n)}return i=this._prevPos,this.position=this._prevPos=n,this._prevPosition=e,t!=0&&this._actions.length>0&&(this._useTicks?this._runActions(n,n):t==1&&n<i?(i!=this.duration&&this._runActions(i,this.duration),this._runActions(0,n,!0)):this._runActions(i,n)),r&&this.setPaused(!0),this.onChange&&this.onChange(this),r},t.tick=function(e){this._paused||this.setPosition(this._prevPosition+e)},t.setPaused=function(t){return this._paused=!!t,e._register(this,!t),this},t.w=t.wait,t.t=t.to,t.c=t.call,t.s=t.set,t.toString=function(){return"[Tween]"},t.clone=function(){throw"Tween can not be cloned."},t._updateTargetProps=function(t,r,i){var s,o,u,a;!t&&r==1?s=o=this._curQueueProps:(t.e&&(r=t.e(r,0,1,1)),s=t.p0,o=t.p1);for(n in this._initQueueProps){(u=s[n])==null&&(s[n]=u=this._initQueueProps[n]),(a=o[n])==null&&(o[n]=a=u),u=u==a||r==0||r==1||typeof u!="number"?r==1?a:u:u+(a-u)*r;var f=!1;if(a=e._plugins[n])for(var l=0,c=a.length;l<c;l++){var h=a[l].tween(this,n,u,s,o,r,i,!t);h==e.IGNORE?f=!0:u=h}f||(this._target[n]=u)}},t._runActions=function(e,t,n){var r=e,i=t,s=-1,o=this._actions.length,u=1;e>t&&(r=t,i=e,s=o,o=u=-1);for(;(s+=u)!=o;){var t=this._actions[s],a=t.t;(a==i||a>r&&a<i||n&&a==e)&&t.f.apply(t.o,t.p)}},t._appendQueueProps=function(t){var n,r,i,s;for(s in t){if(this._initQueueProps[s]==null){r=this._target[s];if(n=e._plugins[s])for(var o=0,u=n.length;o<u;o++)i=n[o].init(this,s,r),i!=e.IGNORE&&(r=i);this._initQueueProps[s]=r}this._curQueueProps[s]=t[s]}return this._curQueueProps},t._cloneProps=function(e){var t={},n;for(n in e)t[n]=e[n];return t},t._addStep=function(e){return e.d>0&&(this._steps.push(e),e.t=this.duration,this.duration+=e.d),this},t._addAction=function(e){return e.t=this.duration,this._actions.push(e),this},t._set=function(e,t){for(var n in e)t[n]=e[n]},createjs.Tween=e}(),this.createjs=this.createjs||{},function(){var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype;t.ignoreGlobalPause=!1,t.duration=0,t.loop=!1,t.onChange=null,t.position=null,t._paused=!1,t._tweens=null,t._labels=null,t._prevPosition=0,t._prevPos=-1,t._useTicks=!1,t.initialize=function(e,t,n){this._tweens=[],n&&(this._useTicks=n.useTicks,this.loop=n.loop,this.ignoreGlobalPause=n.ignoreGlobalPause,this.onChange=n.onChange),e&&this.addTween.apply(this,e),this.setLabels(t),n&&n.paused?this._paused=!0:createjs.Tween._register(this,!0),n&&n.position!=null&&this.setPosition(n.position,createjs.Tween.NONE)},t.addTween=function(e){var t=arguments.length;if(t>1){for(var n=0;n<t;n++)this.addTween(arguments[n]);return arguments[0]}return t==0?null:(this.removeTween(e),this._tweens.push(e),e.setPaused(!0),e._paused=!1,e._useTicks=this._useTicks,e.duration>this.duration&&(this.duration=e.duration),this._prevPos>=0&&e.setPosition(this._prevPos,createjs.Tween.NONE),e)},t.removeTween=function(e){var t=arguments.length;if(t>1){for(var n=!0,r=0;r<t;r++)n=n&&this.removeTween(arguments[r]);return n}return t==0?!1:(t=this._tweens.indexOf(e),t!=-1?(this._tweens.splice(t,1),e.duration>=this.duration&&this.updateDuration(),!0):!1)},t.addLabel=function(e,t){this._labels[e]=t},t.setLabels=function(e){this._labels=e?e:{}},t.gotoAndPlay=function(e){this.setPaused(!1),this._goto(e)},t.gotoAndStop=function(e){this.setPaused(!0),this._goto(e)},t.setPosition=function(e,t){e<0&&(e=0);var n=this.loop?e%this.duration:e,r=!this.loop&&e>=this.duration;if(n==this._prevPos)return r;this._prevPosition=e,this.position=this._prevPos=n;for(var i=0,s=this._tweens.length;i<s;i++)if(this._tweens[i].setPosition(n,t),n!=this._prevPos)return!1;return r&&this.setPaused(!0),this.onChange&&this.onChange(this),r},t.setPaused=function(e){this._paused=!!e,createjs.Tween._register(this,!e)},t.updateDuration=function(){for(var e=this.duration=0,t=this._tweens.length;e<t;e++)if(tween=this._tweens[e],tween.duration>this.duration)this.duration=tween.duration},t.tick=function(e){this.setPosition(this._prevPosition+e)},t.resolve=function(e){var t=parseFloat(e);return isNaN(t)&&(t=this._labels[e]),t},t.toString=function(){return"[Timeline]"},t.clone=function(){throw"Timeline can not be cloned."},t._goto=function(e){e=this.resolve(e),e!=null&&this.setPosition(e)},createjs.Timeline=e}(),this.createjs=this.createjs||{},function(){var e=function(){throw"Ease cannot be instantiated."};e.linear=function(e){return e},e.none=e.linear,e.get=function(e){return e<-1&&(e=-1),e>1&&(e=1),function(t){return e==0?t:e<0?t*(t*-e+1+e):t*((2-t)*e+(1-e))}},e.getPowIn=function(e){return function(t){return Math.pow(t,e)}},e.getPowOut=function(e){return function(t){return 1-Math.pow(1-t,e)}},e.getPowInOut=function(e){return function(t){return(t*=2)<1?.5*Math.pow(t,e):1-.5*Math.abs(Math.pow(2-t,e))}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)},e.sineOut=function(e){return Math.sin(e*Math.PI/2)},e.sineInOut=function(e){return-0.5*(Math.cos(Math.PI*e)-1)},e.getBackIn=function(e){return function(t){return t*t*((e+1)*t-e)}},e.backIn=e.getBackIn(1.7),e.getBackOut=function(e){return function(t){return--t*t*((e+1)*t+e)+1}},e.backOut=e.getBackOut(1.7),e.getBackInOut=function(e){return e*=1.525,function(t){return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}},e.backInOut=e.getBackInOut(1.7),e.circIn=function(e){return-(Math.sqrt(1-e*e)-1)},e.circOut=function(e){return Math.sqrt(1- --e*e)},e.circInOut=function(e){return(e*=2)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},e.bounceInOut=function(t){return t<.5?e.bounceIn(t*2)*.5:e.bounceOut(t*2-1)*.5+.5},e.getElasticIn=function(e,t){var n=Math.PI*2;return function(r){if(r==0||r==1)return r;var i=t/n*Math.asin(1/e);return-(e*Math.pow(2,10*(r-=1))*Math.sin((r-i)*n/t))}},e.elasticIn=e.getElasticIn(1,.3),e.getElasticOut=function(e,t){var n=Math.PI*2;return function(r){if(r==0||r==1)return r;var i=t/n*Math.asin(1/e);return e*Math.pow(2,-10*r)*Math.sin((r-i)*n/t)+1}},e.elasticOut=e.getElasticOut(1,.3),e.getElasticInOut=function(e,t){var n=Math.PI*2;return function(r){var i=t/n*Math.asin(1/e);return(r*=2)<1?-0.5*e*Math.pow(2,10*(r-=1))*Math.sin((r-i)*n/t):e*Math.pow(2,-10*(r-=1))*Math.sin((r-i)*n/t)*.5+1}},e.elasticInOut=e.getElasticInOut(1,.3*1.5),createjs.Ease=e}();(function(e,t,n){r=e,i=t,s=n,function(e,t,n){var r;(e.playing=function(){this.initialize(),this.instance=new e.playing2_1,this.instance.setTransform(216,749.5,1,1,0,0,0,216,18.5),this.player2Text=new e.playingtoptalk2_1,this.player2Text.setTransform(234.4,90.5,1,1,0,0,0,40.5,26),this.player1Text=new e.playingtoptalk1_1,this.player1Text.setTransform(197.7,48.1,1,1,0,0,0,41,25.5),this.player2Head=new e.girl265r_1,this.player2Head.setTransform(355.2,101.6,1,1,0,0,0,62.5,65.5),this.player1Head=new e.boy165l_1,this.player1Head.setTransform(88.8,105.6,1,1,0,0,0,77,61),this.instance_1=new e.playing1_1,this.instance_1.setTransform(216,117,1,1,0,0,0,216,117),this.time=new e.playing3_1,this.time.setTransform(216,198.8,1,1,0,0,0,169,10.5),this.instance_2=new e.playing4_1,this.instance_2.setTransform(216,198.8,1,1,0,0,0,173.5,15),this.addChild(this.instance_2,this.time,this.instance_1,this.player1Head,this.player2Head,this.player1Text,this.player2Text,this.instance)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,432,768),(e.boy165l=function(){this.initialize(t.boy165l)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,154,122),(e.girl265r=function(){this.initialize(t.girl265r)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,125,131),(e.playing_1=function(){this.initialize(t.playing_1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,768),(e.playing1=function(){this.initialize(t.playing1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,234),(e.playing2=function(){this.initialize(t.playing2)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,37),(e.playing3=function(){this.initialize(t.playing3)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,338,21),(e.playing4=function(){this.initialize(t.playing4)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,347,30),(e.playingtoptalk1=function(){this.initialize(t.playingtoptalk1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,82,51),(e.playingtoptalk2=function(){this.initialize(t.playingtoptalk2)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,81,52),(e.playing4_1=function(){this.initialize(),this.instance=new e.playing4,this.addChild(this.instance)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,347,30),(e.playing3_1=function(){this.initialize(),this.instance_1=new e.playing3,this.addChild(this.instance_1)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,338,21),(e.playing2_1=function(){this.initialize(),this.instance_2=new e.playing2,this.addChild(this.instance_2)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,432,37),(e.playing1_1=function(){this.initialize(),this.instance_3=new e.playing1,this.addChild(this.instance_3)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,432,234),(e.playingtoptalk2_1=function(){this.initialize(),this.instance_4=new e.playingtoptalk2,this.addChild(this.instance_4)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,81,52),(e.playingtoptalk1_1=function(){this.initialize(),this.instance_5=new e.playingtoptalk1,this.addChild(this.instance_5)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,82,51),(e.girl265r_1=function(){this.initialize(),this.instance_6=new e.girl265r,this.addChild(this.instance_6)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,125,131),(e.boy165l_1=function(){this.initialize(),this.instance_7=new e.boy165l,this.addChild(this.instance_7)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,154,122)}(r=r||{},i=i||{},s=s||{});var r,i,s})(libPlaying=libPlaying||{},images=images||{},createjs=createjs||{});var libPlaying,images,createjs;(function(e,t,n){i=t,s=n,r=e,function(e,t,n){var r;(e.finding=function(){this.initialize(),this.girls_small=new e.girls_small,this.girls_small.setTransform(184.7,184.3,1,1,0,0,0,166.2,32.5),this.boys_small=new e.boys_small,this.boys_small.setTransform(249.1,190.7,1,1,0,0,0,172.9,30.9),this.girls=new e.girls,this.girls.setTransform(185.1,178.1,1,1,0,0,0,166.2,32.5),this.boys=new e.boys,this.boys.setTransform(251.5,178.1,1,1,0,0,0,173.7,31),this.dot_3=new e.finding2_1,this.dot_3.setTransform(331.9,52,1,1,0,0,0,-12.9,-12.5),this.dot_2=new e.finding2_1,this.dot_2.setTransform(308.3,52,1,1,0,0,0,-12.9,-12.5),this.dot_1=new e.finding2_1,this.dot_1.setTransform(285.8,52,1,1,0,0,0,-12.9,-12.5),this.instance=new e.finding1_1,this.instance.setTransform(175.6,40.5,1,1,0,0,0,-143.9,-29.5),this.instance_1=new e.bg1_1,this.instance_1.setTransform(216.1,41.6,1,1,0,0,0,-323.9,213.5),this.iamcoming=new e.finding6_1,this.iamcoming.setTransform(216,286.8,1,1,0,0,0,140,63.5),this.girlHead=new e.girl165l_1,this.girlHead.setTransform(129,536.1,1,1,0,0,0,62.5,65.5),this.boyHead=new e.boy,this.boyHead.setTransform(133.2,538.3,1,1,0,0,0,-115.4,-91.9),this.backToIndex=new e.buttonreturn1_1,this.backToIndex.setTransform(216.1,725,1,1,0,0,0,-117.4,245),this.instance_2=new e.bg2_1,this.instance_2.setTransform(216.1,744.6,1,1,0,0,0,-323.9,241),this.instance_3=new e.talk_1,this.instance_3.setTransform(280.9,542.2,1,1,0,0,0,-100.9,238),this.girlBg=new e.bggirl_1,this.girlBg.setTransform(216.1,536.3,1,1,0,0,0,-256.9,140.5),this.boyBg=new e.bgboy_1,this.boyBg.setTransform(216.1,536.3,1,1,0,0,0,-256.9,140.5),this.instance_4=new e.detail_1,this.instance_4.setTransform(216.1,539.9,1,1,0,0,0,-289.9,60.5),this.randomEnemy=new e.finding5_1,this.randomEnemy.setTransform(315.9,322.8,1,1,0,0,0,-137.9,-31),this.inviteFriend=new e.finding4_1,this.inviteFriend.setTransform(116.2,322.8,1,1,0,0,0,-138.4,-31),this.instance_5=new e.finding3_1,this.instance_5.setTransform(215.2,256.4,1,1,0,0,0,-259.9,-67.9),this.instance_6=new e.bg_1,this.instance_6.setTransform(216.1,384.1,1,1,0,0,0,-323.9,-576),this.addChild(this.instance_6,this.instance_5,this.inviteFriend,this.randomEnemy,this.instance_4,this.boyBg,this.girlBg,this.instance_3,this.instance_2,this.backToIndex,this.boyHead,this.girlHead,this.iamcoming,this.instance_1,this.instance,this.dot_1,this.dot_2,this.dot_3,this.boys,this.girls,this.boys_small,this.girls_small)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,432,768),(e.bg=function(){this.initialize(t.bg)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,768),(e.bg1=function(){this.initialize(t.bg1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,83),(e.bg2=function(){this.initialize(t.bg2)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,47),(e.bg3=function(){this.initialize(t.bg3)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,151),(e.bgboy=function(){this.initialize(t.bgboy)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,343,181),(e.bggirl=function(){this.initialize(t.bggirl)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,343,181),(e.boy165l=function(){this.initialize(t.boy165l)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,154,122),(e.boy265r50=function(){this.initialize(t.boy265r50)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,77,62),(e.buttonrechoose=function(){this.initialize(t.buttonrechoose)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,123,42),(e.buttonreturn1=function(){this.initialize(t.buttonreturn1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,156,42),(e.buttonreturn2=function(){this.initialize(t.buttonreturn2)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,123,42),(e.detail=function(){this.initialize(t.detail)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,386,288),(e.finding_1=function(){this.initialize(t.finding_1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,1080,1920),(e.finding_2=function(){this.initialize(t.finding_2)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,768),(e.finding1=function(){this.initialize(t.finding1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,192,40),(e.finding2=function(){this.initialize(t.finding2)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,17,17),(e.finding3=function(){this.initialize(t.finding3)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,346,91),(e.finding4=function(){this.initialize(t.finding4)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,184,42),(e.finding5=function(){this.initialize(t.finding5)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,184,42),(e.finding6=function(){this.initialize(t.finding6)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,280,127),(e.girl165l=function(){this.initialize(t.girl165l)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,125,131),(e.girl265r50=function(){this.initialize(t.girl265r50)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,62,65),(e.talk=function(){this.initialize(t.talk)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,134,50),(e.girl265r50_1=function(){this.initialize(),this.instance=new e.girl265r50,this.addChild(this.instance)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,62,65),(e.boy265r50_1=function(){this.initialize(),this.instance_1=new e.boy265r50,this.addChild(this.instance_1)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,77,62),(e.girl165l_1=function(){this.initialize(),this.instance_2=new e.girl165l,this.addChild(this.instance_2)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,125,131),(e.finding6_1=function(){this.initialize(),this.instance_3=new e.finding6,this.addChild(this.instance_3)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,280,127),(e.finding5_1=function(){this.initialize(),this.instance_4=new e.finding5,this.instance_4.setTransform(-229.9,-52),this.addChild(this.instance_4)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-229.9,-52,184,42),(e.finding4_1=function(){this.initialize(),this.instance_5=new e.finding4,this.instance_5.setTransform(-230.4,-52),this.addChild(this.instance_5)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-230.4,-52,184,42),(e.finding3_1=function(){this.initialize(),this.instance_6=new e.finding3,this.instance_6.setTransform(-432.9,-113.5),this.addChild(this.instance_6)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-432.9,-113.5,346,91),(e.finding2_1=function(){this.initialize(),this.instance_7=new e.finding2,this.instance_7.setTransform(-21.4,-21),this.addChild(this.instance_7)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-21.4,-21,17,17),(e.finding1_1=function(){this.initialize(),this.instance_8=new e.finding1,this.instance_8.setTransform(-239.9,-49.5),this.addChild(this.instance_8)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-239.9,-49.5,192,40),(e.boy=function(){this.initialize(),this.instance_9=new e.boy165l,this.instance_9.setTransform(-192.4,-153),this.addChild(this.instance_9)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-192.4,-153,154,122),(e.talk_1=function(){this.initialize(),this.instance_10=new e.talk,this.instance_10.setTransform(-167.9,213),this.addChild(this.instance_10)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-167.9,213,134,50),(e.detail_1=function(){this.initialize(),this.instance_11=new e.detail,this.instance_11.setTransform(-482.9,-83.5),this.addChild(this.instance_11)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-482.9,-83.5,386,288),(e.buttonreturn1_1=function(){this.initialize(),this.instance_12=new e.buttonreturn1,this.instance_12.setTransform(-195.4,224),this.addChild(this.instance_12)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-195.4,224,156,42),(e.bg2_1=function(){this.initialize(),this.instance_13=new e.bg2,this.instance_13.setTransform(-539.9,217.5),this.addChild(this.instance_13)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-539.9,217.5,432,47),(e.bg1_1=function(){this.initialize(),this.instance_14=new e.bg1,this.instance_14.setTransform(-539.9,172),this.addChild(this.instance_14)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-539.9,172,432,83),(e.bggirl_1=function(){this.initialize(),this.instance_15=new e.bggirl,this.instance_15.setTransform(-428.4,50),this.addChild(this.instance_15)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-428.4,50,343,181),(e.bgboy_1=function(){this.initialize(),this.instance_16=new e.bgboy,this.instance_16.setTransform(-428.4,50),this.addChild(this.instance_16)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-428.4,50,343,181),(e.bg_1=function(){this.initialize(),this.instance_17=new e.bg,this.instance_17.setTransform(-539.9,-960),this.addChild(this.instance_17)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-539.9,-960,432,768),(e.girls_small=function(){this.initialize(),this.instance_18=new e.girl265r50_1,this.instance_18.setTransform(301.4,32.5,.807,.807,0,0,0,31,32.5),this.instance_19=new e.girl265r50_1,this.instance_19.setTransform(166.2,32.5,.806,.806,0,0,0,31,32.5),this.instance_20=new e.girl265r50_1,this.instance_20.setTransform(31,32.5,.806,.806,0,0,0,31,32.5),this.addChild(this.instance_20,this.instance_19,this.instance_18)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(6,6.3,320.4,52.5),(e.girls=function(){this.initialize(),this.instance_21=new e.girl265r50_1,this.instance_21.setTransform(301.4,32.5,1,1,0,0,0,31,32.5),this.instance_22=new e.girl265r50_1,this.instance_22.setTransform(166.2,32.5,1,1,0,0,0,31,32.5),this.instance_23=new e.girl265r50_1,this.instance_23.setTransform(31,32.5,1,1,0,0,0,31,32.5),this.addChild(this.instance_23,this.instance_22,this.instance_21)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,332.4,65),(e.boys_small=function(){this.initialize(),this.instance_24=new e.boy265r50_1,this.instance_24.setTransform(307.8,30.8,.649,.649,0,0,0,38.5,30.9),this.instance_25=new e.boy265r50_1,this.instance_25.setTransform(174.5,30.9,.649,.648,0,0,0,38.5,31),this.instance_26=new e.boy265r50_1,this.instance_26.setTransform(38.1,31,.65,.649,0,0,0,38.5,31.1),this.addChild(this.instance_26,this.instance_25,this.instance_24)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(13.1,10.8,319.8,40.3),(e.boys=function(){this.initialize(),this.instance_27=new e.boy265r50_1,this.instance_27.setTransform(308.9,31,1,1,0,0,0,38.5,31),this.instance_28=new e.boy265r50_1,this.instance_28.setTransform(173.7,31,1,1,0,0,0,38.5,31),this.instance_29=new e.boy265r50_1,this.instance_29.setTransform(38.5,31,1,1,0,0,0,38.5,31),this.addChild(this.instance_29,this.instance_28,this.instance_27)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,347.4,62)}(r=r||{},i=i||{},s=s||{});var r,i,s})(libFinding=libFinding||{},images=images||{},createjs=createjs||{});var libFinding,images,createjs;(function(e,t,n){r=e,i=t,s=n,function(e,t,n){var r;(e.matching=function(){this.initialize(),this.instance=new e.talk_1,this.instance.setTransform(282.2,541.8,1,1,0,0,0,-100.9,238),this.instance_1=new e.talk_1,this.instance_1.setTransform(282.2,246.4,1,1,0,0,0,-100.9,238),this.girlHead=new e.girl265l_1,this.girlHead.setTransform(133.7,237.8,1,1,0,0,0,-93.4,-97.9),this.boyHead=new e.boy,this.boyHead.setTransform(138.7,537.3,1,1,0,0,0,-115.4,-91.9),this.girlBg=new e.bggirl_1,this.girlBg.setTransform(216.1,241.8,1,1,0,0,0,-256.9,140.5),this.boyBg=new e.bgboy_1,this.boyBg.setTransform(216.1,537.2,1,1,0,0,0,-256.9,140.5),this.instance_2=new e.detail_1,this.instance_2.setTransform(216.1,539.7,1,1,0,0,0,-289.9,60.5),this.instance_3=new e.detail_1,this.instance_3.setTransform(216.1,243.5,1,1,0,0,0,-289.9,60.5),this.instance_4=new e.matching1_1,this.instance_4.setTransform(216,39.5,1,1,0,0,0,105,19),this.beginFight=new e.matching2_1,this.beginFight.setTransform(345.5,724.1,1,1,0,0,0,61.5,21),this.backToIndex=new e.buttonreturn2_1,this.backToIndex.setTransform(86.8,724.1,1,1,0,0,0,-91.9,245),this.rechoose=new e.buttonrechoose_1,this.rechoose.setTransform(216.1,724.1,1,1,0,0,0,-91.9,245),this.instance_5=new e.bg2_1,this.instance_5.setTransform(216.1,744.6,1,1,0,0,0,-323.9,241),this.instance_6=new e.bg1_1,this.instance_6.setTransform(216.1,41.6,1,1,0,0,0,-323.9,213.5),this.instance_7=new e.bg_1,this.instance_7.setTransform(216.1,384.1,1,1,0,0,0,-323.9,-576),this.addChild(this.instance_7,this.instance_6,this.instance_5,this.rechoose,this.backToIndex,this.beginFight,this.instance_4,this.instance_3,this.instance_2,this.boyBg,this.girlBg,this.boyHead,this.girlHead,this.instance_1,this.instance)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,432,768),(e.bg=function(){this.initialize(t.bg)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,768),(e.bg1=function(){this.initialize(t.bg1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,83),(e.bg2=function(){this.initialize(t.bg2)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,47),(e.bg3=function(){this.initialize(t.bg3)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,151),(e.bgboy=function(){this.initialize(t.bgboy)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,343,181),(e.bggirl=function(){this.initialize(t.bggirl)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,343,181),(e.boy165l=function(){this.initialize(t.boy165l)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,154,122),(e.buttonrechoose=function(){this.initialize(t.buttonrechoose)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,123,42),(e.buttonreturn1=function(){this.initialize(t.buttonreturn1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,156,42),(e.buttonreturn2=function(){this.initialize(t.buttonreturn2)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,123,42),(e.detail=function(){this.initialize(t.detail)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,386,288),(e.girl265l=function(){this.initialize(t.girl265l)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,125,131),(e.matching_1=function(){this.initialize(t.matching_1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,768),(e.matching1=function(){this.initialize(t.matching1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,210,38),(e.matching2=function(){this.initialize(t.matching2)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,123,42),(e.talk=function(){this.initialize(t.talk)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,134,50),(e.matching2_1=function(){this.initialize(),this.instance=new e.matching2,this.addChild(this.instance)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,123,42),(e.matching1_1=function(){this.initialize(),this.instance_1=new e.matching1,this.addChild(this.instance_1)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,210,38),(e.talk_1=function(){this.initialize(),this.instance_2=new e.talk,this.instance_2.setTransform(-167.9,213),this.addChild(this.instance_2)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-167.9,213,134,50),(e.girl265l_1=function(){this.initialize(),this.instance_3=new e.girl265l,this.instance_3.setTransform(-155.9,-163.5),this.addChild(this.instance_3)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-155.9,-163.5,125,131),(e.detail_1=function(){this.initialize(),this.instance_4=new e.detail,this.instance_4.setTransform(-482.9,-83.5),this.addChild(this.instance_4)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-482.9,-83.5,386,288),(e.buttonreturn2_1=function(){this.initialize(),this.instance_5=new e.buttonreturn2,this.instance_5.setTransform(-153.4,224),this.addChild(this.instance_5)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-153.4,224,123,42),(e.buttonrechoose_1=function(){this.initialize(),this.instance_6=new e.buttonrechoose,this.instance_6.setTransform(-153.4,224),this.addChild(this.instance_6)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-153.4,224,123,42),(e.boy=function(){this.initialize(),this.instance_7=new e.boy165l,this.instance_7.setTransform(-192.4,-153),this.addChild(this.instance_7)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-192.4,-153,154,122),(e.bg2_1=function(){this.initialize(),this.instance_8=new e.bg2,this.instance_8.setTransform(-539.9,217.5),this.addChild(this.instance_8)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-539.9,217.5,432,47),(e.bg1_1=function(){this.initialize(),this.instance_9=new e.bg1,this.instance_9.setTransform(-539.9,172),this.addChild(this.instance_9)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-539.9,172,432,83),(e.bggirl_1=function(){this.initialize(),this.instance_10=new e.bggirl,this.instance_10.setTransform(-428.4,50),this.addChild(this.instance_10)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-428.4,50,343,181),(e.bgboy_1=function(){this.initialize(),this.instance_11=new e.bgboy,this.instance_11.setTransform(-428.4,50),this.addChild(this.instance_11)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-428.4,50,343,181),(e.bg_1=function(){this.initialize(),this.instance_12=new e.bg,this.instance_12.setTransform(-539.9,-960),this.addChild(this.instance_12)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-539.9,-960,432,768)}(r=r||{},i=i||{},s=s||{});var r,i,s})(libMatching=libMatching||{},images=images||{},createjs=createjs||{});var libMatching,images,createjs;(function(e,t,n){r=e,i=t,s=n,function(e,t,n){var r;(e.conclusionfor1=function(){this.initialize(),this.x_s=new e.conclusionfor1numberx_1,this.x_s.setTransform(324.8,516.1,.459,.481,0,0,0,-18.4,-36.4),this.num_9=new e.conclusionfor1number9_1,this.num_9.setTransform(309.3,516,.521,.521,0,0,0,-30.9,-36.5),this.num_8=new e.conclusionfor1number8_1,this.num_8.setTransform(289.5,516,.521,.521,0,0,0,-30.9,-36.5),this.num_7=new e.conclusionfor1number7_1,this.num_7.setTransform(269.2,516,.521,.521,0,0,0,-30.9,-35.4),this.num_6=new e.conclusionfor1number6_1,this.num_6.setTransform(248.9,516,.521,.521,0,0,0,-30.8,-36.5),this.num_5=new e.conclusionfor1number5_1,this.num_5.setTransform(227.5,516,.521,.521,0,0,0,-30.9,-35.9),this.num_4=new e.conclusionfor1number4_1,this.num_4.setTransform(205.4,516,.521,.521,0,0,0,-32.4,-35.4),this.num_1=new e.conclusionfor1number1_1,this.num_1.setTransform(185,516,.521,.521,0,0,0,-23.4,-35.9),this.num_0=new e.conclusionfor1number0_1,this.num_0.setTransform(165.9,516,.521,.521,0,0,0,7.9,10.5),this.num_3=new e.conclusionfor1number3_1,this.num_3.setTransform(298.5,398.6,1,1,0,0,0,-30.9,-36.5),this.num_2=new e.conclusionfor1number2_1,this.num_2.setTransform(258.1,398.6,1,1,0,0,0,-30.9,-36),this.backToIndex=new e.buttonreturn1_1,this.backToIndex.setTransform(216.1,723.3,1,1,0,0,0,-117.4,245),this.instance=new e.bg2_1,this.instance.setTransform(216.1,744.6,1,1,0,0,0,-323.9,241),this.continueFight=new e.conclusionfor15_1,this.continueFight.setTransform(213.6,587.2,1,1,0,0,0,-214.9,-40.5),this.instance_1=new e.conclusionfor13_1,this.instance_1.setTransform(360,24.4,.48,.48,0,0,0,-37.4,-37),this.instance_2=new e.conclusionfor13_1,this.instance_2.setTransform(335.1,49.4,1,1,0,0,0,-37.4,-37),this.finishText=new e.conclusionfor12_1,this.finishText.setTransform(217.7,142,1,1,0,0,0,-177.9,-108),this.instance_3=new e.conclusionfor11_1,this.instance_3.setTransform(214,140.5,1,1,0,0,0,-224.4,-141),this.instance_4=new e.bg3_1,this.instance_4.setTransform(216.1,75.6,1,1,0,0,0,-323.9,163),this.instance_5=new e.conclusionfor14_1,this.instance_5.setTransform(216.1,457.5,1,1,0,0,0,-288.9,-311),this.instance_6=new e.bg_1,this.instance_6.setTransform(216,384,1,1,0,0,0,216,384),this.addChild(this.instance_6,this.instance_5,this.instance_4,this.instance_3,this.finishText,this.instance_2,this.instance_1,this.continueFight,this.instance,this.backToIndex,this.num_2,this.num_3,this.num_0,this.num_1,this.num_4,this.num_5,this.num_6,this.num_7,this.num_8,this.num_9,this.x_s)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,432,768),(e.bg=function(){this.initialize(t.bg)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,768),(e.bg1=function(){this.initialize(t.bg1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,83),(e.bg2=function(){this.initialize(t.bg2)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,47),(e.bg3=function(){this.initialize(t.bg3)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,151),(e.bgboy=function(){this.initialize(t.bgboy)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,343,181),(e.bggirl=function(){this.initialize(t.bggirl)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,343,181),(e.buttonrechoose=function(){this.initialize(t.buttonrechoose)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,123,42),(e.buttonreturn1=function(){this.initialize(t.buttonreturn1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,156,42),(e.buttonreturn2=function(){this.initialize(t.buttonreturn2)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,123,42),(e.conclusionfor1_1=function(){this.initialize(t.conclusionfor1_1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,768),(e.conclusionfor11=function(){this.initialize(t.conclusionfor11)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,299,188),(e.conclusionfor12=function(){this.initialize(t.conclusionfor12)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,237,145),(e.conclusionfor13=function(){this.initialize(t.conclusionfor13)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,50,50),(e.conclusionfor14=function(){this.initialize(t.conclusionfor14)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,386,416),(e.conclusionfor15=function(){this.initialize(t.conclusionfor15)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,287,54),(e.conclusionfor1number0=function(){this.initialize(t.conclusionfor1number0)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,41,50),(e.conclusionfor1number1=function(){this.initialize(t.conclusionfor1number1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,32,49),(e.conclusionfor1number2=function(){this.initialize(t.conclusionfor1number2)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,41,49),(e.conclusionfor1number3=function(){this.initialize(t.conclusionfor1number3)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,41,50),(e.conclusionfor1number4=function(){this.initialize(t.conclusionfor1number4)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,44,48),(e.conclusionfor1number5=function(){this.initialize(t.conclusionfor1number5)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,41,49),(e.conclusionfor1number6=function(){this.initialize(t.conclusionfor1number6)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,41,50),(e.conclusionfor1number7=function(){this.initialize(t.conclusionfor1number7)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,41,48),(e.conclusionfor1number8=function(){this.initialize(t.conclusionfor1number8)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,41,50),(e.conclusionfor1number9=function(){this.initialize(t.conclusionfor1number9)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,41,50),(e.conclusionfor1numberx=function(){this.initialize(t.conclusionfor1numberx)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,25,50),(e.detail=function(){this.initialize(t.detail)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,386,288),(e.talk=function(){this.initialize(t.talk)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,134,50),(e.conclusionfor1number9_1=function(){this.initialize(),this.instance=new e.conclusionfor1number9,this.instance.setTransform(-51.4,-61.5),this.addChild(this.instance)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-51.4,-61.5,41,50),(e.conclusionfor1number8_1=function(){this.initialize(),this.instance_1=new e.conclusionfor1number8,this.instance_1.setTransform(-51.4,-61.5),this.addChild(this.instance_1)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-51.4,-61.5,41,50),(e.conclusionfor1number7_1=function(){this.initialize(),this.instance_2=new e.conclusionfor1number7,this.instance_2.setTransform(-51.4,-59.5),this.addChild(this.instance_2)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-51.4,-59.5,41,48),(e.conclusionfor1number6_1=function(){this.initialize(),this.instance_3=new e.conclusionfor1number6,this.instance_3.setTransform(-51.4,-61.5),this.addChild(this.instance_3)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-51.4,-61.5,41,50),(e.conclusionfor1number5_1=function(){this.initialize(),this.instance_4=new e.conclusionfor1number5,this.instance_4.setTransform(-51.4,-60.5),this.addChild(this.instance_4)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-51.4,-60.5,41,49),(e.conclusionfor1number4_1=function(){this.initialize(),this.instance_5=new e.conclusionfor1number4,this.instance_5.setTransform(-54.4,-59.5),this.addChild(this.instance_5)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-54.4,-59.5,44,48),(e.conclusionfor1number3_1=function(){this.initialize(),this.instance_6=new e.conclusionfor1number3,this.instance_6.setTransform(-51.4,-61.5),this.addChild(this.instance_6)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-51.4,-61.5,41,50),(e.conclusionfor1number2_1=function(){this.initialize(),this.instance_7=new e.conclusionfor1number2,this.instance_7.setTransform(-51.4,-60.5),this.addChild(this.instance_7)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-51.4,-60.5,41,49),(e.conclusionfor1number1_1=function(){this.initialize(),this.instance_8=new e.conclusionfor1number1,this.instance_8.setTransform(-39.4,-60.5),this.addChild(this.instance_8)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-39.4,-60.5,32,49),(e.conclusionfor1number0_1=function(){this.initialize(),this.instance_9=new e.conclusionfor1number0,this.instance_9.setTransform(-12.4,-14.5),this.addChild(this.instance_9)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-12.4,-14.5,41,50),(e.conclusionfor1numberx_1=function(){this.initialize(),this.instance_10=new e.conclusionfor1numberx,this.instance_10.setTransform(-30.9,-61.5),this.addChild(this.instance_10)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-30.9,-61.5,25,50),(e.conclusionfor15_1=function(){this.initialize(),this.instance_11=new e.conclusionfor15,this.instance_11.setTransform(-358.4,-67.5),this.addChild(this.instance_11)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-358.4,-67.5,287,54),(e.conclusionfor14_1=function(){this.initialize(),this.instance_12=new e.conclusionfor14,this.instance_12.setTransform(-481.9,-519),this.addChild(this.instance_12)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-481.9,-519,386,416),(e.conclusionfor13_1=function(){this.initialize(),this.instance_13=new e.conclusionfor13,this.instance_13.setTransform(-62.4,-62),this.addChild(this.instance_13)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-62.4,-62,50,50),(e.conclusionfor12_1=function(){this.initialize(),this.instance_14=new e.conclusionfor12,this.instance_14.setTransform(-296.4,-180.5),this.addChild(this.instance_14)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-296.4,-180.5,237,145),(e.conclusionfor11_1=function(){this.initialize(),this.instance_15=new e.conclusionfor11,this.instance_15.setTransform(-373.9,-235),this.addChild(this.instance_15)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-373.9,-235,299,188),(e.buttonreturn1_1=function(){this.initialize(),this.instance_16=new e.buttonreturn1,this.instance_16.setTransform(-195.4,224),this.addChild(this.instance_16)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-195.4,224,156,42),(e.bg3_1=function(){this.initialize(),this.instance_17=new e.bg3,this.instance_17.setTransform(-539.9,87.5),this.addChild(this.instance_17)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-539.9,87.5,432,151),(e.bg2_1=function(){this.initialize(),this.instance_18=new e.bg2,this.instance_18.setTransform(-539.9,217.5),this.addChild(this.instance_18)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-539.9,217.5,432,47),(e.bg_1=function(){this.initialize(),this.instance_19=new e.bg,this.addChild(this.instance_19)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,432,768)}(r=r||{},i=i||{},s=s||{});var r,i,s})(libSingleConclusion=libSingleConclusion||{},images=images||{},createjs=createjs||{});var libSingleConclusion,images,createjs;(function(e,t,n){r=e,i=t,s=n,function(e,t,n){var r;(e.conclusionfor2=function(){this.initialize(),this.addFriendBtn=new e.conclusion2_1,this.addFriendBtn.setTransform(52.5,333.4,1,1,0,0,0,48.5,26.5),this.loseText=new e.conclusion4_1,this.loseText.setTransform(309.5,563.1,1,1,0,0,0,90,63),this.winText=new e.conclusion3_1,this.winText.setTransform(309.5,264.4,1,1,0,0,0,90.5,68),this.boyHead=new e.boy,this.boyHead.setTransform(137.5,535.7,1,1,0,0,0,-115.4,-91.9),this.girlHead=new e.girl265l_1,this.girlHead.setTransform(132.4,239.4,1,1,0,0,0,62.5,65.5),this.instance=new e.talk_1,this.instance.setTransform(281.6,482.6,1,1,0,0,0,-100.9,238),this.instance_1=new e.talk_1,this.instance_1.setTransform(281.6,186.5,1,1,0,0,0,-100.9,238),this.rechoose=new e.buttonrechoose_1,this.rechoose.setTransform(216.1,721.8,1,1,0,0,0,-91.9,245),this.continueFight=new e.conclusion5_1,this.continueFight.setTransform(345.4,721.7,1,1,0,0,0,61,21),this.backToIndex=new e.buttonreturn2_1,this.backToIndex.setTransform(86.1,721.8,1,1,0,0,0,-91.9,245),this.instance_2=new e.bg2_1,this.instance_2.setTransform(216.1,744.6,1,1,0,0,0,-323.9,241),this.instance_3=new e.conclusion1_1,this.instance_3.setTransform(216,39.6,1,1,0,0,0,111,19.5),this.instance_4=new e.bg1_1,this.instance_4.setTransform(216.1,41.6,1,1,0,0,0,-323.9,213.5),this.girlBg=new e.bggirl_1,this.girlBg.setTransform(216.1,240.5,1,1,0,0,0,-256.9,140.5),this.boyBg=new e.bgboy_1,this.boyBg.setTransform(216.1,537.1,1,1,0,0,0,-256.9,140.5),this.instance_5=new e.detail_1,this.instance_5.setTransform(216.1,540.2,1,1,0,0,0,-289.9,60.5),this.instance_6=new e.detail_1,this.instance_6.setTransform(216.1,245.2,1,1,0,0,0,-289.9,60.5),this.instance_7=new e.bg_1,this.instance_7.setTransform(216.1,384.1,1,1,0,0,0,-323.9,-576),this.addChild(this.instance_7,this.instance_6,this.instance_5,this.boyBg,this.girlBg,this.instance_4,this.instance_3,this.instance_2,this.backToIndex,this.continueFight,this.rechoose,this.instance_1,this.instance,this.girlHead,this.boyHead,this.winText,this.loseText,this.addFriendBtn)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,432,768),(e.bg=function(){this.initialize(t.bg)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,768),(e.bg1=function(){this.initialize(t.bg1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,83),(e.bg2=function(){this.initialize(t.bg2)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,47),(e.bg3=function(){this.initialize(t.bg3)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,151),(e.bgboy=function(){this.initialize(t.bgboy)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,343,181),(e.bggirl=function(){this.initialize(t.bggirl)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,343,181),(e.boy165l=function(){this.initialize(t.boy165l)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,154,122),(e.buttonrechoose=function(){this.initialize(t.buttonrechoose)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,123,42),(e.buttonreturn1=function(){this.initialize(t.buttonreturn1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,156,42),(e.buttonreturn2=function(){this.initialize(t.buttonreturn2)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,123,42),(e.conclusion1=function(){this.initialize(t.conclusion1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,222,39),(e.conclusion2=function(){this.initialize(t.conclusion2)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,97,53),(e.conclusion3=function(){this.initialize(t.conclusion3)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,181,136),(e.conclusion4=function(){this.initialize(t.conclusion4)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,180,126),(e.conclusion5=function(){this.initialize(t.conclusion5)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,122,42),(e.conclusionfor2_1=function(){this.initialize(t.conclusionfor2_1)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,432,768),(e.detail=function(){this.initialize(t.detail)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,386,288),(e.girl265l=function(){this.initialize(t.girl265l)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,125,131),(e.talk=function(){this.initialize(t.talk)}).prototype=new n.Bitmap,r.nominalBounds=new n.Rectangle(0,0,134,50),(e.conclusion5_1=function(){this.initialize(),this.instance=new e.conclusion5,this.addChild(this.instance)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,122,42),(e.conclusion4_1=function(){this.initialize(),this.instance_1=new e.conclusion4,this.addChild(this.instance_1)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,180,126),(e.conclusion3_1=function(){this.initialize(),this.instance_2=new e.conclusion3,this.addChild(this.instance_2)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,181,136),(e.conclusion2_1=function(){this.initialize(),this.instance_3=new e.conclusion2,this.addChild(this.instance_3)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,97,53),(e.conclusion1_1=function(){this.initialize(),this.instance_4=new e.conclusion1,this.addChild(this.instance_4)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,222,39),(e.talk_1=function(){this.initialize(),this.instance_5=new e.talk,this.instance_5.setTransform(-167.9,213),this.addChild(this.instance_5)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-167.9,213,134,50),(e.girl265l_1=function(){this.initialize(),this.instance_6=new e.girl265l,this.addChild(this.instance_6)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(0,0,125,131),(e.detail_1=function(){this.initialize(),this.instance_7=new e.detail,this.instance_7.setTransform(-482.9,-83.5),this.addChild(this.instance_7)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-482.9,-83.5,386,288),(e.buttonreturn2_1=function(){this.initialize(),this.instance_8=new e.buttonreturn2,this.instance_8.setTransform(-153.4,224),this.addChild(this.instance_8)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-153.4,224,123,42),(e.buttonrechoose_1=function(){this.initialize(),this.instance_9=new e.buttonrechoose,this.instance_9.setTransform(-153.4,224),this.addChild(this.instance_9)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-153.4,224,123,42),(e.boy=function(){this.initialize(),this.instance_10=new e.boy165l,this.instance_10.setTransform(-192.4,-153),this.addChild(this.instance_10)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-192.4,-153,154,122),(e.bg2_1=function(){this.initialize(),this.instance_11=new e.bg2,this.instance_11.setTransform(-539.9,217.5),this.addChild(this.instance_11)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-539.9,217.5,432,47),(e.bg1_1=function(){this.initialize(),this.instance_12=new e.bg1,this.instance_12.setTransform(-539.9,172),this.addChild(this.instance_12)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-539.9,172,432,83),(e.bggirl_1=function(){this.initialize(),this.instance_13=new e.bggirl,this.instance_13.setTransform(-428.4,50),this.addChild(this.instance_13)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-428.4,50,343,181),(e.bgboy_1=function(){this.initialize(),this.instance_14=new e.bgboy,this.instance_14.setTransform(-428.4,50),this.addChild(this.instance_14)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-428.4,50,343,181),(e.bg_1=function(){this.initialize(),this.instance_15=new e.bg,this.instance_15.setTransform(-539.9,-960),this.addChild(this.instance_15)}).prototype=r=new n.Container,r.nominalBounds=new n.Rectangle(-539.9,-960,432,768)}(r=r||{},i=i||{},s=s||{});var r,i,s})(libBattleConclusion=libBattleConclusion||{},images=images||{},createjs=createjs||{});var libBattleConclusion,images,createjs;var Assets=function(){};Assets.__name__=["zx","foodies","Assets"],Assets.loader=function(){return Assets._loader==null&&(Assets._loader=new createjs.PreloadJS,Assets._loader.initialize(!0),Assets._loader.onFileLoad=Assets.handleFileLoaded,Assets._loader.onFileError=Assets.handleLoadError,Assets._loader.setMaxConnections(10)),Assets._loader},Assets.loadAndCall=function(e,t){Assets.loader().loadFile(e),Assets._loadCallbacks[e]=t},Assets.loadAll=function(){Assets._useLocalStorage&&Assets.loadFromLocalStorage(manifest),manifest.length==0&&Assets.onLoadAll!=null&&Assets.onLoadAll(),Assets.loader().onProgress=Assets.handleProgress,Assets.loader().onFileLoad=Assets.manifestFileLoad,Assets.loader().onFileError=Assets.onErrorHandler,Assets.loader().loadManifest(manifest),Assets.loader().load()},Assets.manifestFileLoad=function(e){e.type=="image"?(images[e.id]=e.result,(e.id=="users"||e.id=="othImages")&&Assets.getImageWithCanvas(e.id)):console.log("type error "+e.type);if(Assets._useLocalStorage&&e!=null){var t=new ddjsutils;try{var n=e.src;if(HxOverrides.substr(n,n.length-3,null)=="jpg")return;Persistence.setValue(e.src,t.getBase64Image(e.result))}catch(r){}}},Assets.loadFromLocalStorage=function(e){var t=new Array,n=0,r=e.length;while(n<r){var i=n++,s=e[i],o=Persistence.getValue(s);if(o!=null){var u=new createjs.Bitmap("data:image/png;base64,"+o);Assets._cacheData[s]=u.image,t.push(e[i])}}var n=0,r=t.length;while(n<r){var a=n++;HxOverrides.remove(e,t[a])}},Assets.handleProgress=function(e){Assets.loaded=e.loaded,e.loaded==e.total&&(Assets.loader().onProgress=null,Assets.onLoadAll())},Assets.handleLoadError=function(e){console.log("load error")},Assets.onErrorHandler=function(){console.log("error")},Assets.handleFileLoaded=function(e){if(e!=null){Assets._cacheData[e.src]=e.result;var t=Reflect.field(Assets._loadCallbacks,e.src);t!=null&&t()}},Assets.getAsset=function(e){var t=Reflect.field(Assets._cacheData,e);return t==null&&Assets.loader().getResult(e)!=null&&(t=Assets.loader().getResult(e).result,Assets._cacheData[e]=t),t},Assets.getRawImage=function(e){var t=Assets.getAsset(e);if(t==null){var n=new createjs.Bitmap(e);Assets._cacheData[e]=n.image,t=n.image,null}return t},Assets.getImage=function(e,t){t==null&&(t=!1);var n=new createjs.Bitmap(Assets.getRawImage(e));return n.mouseEnabled=t,n},Assets.getImageWithCanvas=function(e){if(images[e]){var t=document.createElement("canvas"),n=t.getContext("2d"),r=imagesData[e];for(var i=0,s=r.length;i<s;i++){t.width=0,t.width=r[i].frame.w,t.height=r[i].frame.h,n.drawImage(images[e],r[i].frame.x,r[i].frame.y,r[i].frame.w,r[i].frame.h,0,0,r[i].frame.w,r[i].frame.h);var o=new Image;o.src=t.toDataURL(),images[r[i].filename]=o}}},Assets.prototype={__class__:Assets};var DataLoader=function(){};DataLoader.__name__=["zx","foodies","DataLoader"],DataLoader.getPowerupByName=function(e){var t=null,n=new GameplayDB,r=n.getAllPowerups(),i=0,s=r.length;while(i<s){var o=i++,u=r[o];if(u.name==e){t=u;break}}return t},DataLoader.getPowerById=function(e){var t=null,n=new GameplayDB,r=n.getAllPowerups(),i=0,s=r.length;while(i<s){var o=i++,u=r[o];if((u.id|0)==e){t=u;break}}return t},DataLoader.getAvailablePowerups=function(e){var t=new GameplayDB,n=t.getAllPowerups();return n},DataLoader.getAvailPassivePowerupIds=function(){var e=DataLoader.getAvailablePowerups(),t=new Array;return e.map(function(e){t.push(e.id)}),t},DataLoader.prototype={__class__:DataLoader};var Load=Load||function(e){this._waitingToStart=!1,this._orientError=null,this.callback=e,this._stage=new createjs.Stage(js.Lib.document.getElementById("stageCanvas")),viewporter.ACTIVE?(viewporter.preventPageScroll=!0,viewporter.change($bind(this,this.handleViewportChanged)),viewporter.isLandscape()?Assets.loadAndCall("images/orientation_error.png",$bind(this,this.waitForPortrait)):Assets.loadAndCall("images/orientation_error.png",$bind(this,this.loadBarFill))):Assets.loadAndCall("images/orientation_error.png",$bind(this,this.loadBarFill)),createjs.Ticker.setFPS(60),createjs.Ticker.addListener(this._stage)};Load.prototype={loadBarFill:function(){Assets.loadAndCall("images/loading_fill.png",$bind(this,this.loadBarStroke))},loadBarStroke:function(){Assets.loadAndCall("images/loading_stroke.png",$bind(this,this.showSplash))},showSplash:function(){viewporter.ACTIVE?js.Lib.document.body.bgColor="#ffe829":js.Lib.document.body.bgColor="#ffe829",this._loadingStroke=Assets.getImage("images/loading_stroke.png"),this._loadingStroke.regX=this._loadingStroke.image.width/2,this._stage.addChildAt(this._loadingStroke,0),this._loadingBar=Assets.getImage("images/loading_fill.png"),this._loadingBar.regX=this._loadingBar.image.width/2,this._stage.addChildAt(this._loadingBar,1),this._loadingBar.x=js.Lib.window.innerWidth/2,this._loadingBar.y=310,this._loadingStroke.x=this._loadingBar.x,this._loadingStroke.y=this._loadingBar.y,this._loadingBar.visible=!1,this.updateLoading(),this._stage.canvas.width=js.Lib.window.innerWidth,this._stage.canvas.height=js.Lib.window.innerHeight;if(cookie.get("FOODIESID")){var e=this;P_Socket.connect(function(){console.log("socket connect success"),e.handleDoneLoading()}),Assets.onLoadAll=function(){console.log("wait for socket connect success")}}else Assets.onLoadAll=$bind(this,this.handleDoneLoading);Assets.loadAll(),document.addEventListener("mozvisibilitychange",this.exitFocus)},handleDoneLoading:function(){this._stage.removeChild(this._loadingBar),this._stage.removeChild(this._loadingStroke),this.splashEnded()},splashEnded:function(){createjs.Ticker.removeListener(this._stage),this.callback?this.callback():""},updateLoading:function(){if(Assets.loaded!=1){Assets.loaded=Assets.loaded<.95?Assets.loaded:.95,this._loadingBar.visible=!0;var e=Assets.loaded,t=new createjs.Shape;t.graphics.beginFill("#00000000"),t.graphics.drawRect(this._loadingBar.x-this._loadingBar.image.width/2,this._loadingBar.y,this._loadingBar.image.width*e|0,this._loadingBar.image.height),t.graphics.endFill(),this._loadingBar.mask=t,zx_foodies.Utils.waitAndCall(this,10,$bind(this,this.updateLoading))}},exitFocus:function(){var e=document.mozHidden},waitForPortrait:function(){this._waitingToStart=!0,this._orientError=Assets.getImage("images/orientation_error.png"),this._orientError.regX=this._orientError.image.width/2,this._orientError.regY=this._orientError.image.height/2,this._orientError.x=js.Lib.window.innerWidth/2,this._orientError.y=js.Lib.window.innerHeight/2,this._stage.addChildAt(this._orientError,Game._stage.getNumChildren())},handleViewportChanged:function(){viewporter.isLandscape()?this._orientError==null&&(this._orientError=zx_foodies.Assets.getImage("images/orientation_error.png"),this._orientError.regX=this._orientError.image.width/2,this._orientError.regY=this._orientError.image.height/2,this._orientError.x=zx_foodies.Game._viewport.height/2,this._orientError.y=zx_foodies.Game._viewport.width/2,zx_foodies.Game._stage.addChildAt(this._orientError,zx_foodies.Game._stage.getNumChildren()),zx_foodies.Game._stage.update(),this._session.pause()):this._orientError!=null&&(zx_foodies.Game._stage.removeChild(this._orientError),this._orientError=null,createjs.Ticker.getPaused()&&zx_foodies.Game._stage.update(),this._waitingToStart&&(this._waitingToStart=!1,zx_foodies.Assets.loadAndCall("images/splash_logo.png",$bind(this,this.showSplash))))}};var zx_foodies=zx_foodies||{};function $extend(e,t){function n(){}n.prototype=e;var r=new n;for(var i in t)r[i]=t[i];return r}function $iterator(e){return e instanceof Array?function(){return HxOverrides.iter(e)}:typeof e.iterator=="function"?$bind(e,e.iterator):e.iterator}function $bind(e,t){var n=function(){return n.method.apply(n.scope,arguments)};return n.scope=e,n.method=t,n}var $hxClasses=$hxClasses||{},$estr=function(){return js.Boot.__string_rec(this,"")},EReg=$hxClasses.EReg=function(e,t){t=t.split("u").join(""),this.r=new RegExp(e,t)};EReg.__name__=["EReg"],EReg.prototype={customReplace:function(e,t){var n=new StringBuf;for(;;){if(!this.match(e))break;n.b+=Std.string(this.matchedLeft()),n.b+=Std.string(t(this)),e=this.matchedRight()}return n.b+=Std.string(e),n.b},replace:function(e,t){return e.replace(this.r,t)},split:function(e){var t="#__delim__#";return e.replace(this.r,t).split(t)},matchedPos:function(){if(this.r.m==null)throw"No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},matchedRight:function(){if(this.r.m==null)throw"No string matched";var e=this.r.m.index+this.r.m[0].length;return this.r.s.substr(e,this.r.s.length-e)},matchedLeft:function(){if(this.r.m==null)throw"No string matched";return this.r.s.substr(0,this.r.m.index)},matched:function(e){return this.r.m!=null&&e>=0&&e<this.r.m.length?this.r.m[e]:function(e){var t;throw"EReg::matched"}(this)},match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,this.r.m!=null},r:null,__class__:EReg};var Hash=$hxClasses.Hash=function(){this.h={}};Hash.__name__=["Hash"],Hash.prototype={toString:function(){var e=new StringBuf;e.b+=Std.string("{");var t=this.keys();while(t.hasNext()){var n=t.next();e.b+=Std.string(n),e.b+=Std.string(" => "),e.b+=Std.string(Std.string(this.get(n))),t.hasNext()&&(e.b+=Std.string(", "))}return e.b+=Std.string("}"),e.b},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref["$"+e]}}},keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(t.substr(1));return HxOverrides.iter(e)},remove:function(e){return e="$"+e,this.h.hasOwnProperty(e)?(delete this.h[e],!0):!1},exists:function(e){return this.h.hasOwnProperty("$"+e)},get:function(e){return this.h["$"+e]},set:function(e,t){this.h["$"+e]=t},h:null,__class__:Hash};var HxOverrides=$hxClasses.HxOverrides=function(){};HxOverrides.__name__=["HxOverrides"],HxOverrides.dateStr=function(e){var t=e.getMonth()+1,n=e.getDate(),r=e.getHours(),i=e.getMinutes(),s=e.getSeconds();return e.getFullYear()+"-"+(t<10?"0"+t:""+t)+"-"+(n<10?"0"+n:""+n)+" "+(r<10?"0"+r:""+r)+":"+(i<10?"0"+i:""+i)+":"+(s<10?"0"+s:""+s)},HxOverrides.strDate=function(e){switch(e.length){case 8:var t=e.split(":"),n=new Date;return n.setTime(0),n.setUTCHours(t[0]),n.setUTCMinutes(t[1]),n.setUTCSeconds(t[2]),n;case 10:var t=e.split("-");return new Date(t[0],t[1]-1,t[2],0,0,0);case 19:var t=e.split(" "),r=t[0].split("-"),i=t[1].split(":");return new Date(r[0],r[1]-1,r[2],i[0],i[1],i[2]);default:throw"Invalid date format : "+e}},HxOverrides.cca=function(e,t){var n=e.charCodeAt(t);return n!=n?undefined:n},HxOverrides.substr=function(e,t,n){return t!=null&&t!=0&&n!=null&&n<0?"":(n==null&&(n=e.length),t<0?(t=e.length+t,t<0&&(t=0)):n<0&&(n=e.length+n-t),e.substr(t,n))},HxOverrides.remove=function(e,t){var n=0,r=e.length;while(n<r){if(e[n]==t)return e.splice(n,1),!0;n++}return!1},HxOverrides.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var IntHash=$hxClasses.IntHash=function(){this.h={}};IntHash.__name__=["IntHash"],IntHash.prototype={toString:function(){var e=new StringBuf;e.b+=Std.string("{");var t=this.keys();while(t.hasNext()){var n=t.next();e.b+=Std.string(n),e.b+=Std.string(" => "),e.b+=Std.string(Std.string(this.get(n))),t.hasNext()&&(e.b+=Std.string(", "))}return e.b+=Std.string("}"),e.b},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref[e]}}},keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(t|0);return HxOverrides.iter(e)},remove:function(e){return this.h.hasOwnProperty(e)?(delete this.h[e],!0):!1},exists:function(e){return this.h.hasOwnProperty(e)},get:function(e){return this.h[e]},set:function(e,t){this.h[e]=t},h:null,__class__:IntHash};var IntIter=$hxClasses.IntIter=function(e,t){this.min=e,this.max=t};IntIter.__name__=["IntIter"],IntIter.prototype={next:function(){return this.min++},hasNext:function(){return this.min<this.max},max:null,min:null,__class__:IntIter};var Lambda=$hxClasses.Lambda=function(){};Lambda.__name__=["Lambda"],Lambda.array=function(e){var t=new Array,n=$iterator(e)();while(n.hasNext()){var r=n.next();t.push(r)}return t},Lambda.list=function(e){var t=new List,n=$iterator(e)();while(n.hasNext()){var r=n.next();t.add(r)}return t},Lambda.map=function(e,t){var n=new List,r=$iterator(e)();while(r.hasNext()){var i=r.next();n.add(t(i))}return n},Lambda.mapi=function(e,t){var n=new List,r=0,i=$iterator(e)();while(i.hasNext()){var s=i.next();n.add(t(r++,s))}return n},Lambda.has=function(e,t,n){if(n==null){var r=$iterator(e)();while(r.hasNext()){var i=r.next();if(i==t)return!0}}else{var s=$iterator(e)();while(s.hasNext()){var i=s.next();if(n(i,t))return!0}}return!1},Lambda.exists=function(e,t){var n=$iterator(e)();while(n.hasNext()){var r=n.next();if(t(r))return!0}return!1},Lambda.foreach=function(e,t){var n=$iterator(e)();while(n.hasNext()){var r=n.next();if(!t(r))return!1}return!0},Lambda.iter=function(e,t){var n=$iterator(e)();while(n.hasNext()){var r=n.next();t(r)}},Lambda.filter=function(e,t){var n=new List,r=$iterator(e)();while(r.hasNext()){var i=r.next();t(i)&&n.add(i)}return n},Lambda.fold=function(e,t,n){var r=$iterator(e)();while(r.hasNext()){var i=r.next();n=t(i,n)}return n},Lambda.count=function(e,t){var n=0;if(t==null){var r=$iterator(e)();while(r.hasNext()){var i=r.next();n++}}else{var s=$iterator(e)();while(s.hasNext()){var o=s.next();t(o)&&n++}}return n},Lambda.empty=function(e){return!$iterator(e)().hasNext()},Lambda.indexOf=function(e,t){var n=0,r=$iterator(e)();while(r.hasNext()){var i=r.next();if(t==i)return n;n++}return-1},Lambda.concat=function(e,t){var n=new List,r=$iterator(e)();while(r.hasNext()){var i=r.next();n.add(i)}var s=$iterator(t)();while(s.hasNext()){var i=s.next();n.add(i)}return n};var List=$hxClasses.List=function(){this.length=0};List.__name__=["List"],List.prototype={map:function(e){var t=new List,n=this.h;while(n!=null){var r=n[0];n=n[1],t.add(e(r))}return t},filter:function(e){var t=new List,n=this.h;while(n!=null){var r=n[0];n=n[1],e(r)&&t.add(r)}return t},join:function(e){var t=new StringBuf,n=!0,r=this.h;while(r!=null)n?n=!1:t.b+=Std.string(e),t.b+=Std.string(r[0]),r=r[1];return t.b},toString:function(){var e=new StringBuf,t=!0,n=this.h;e.b+=Std.string("{");while(n!=null)t?t=!1:e.b+=Std.string(", "),e.b+=Std.string(Std.string(n[0])),n=n[1];return e.b+=Std.string("}"),e.b},iterator:function(){return{h:this.h,hasNext:function(){return this.h!=null},next:function(){if(this.h==null)return null;var e=this.h[0];return this.h=this.h[1],e}}},remove:function(e){var t=null,n=this.h;while(n!=null){if(n[0]==e)return t==null?this.h=n[1]:t[1]=n[1],this.q==n&&(this.q=t),this.length--,!0;t=n,n=n[1]}return!1},clear:function(){this.h=null,this.q=null,this.length=0},isEmpty:function(){return this.h==null},pop:function(){if(this.h==null)return null;var e=this.h[0];return this.h=this.h[1],this.h==null&&(this.q=null),this.length--,e},last:function(){return this.q==null?null:this.q[0]},first:function(){return this.h==null?null:this.h[0]},push:function(e){var t=[e,this.h];this.h=t,this.q==null&&(this.q=t),this.length++},add:function(e){var t=[e];this.h==null?this.h=t:this.q[1]=t,this.q=t,this.length++},length:null,q:null,h:null,__class__:List};var Reflect=$hxClasses.Reflect=function(){};Reflect.__name__=["Reflect"],Reflect.hasField=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Reflect.field=function(e,t){var n=null;try{n=e[t]}catch(r){}return n},Reflect.setField=function(e,t,n){e[t]=n},Reflect.getProperty=function(e,t){var n;return e==null?null:e.__properties__&&(n=e.__properties__["get_"+t])?e[n]():e[t]},Reflect.setProperty=function(e,t,n){var r;e.__properties__&&(r=e.__properties__["set_"+t])?e[r](n):e[t]=n},Reflect.callMethod=function(e,t,n){return t.apply(e,n)},Reflect.fields=function(e){var t=[];if(e!=null){var n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r)}return t},Reflect.isFunction=function(e){return typeof e=="function"&&!e.__name__&&!e.__ename__},Reflect.compare=function(e,t){return e==t?0:e>t?1:-1},Reflect.compareMethods=function(e,t){return e==t?!0:!Reflect.isFunction(e)||!Reflect.isFunction(t)?!1:e.scope==t.scope&&e.method==t.method&&e.method!=null},Reflect.isObject=function(e){if(e==null)return!1;var t=typeof e;return t=="string"||t=="object"&&!e.__enum__||t=="function"&&(e.__name__||e.__ename__)},Reflect.deleteField=function(e,t){return Reflect.hasField(e,t)?(delete e[t],!0):!1},Reflect.copy=function(e){var t={},n=0,r=Reflect.fields(e);while(n<r.length){var i=r[n];++n,t[i]=Reflect.field(e,i)}return t},Reflect.makeVarArgs=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e(t)}};var Std=$hxClasses.Std=function(){};Std.__name__=["Std"],Std.is=function(e,t){return js.Boot.__instanceof(e,t)},Std.string=function(e){return js.Boot.__string_rec(e,"")},Std["int"]=function(e){return e|0},Std.parseInt=function(e){var t=parseInt(e,10);return t==0&&(HxOverrides.cca(e,1)==120||HxOverrides.cca(e,1)==88)&&(t=parseInt(e)),isNaN(t)?null:t},Std.parseFloat=function(e){return parseFloat(e)},Std.random=function(e){return Math.floor(Math.random()*e)};var StringBuf=$hxClasses.StringBuf=function(){this.b=""};StringBuf.__name__=["StringBuf"],StringBuf.prototype={toString:function(){return this.b},addSub:function(e,t,n){this.b+=HxOverrides.substr(e,t,n)},addChar:function(e){this.b+=String.fromCharCode(e)},add:function(e){this.b+=Std.string(e)},b:null,__class__:StringBuf};var StringTools=$hxClasses.StringTools=function(){};StringTools.__name__=["StringTools"],StringTools.urlEncode=function(e){return encodeURIComponent(e)},StringTools.urlDecode=function(e){return decodeURIComponent(e.split("+").join(" "))},StringTools.htmlEscape=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")},StringTools.htmlUnescape=function(e){return e.split("&gt;").join(">").split("&lt;").join("<").split("&amp;").join("&")},StringTools.startsWith=function(e,t){return e.length>=t.length&&HxOverrides.substr(e,0,t.length)==t},StringTools.endsWith=function(e,t){var n=t.length,r=e.length;return r>=n&&HxOverrides.substr(e,r-n,n)==t},StringTools.isSpace=function(e,t){var n=HxOverrides.cca(e,t);return n>=9&&n<=13||n==32},StringTools.ltrim=function(e){var t=e.length,n=0;while(n<t&&StringTools.isSpace(e,n))n++;return n>0?HxOverrides.substr(e,n,t-n):e},StringTools.rtrim=function(e){var t=e.length,n=0;while(n<t&&StringTools.isSpace(e,t-n-1))n++;return n>0?HxOverrides.substr(e,0,t-n):e},StringTools.trim=function(e){return StringTools.ltrim(StringTools.rtrim(e))},StringTools.rpad=function(e,t,n){var r=e.length,i=t.length;while(r<n)n-r<i?(e+=HxOverrides.substr(t,0,n-r),r=n):(e+=t,r+=i);return e},StringTools.lpad=function(e,t,n){var r="",i=e.length;if(i>=n)return e;var s=t.length;while(i<n)n-i<s?(r+=HxOverrides.substr(t,0,n-i),i=n):(r+=t,i+=s);return r+e},StringTools.replace=function(e,t,n){return e.split(t).join(n)},StringTools.hex=function(e,t){var n="",r="0123456789ABCDEF";do n=r.charAt(e&15)+n,e>>>=4;while(e>0);if(t!=null)while(n.length<t)n="0"+n;return n},StringTools.fastCodeAt=function(e,t){return e.charCodeAt(t)},StringTools.isEOF=function(e){return e!=e};var ValueType=$hxClasses.ValueType={__ename__:["ValueType"],__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]};ValueType.TNull=["TNull",0],ValueType.TNull.toString=$estr,ValueType.TNull.__enum__=ValueType,ValueType.TInt=["TInt",1],ValueType.TInt.toString=$estr,ValueType.TInt.__enum__=ValueType,ValueType.TFloat=["TFloat",2],ValueType.TFloat.toString=$estr,ValueType.TFloat.__enum__=ValueType,ValueType.TBool=["TBool",3],ValueType.TBool.toString=$estr,ValueType.TBool.__enum__=ValueType,ValueType.TObject=["TObject",4],ValueType.TObject.toString=$estr,ValueType.TObject.__enum__=ValueType,ValueType.TFunction=["TFunction",5],ValueType.TFunction.toString=$estr,ValueType.TFunction.__enum__=ValueType,ValueType.TClass=function(e){var t=["TClass",6,e];return t.__enum__=ValueType,t.toString=$estr,t},ValueType.TEnum=function(e){var t=["TEnum",7,e];return t.__enum__=ValueType,t.toString=$estr,t},ValueType.TUnknown=["TUnknown",8],ValueType.TUnknown.toString=$estr,ValueType.TUnknown.__enum__=ValueType;var Type=$hxClasses.Type=function(){};Type.__name__=["Type"],Type.getClass=function(e){return e==null?null:e.__class__},Type.getEnum=function(e){return e==null?null:e.__enum__},Type.getSuperClass=function(e){return e.__super__},Type.getClassName=function(e){var t=e.__name__;return t.join(".")},Type.getEnumName=function(e){var t=e.__ename__;return t.join(".")},Type.resolveClass=function(e){var t=$hxClasses[e];return t==null||!t.__name__?null:t},Type.resolveEnum=function(e){var t=$hxClasses[e];return t==null||!t.__ename__?null:t},Type.createInstance=function(e,t){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);case 8:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]);default:throw"Too many arguments"}return null},Type.createEmptyInstance=function(e){function t(){}return t.prototype=e.prototype,new t},Type.createEnum=function(e,t,n){var r=Reflect.field(e,t);if(r==null)throw"No such constructor "+t;if(Reflect.isFunction(r)){if(n==null)throw"Constructor "+t+" need parameters";return r.apply(e,n)}if(n!=null&&n.length!=0)throw"Constructor "+t+" does not need parameters";return r},Type.createEnumIndex=function(e,t,n){var r=e.__constructs__[t];if(r==null)throw t+" is not a valid enum constructor index";return Type.createEnum(e,r,n)},Type.getInstanceFields=function(e){var t=[];for(var n in e.prototype)t.push(n);return HxOverrides.remove(t,"__class__"),HxOverrides.remove(t,"__properties__"),t},Type.getClassFields=function(e){var t=Reflect.fields(e);return HxOverrides.remove(t,"__name__"),HxOverrides.remove(t,"__interfaces__"),HxOverrides.remove(t,"__properties__"),HxOverrides.remove(t,"__super__"),HxOverrides.remove(t,"prototype"),t},Type.getEnumConstructs=function(e){var t=e.__constructs__;return t.slice()},Type["typeof"]=function(e){switch(typeof e){case"boolean":return ValueType.TBool;case"string":return ValueType.TClass(String);case"number":if(Math.ceil(e)==e%2147483648)return ValueType.TInt;return ValueType.TFloat;case"object":if(e==null)return ValueType.TNull;var t=e.__enum__;if(t!=null)return ValueType.TEnum(t);var n=e.__class__;if(n!=null)return ValueType.TClass(n);return ValueType.TObject;case"function":if(e.__name__||e.__ename__)return ValueType.TObject;return ValueType.TFunction;case"undefined":return ValueType.TNull;default:return ValueType.TUnknown}},Type.enumEq=function(e,t){if(e==t)return!0;try{if(e[0]!=t[0])return!1;var n=2,r=e.length;while(n<r){var i=n++;if(!Type.enumEq(e[i],t[i]))return!1}var s=e.__enum__;if(s!=t.__enum__||s==null)return!1}catch(s){return!1}return!0},Type.enumConstructor=function(e){return e[0]},Type.enumParameters=function(e){return e.slice(2)},Type.enumIndex=function(e){return e[1]},Type.allEnums=function(e){var t=[],n=e.__constructs__,r=0;while(r<n.length){var i=n[r];++r;var s=Reflect.field(e,i);Reflect.isFunction(s)||t.push(s)}return t};var haxe=haxe||{};haxe.Int32=$hxClasses["haxe.Int32"]=function(){},haxe.Int32.__name__=["haxe","Int32"],haxe.Int32.make=function(e,t){return e<<16|t},haxe.Int32.ofInt=function(e){return e|0},haxe.Int32.clamp=function(e){return e|0},haxe.Int32.toInt=function(e){if((e>>30&1)!=e>>>31)throw"Overflow "+Std.string(e);return e},haxe.Int32.toNativeInt=function(e){return e},haxe.Int32.add=function(e,t){return e+t|0},haxe.Int32.sub=function(e,t){return e-t|0},haxe.Int32.mul=function(e,t){return e*(t&65535)+(e*(t>>>16)<<16|0)|0},haxe.Int32.div=function(e,t){return e/t|0},haxe.Int32.mod=function(e,t){return e%t},haxe.Int32.shl=function(e,t){return e<<t},haxe.Int32.shr=function(e,t){return e>>t},haxe.Int32.ushr=function(e,t){return e>>>t},haxe.Int32.and=function(e,t){return e&t},haxe.Int32.or=function(e,t){return e|t},haxe.Int32.xor=function(e,t){return e^t},haxe.Int32.neg=function(e){return-e},haxe.Int32.isNeg=function(e){return e<0},haxe.Int32.isZero=function(e){return e==0},haxe.Int32.complement=function(e){return~e},haxe.Int32.compare=function(e,t){return e-t},haxe.Int32.ucompare=function(e,t){return e<0?t<0?~t-~e:1:t<0?-1:e-t},haxe.Log=$hxClasses["haxe.Log"]=function(){},haxe.Log.__name__=["haxe","Log"],haxe.Log.trace=function(e,t){js.Boot.__trace(e,t)},haxe.Log.clear=function(){js.Boot.__clear_trace()},haxe.Public=$hxClasses["haxe.Public"]=function(){},haxe.Public.__name__=["haxe","Public"],haxe.Serializer=$hxClasses["haxe.Serializer"]=function(){this.buf=new StringBuf,this.cache=new Array,this.useCache=haxe.Serializer.USE_CACHE,this.useEnumIndex=haxe.Serializer.USE_ENUM_INDEX,this.shash=new Hash,this.scount=0},haxe.Serializer.__name__=["haxe","Serializer"],haxe.Serializer.run=function(e){var t=new haxe.Serializer;return t.serialize(e),t.toString()},haxe.Serializer.prototype={serializeException:function(e){this.buf.b+=Std.string("x"),this.serialize(e)},serialize:function(e){var t=Type["typeof"](e);switch(t[1]){case 0:this.buf.b+=Std.string("n");break;case 1:if(e==0){this.buf.b+=Std.string("z");return}this.buf.b+=Std.string("i"),this.buf.b+=Std.string(e);break;case 2:Math.isNaN(e)?this.buf.b+=Std.string("k"):Math.isFinite(e)?(this.buf.b+=Std.string("d"),this.buf.b+=Std.string(e)):this.buf.b+=Std.string(e<0?"m":"p");break;case 3:this.buf.b+=Std.string(e?"t":"f");break;case 6:var n=t[2];if(n==String){this.serializeString(e);return}if(this.useCache&&this.serializeRef(e))return;switch(n){case Array:var r=0;this.buf.b+=Std.string("a");var i=e.length,s=0;while(s<i){var o=s++;e[o]==null?r++:(r>0&&(r==1?this.buf.b+=Std.string("n"):(this.buf.b+=Std.string("u"),this.buf.b+=Std.string(r)),r=0),this.serialize(e[o]))}r>0&&(r==1?this.buf.b+=Std.string("n"):(this.buf.b+=Std.string("u"),this.buf.b+=Std.string(r))),this.buf.b+=Std.string("h");break;case List:this.buf.b+=Std.string("l");var u=e,a=u.iterator();while(a.hasNext()){var o=a.next();this.serialize(o)}this.buf.b+=Std.string("h");break;case Date:var f=e;this.buf.b+=Std.string("v"),this.buf.b+=Std.string(HxOverrides.dateStr(f));break;case Hash:this.buf.b+=Std.string("b");var u=e,l=u.keys();while(l.hasNext()){var c=l.next();this.serializeString(c),this.serialize(u.get(c))}this.buf.b+=Std.string("h");break;case IntHash:this.buf.b+=Std.string("q");var u=e,h=u.keys();while(h.hasNext()){var c=h.next();this.buf.b+=Std.string(":"),this.buf.b+=Std.string(c),this.serialize(u.get(c))}this.buf.b+=Std.string("h");break;case haxe.io.Bytes:var u=e,o=0,p=u.length-2,d=new StringBuf,v=haxe.Serializer.BASE64;while(o<p){var m=u.b[o++],g=u.b[o++],y=u.b[o++];d.b+=Std.string(v.charAt(m>>2)),d.b+=Std.string(v.charAt((m<<4|g>>4)&63)),d.b+=Std.string(v.charAt((g<<2|y>>6)&63)),d.b+=Std.string(v.charAt(y&63))}if(o==p){var m=u.b[o++],g=u.b[o++];d.b+=Std.string(v.charAt(m>>2)),d.b+=Std.string(v.charAt((m<<4|g>>4)&63)),d.b+=Std.string(v.charAt(g<<2&63))}else if(o==p+1){var m=u.b[o++];d.b+=Std.string(v.charAt(m>>2)),d.b+=Std.string(v.charAt(m<<4&63))}var b=d.b;this.buf.b+=Std.string("s"),this.buf.b+=Std.string(b.length),this.buf.b+=Std.string(":"),this.buf.b+=Std.string(b);break;default:this.cache.pop(),e.hxSerialize!=null?(this.buf.b+=Std.string("C"),this.serializeString(Type.getClassName(n)),this.cache.push(e),e.hxSerialize(this),this.buf.b+=Std.string("g")):(this.buf.b+=Std.string("c"),this.serializeString(Type.getClassName(n)),this.cache.push(e),this.serializeFields(e))}break;case 4:if(this.useCache&&this.serializeRef(e))return;this.buf.b+=Std.string("o"),this.serializeFields(e);break;case 7:var w=t[2];if(this.useCache&&this.serializeRef(e))return;this.cache.pop(),this.buf.b+=Std.string(this.useEnumIndex?"j":"w"),this.serializeString(Type.getEnumName(w)),this.useEnumIndex?(this.buf.b+=Std.string(":"),this.buf.b+=Std.string(e[1])):this.serializeString(e[0]),this.buf.b+=Std.string(":");var i=e.length;this.buf.b+=Std.string(i-2);var s=2;while(s<i){var o=s++;this.serialize(e[o])}this.cache.push(e);break;case 5:throw"Cannot serialize function";default:throw"Cannot serialize "+Std.string(e)}},serializeFields:function(e){var t=0,n=Reflect.fields(e);while(t<n.length){var r=n[t];++t,this.serializeString(r),this.serialize(Reflect.field(e,r))}this.buf.b+=Std.string("g")},serializeRef:function(e){var t=typeof e,n=0,r=this.cache.length;while(n<r){var i=n++,s=this.cache[i];if(typeof s==t&&s==e)return this.buf.b+=Std.string("r"),this.buf.b+=Std.string(i),!0}return this.cache.push(e),!1},serializeString:function(e){var t=this.shash.get(e);if(t!=null){this.buf.b+=Std.string("R"),this.buf.b+=Std.string(t);return}this.shash.set(e,this.scount++),this.buf.b+=Std.string("y"),e=StringTools.urlEncode(e),this.buf.b+=Std.string(e.length),this.buf.b+=Std.string(":"),this.buf.b+=Std.string(e)},toString:function(){return this.buf.b},useEnumIndex:null,useCache:null,scount:null,shash:null,cache:null,buf:null,__class__:haxe.Serializer},haxe.StackItem=$hxClasses["haxe.StackItem"]={__ename__:["haxe","StackItem"],__constructs__:["CFunction","Module","FilePos","Method","Lambda"]},haxe.StackItem.CFunction=["CFunction",0],haxe.StackItem.CFunction.toString=$estr,haxe.StackItem.CFunction.__enum__=haxe.StackItem,haxe.StackItem.Module=function(e){var t=["Module",1,e];return t.__enum__=haxe.StackItem,t.toString=$estr,t},haxe.StackItem.FilePos=function(e,t,n){var r=["FilePos",2,e,t,n];return r.__enum__=haxe.StackItem,r.toString=$estr,r},haxe.StackItem.Method=function(e,t){var n=["Method",3,e,t];return n.__enum__=haxe.StackItem,n.toString=$estr,n},haxe.StackItem.Lambda=function(e){var t=["Lambda",4,e];return t.__enum__=haxe.StackItem,t.toString=$estr,t},haxe.Stack=$hxClasses["haxe.Stack"]=function(){},haxe.Stack.__name__=["haxe","Stack"],haxe.Stack.callStack=function(){var e=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){var n=[],r=0;while(r<t.length){var i=t[r];++r;var s=null,o=i.getFunctionName();if(o!=null){var u=o.lastIndexOf(".");if(u>=0){var a=HxOverrides.substr(o,0,u),f=HxOverrides.substr(o,u+1,null);s=haxe.StackItem.Method(a,f)}}n.push(haxe.StackItem.FilePos(s,i.getFileName(),i.getLineNumber()))}return n};var t=haxe.Stack.makeStack((new Error).stack);return t.shift(),Error.prepareStackTrace=e,t},haxe.Stack.exceptionStack=function(){return[]},haxe.Stack.toString=function(e){var t=new StringBuf,n=0;while(n<e.length){var r=e[n];++n,t.b+=Std.string("\nCalled from "),haxe.Stack.itemToString(t,r)}return t.b},haxe.Stack.itemToString=function(e,t){var n=t;switch(n[1]){case 0:e.b+=Std.string("a C function");break;case 1:var r=n[2];e.b+=Std.string("module "),e.b+=Std.string(r);break;case 2:var i=n[4],s=n[3],o=n[2];o!=null&&(haxe.Stack.itemToString(e,o),e.b+=Std.string(" (")),e.b+=Std.string(s),e.b+=Std.string(" line "),e.b+=Std.string(i),o!=null&&(e.b+=Std.string(")"));break;case 3:var u=n[3],a=n[2];e.b+=Std.string(a),e.b+=Std.string("."),e.b+=Std.string(u);break;case 4:var f=n[2];e.b+=Std.string("local function #"),e.b+=Std.string(f)}},haxe.Stack.makeStack=function(e){if(typeof e=="string"){var t=e.split("\n"),n=[],r=0;while(r<t.length){var i=t[r];++r,n.push(haxe.StackItem.Module(i))}return n}return e},haxe.io||(haxe.io={}),haxe.io.Bytes=$hxClasses["haxe.io.Bytes"]=function(e,t){this.length=e,this.b=t},haxe.io.Bytes.__name__=["haxe","io","Bytes"],haxe.io.Bytes.alloc=function(e){var t=new Array,n=0;while(n<e){var r=n++;t.push(0)}return new haxe.io.Bytes(e,t)},haxe.io.Bytes.ofString=function(e){var t=new Array,n=0,r=e.length;while(n<r){var i=n++,s=e.charCodeAt(i);s<=127?t.push(s):s<=2047?(t.push(192|s>>6),t.push(128|s&63)):s<=65535?(t.push(224|s>>12),t.push(128|s>>6&63),t.push(128|s&63)):(t.push(240|s>>18),t.push(128|s>>12&63),t.push(128|s>>6&63),t.push(128|s&63))}return new haxe.io.Bytes(t.length,t)},haxe.io.Bytes.ofData=function(e){return new haxe.io.Bytes(e.length,e)},haxe.io.Bytes.prototype={getData:function(){return this.b},toHex:function(){var e=new StringBuf,t=[],n="0123456789abcdef",r=0,i=n.length;while(r<i){var s=r++;t.push(HxOverrides.cca(n,s))}var r=0,i=this.length;while(r<i){var s=r++,o=this.b[s];e.b+=String.fromCharCode(t[o>>4]),e.b+=String.fromCharCode(t[o&15])}return e.b},toString:function(){return this.readString(0,this.length)},readString:function(e,t){if(e<0||t<0||e+t>this.length)throw haxe.io.Error.OutsideBounds;var n="",r=this.b,i=String.fromCharCode,s=e,o=e+t;while(s<o){var u=r[s++];if(u<128){if(u==0)break;n+=i(u)}else if(u<224)n+=i((u&63)<<6|r[s++]&127);else if(u<240){var a=r[s++];n+=i((u&31)<<12|(a&127)<<6|r[s++]&127)}else{var a=r[s++],f=r[s++];n+=i((u&15)<<18|(a&127)<<12|f<<6&127|r[s++]&127)}}return n},compare:function(e){var t=this.b,n=e.b,r=this.length<e.length?this.length:e.length,i=0;while(i<r){var s=i++;if(t[s]!=n[s])return t[s]-n[s]}return this.length-e.length},sub:function(e,t){if(e<0||t<0||e+t>this.length)throw haxe.io.Error.OutsideBounds;return new haxe.io.Bytes(t,this.b.slice(e,e+t))},blit:function(e,t,n,r){if(e<0||n<0||r<0||e+r>this.length||n+r>t.length)throw haxe.io.Error.OutsideBounds;var i=this.b,s=t.b;if(i==s&&e>n){var o=r;while(o>0)o--,i[o+e]=s[o+n];return}var u=0;while(u<r){var o=u++;i[o+e]=s[o+n]}},set:function(e,t){this.b[e]=t&255},get:function(e){return this.b[e]},b:null,length:null,__class__:haxe.io.Bytes},haxe.io.BytesBuffer=$hxClasses["haxe.io.BytesBuffer"]=function(){this.b=new Array},haxe.io.BytesBuffer.__name__=["haxe","io","BytesBuffer"],haxe.io.BytesBuffer.prototype={getBytes:function(){var e=new haxe.io.Bytes(this.b.length,this.b);return this.b=null,e},addBytes:function(e,t,n){if(t<0||n<0||t+n>e.length)throw haxe.io.Error.OutsideBounds;var r=this.b,i=e.b,s=t,o=t+n;while(s<o){var u=s++;this.b.push(i[u])}},add:function(e){var t=this.b,n=e.b,r=0,i=e.length;while(r<i){var s=r++;this.b.push(n[s])}},addByte:function(e){this.b.push(e)},b:null,__class__:haxe.io.BytesBuffer},haxe.io.Input=$hxClasses["haxe.io.Input"]=function(){},haxe.io.Input.__name__=["haxe","io","Input"],haxe.io.Input.prototype={getDoubleSig:function(e){return Std.parseInt((((e[1]&15)<<16|e[2]<<8|e[3])*Math.pow(2,32)).toString())+Std.parseInt(((e[4]>>7)*Math.pow(2,31)).toString())+Std.parseInt(((e[4]&127)<<24|e[5]<<16|e[6]<<8|e[7]).toString())},readString:function(e){var t=haxe.io.Bytes.alloc(e);return this.readFullBytes(t,0,e),t.toString()},readInt32:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte();return this.bigEndian?(e<<8|t)<<16|(n<<8|r):(r<<8|n)<<16|(t<<8|e)},readUInt30:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte();if((this.bigEndian?e:r)>=64)throw haxe.io.Error.Overflow;return this.bigEndian?r|n<<8|t<<16|e<<24:e|t<<8|n<<16|r<<24},readInt31:function(){var e,t,n,r;this.bigEndian?(r=this.readByte(),n=this.readByte(),t=this.readByte(),e=this.readByte()):(e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte());if((r&128)==0!=((r&64)==0))throw haxe.io.Error.Overflow;return e|t<<8|n<<16|r<<24},readUInt24:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte();return this.bigEndian?n|t<<8|e<<16:e|t<<8|n<<16},readInt24:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.bigEndian?n|t<<8|e<<16:e|t<<8|n<<16;return(r&8388608)!=0?r-16777216:r},readUInt16:function(){var e=this.readByte(),t=this.readByte();return this.bigEndian?t|e<<8:e|t<<8},readInt16:function(){var e=this.readByte(),t=this.readByte(),n=this.bigEndian?t|e<<8:e|t<<8;return(n&32768)!=0?n-65536:n},readInt8:function(){var e=this.readByte();return e>=128?e-256:e},readDouble:function(){var e=[];e.push(this.readByte()),e.push(this.readByte()),e.push(this.readByte()),e.push(this.readByte()),e.push(this.readByte()),e.push(this.readByte()),e.push(this.readByte()),e.push(this.readByte()),this.bigEndian&&e.reverse();var t=1-(e[0]>>7<<1),n=(e[0]<<4&2047|e[1]>>4)-1023,r=this.getDoubleSig(e);return r==0&&n==-1023?0:t*(1+Math.pow(2,-52)*r)*Math.pow(2,n)},readFloat:function(){var e=[];e.push(this.readByte()),e.push(this.readByte()),e.push(this.readByte()),e.push(this.readByte()),this.bigEndian&&e.reverse();var t=1-(e[0]>>7<<1),n=(e[0]<<1&255|e[1]>>7)-127,r=(e[1]&127)<<16|e[2]<<8|e[3];return r==0&&n==-127?0:t*(1+Math.pow(2,-23)*r)*Math.pow(2,n)},readLine:function(){var e=new StringBuf,t,n;try{while((t=this.readByte())!=10)e.b+=String.fromCharCode(t);n=e.b,HxOverrides.cca(n,n.length-1)==13&&(n=HxOverrides.substr(n,0,-1))}catch(r){if(!js.Boot.__instanceof(r,haxe.io.Eof))throw r;n=e.b;if(n.length==0)throw r}return n},readUntil:function(e){var t=new StringBuf,n;while((n=this.readByte())!=e)t.b+=String.fromCharCode(n);return t.b},read:function(e){var t=haxe.io.Bytes.alloc(e),n=0;while(e>0){var r=this.readBytes(t,n,e);if(r==0)throw haxe.io.Error.Blocked;n+=r,e-=r}return t},readFullBytes:function(e,t,n){while(n>0){var r=this.readBytes(e,t,n);t+=r,n-=r}},readAll:function(e){e==null&&(e=16384);var t=haxe.io.Bytes.alloc(e),n=new haxe.io.BytesBuffer;try{for(;;){var r=this.readBytes(t,0,e);if(r==0)throw haxe.io.Error.Blocked;n.addBytes(t,0,r)}}catch(i){if(!js.Boot.__instanceof(i,haxe.io.Eof))throw i}return n.getBytes()},setEndian:function(e){return this.bigEndian=e,e},close:function(){},readBytes:function(e,t,n){var r=n,i=e.b;if(t<0||n<0||t+n>e.length)throw haxe.io.Error.OutsideBounds;while(r>0)i[t]=this.readByte(),t++,r--;return n},readByte:function(){return function(e){var t;throw"Not implemented"}(this)},bigEndian:null,__class__:haxe.io.Input,__properties__:{set_bigEndian:"setEndian"}},haxe.io.BytesInput=$hxClasses["haxe.io.BytesInput"]=function(e,t,n){t==null&&(t=0),n==null&&(n=e.length-t);if(t<0||n<0||t+n>e.length)throw haxe.io.Error.OutsideBounds;this.b=e.b,this.pos=t,this.len=n},haxe.io.BytesInput.__name__=["haxe","io","BytesInput"],haxe.io.BytesInput.__super__=haxe.io.Input,haxe.io.BytesInput.prototype=$extend(haxe.io.Input.prototype,{readBytes:function(e,t,n){if(t<0||n<0||t+n>e.length)throw haxe.io.Error.OutsideBounds;if(this.len==0&&n>0)throw new haxe.io.Eof;this.len<n&&(n=this.len);var r=this.b,i=e.b,s=0;while(s<n){var o=s++;i[t+o]=r[this.pos+o]}return this.pos+=n,this.len-=n,n},readByte:function(){if(this.len==0)throw new haxe.io.Eof;return this.len--,this.b[this.pos++]},len:null,pos:null,b:null,__class__:haxe.io.BytesInput}),haxe.io.Eof=$hxClasses["haxe.io.Eof"]=function(){},haxe.io.Eof.__name__=["haxe","io","Eof"],haxe.io.Eof.prototype={toString:function(){return"Eof"},__class__:haxe.io.Eof},haxe.io.Error=$hxClasses["haxe.io.Error"]={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]},haxe.io.Error.Blocked=["Blocked",0],haxe.io.Error.Blocked.toString=$estr,haxe.io.Error.Blocked.__enum__=haxe.io.Error,haxe.io.Error.Overflow=["Overflow",1],haxe.io.Error.Overflow.toString=$estr,haxe.io.Error.Overflow.__enum__=haxe.io.Error,haxe.io.Error.OutsideBounds=["OutsideBounds",2],haxe.io.Error.OutsideBounds.toString=$estr,haxe.io.Error.OutsideBounds.__enum__=haxe.io.Error,haxe.io.Error.Custom=function(e){var t=["Custom",3,e];return t.__enum__=haxe.io.Error,t.toString=$estr,t},haxe.remoting||(haxe.remoting={}),haxe.remoting.FlashJsConnection=$hxClasses["haxe.remoting.FlashJsConnection"]=function(){},haxe.remoting.FlashJsConnection.__name__=["haxe","remoting","FlashJsConnection"],haxe.remoting.FlashJsConnection.flashCall=function(e,t,n,r){try{var i=window.document[e];i==null&&(i=window.document.getElementById[e]);if(i==null)throw"Could not find flash object '"+e+"'";var s=null;try{s=i.flashJsRemotingCall(t,n,r)}catch(o){}if(s==null)throw"Flash object "+e+" does not have an active FlashJsConnection";return s}catch(o){var u=new haxe.Serializer;return u.serializeException(o),u.toString()}},haxe.unit||(haxe.unit={}),haxe.unit.TestCase=$hxClasses["haxe.unit.TestCase"]=function(){},haxe.unit.TestCase.__name__=["haxe","unit","TestCase"],haxe.unit.TestCase.__interfaces__=[haxe.Public],haxe.unit.TestCase.prototype={assertEquals:function(e,t,n){this.currentTest.done=!0;if(t!=e)throw this.currentTest.success=!1,this.currentTest.error="expected '"+Std.string(e)+"' but was '"+Std.string(t)+"'",this.currentTest.posInfos=n,this.currentTest},assertFalse:function(e,t){this.currentTest.done=!0;if(e==1)throw this.currentTest.success=!1,this.currentTest.error="expected false but was true",this.currentTest.posInfos=t,this.currentTest},assertTrue:function(e,t){this.currentTest.done=!0;if(e==0)throw this.currentTest.success=!1,this.currentTest.error="expected true but was false",this.currentTest.posInfos=t,this.currentTest},print:function(e){haxe.unit.TestRunner.print(e)},tearDown:function(){},setup:function(){},currentTest:null,__class__:haxe.unit.TestCase},haxe.unit.TestResult=$hxClasses["haxe.unit.TestResult"]=function(){this.m_tests=new List,this.success=!0},haxe.unit.TestResult.__name__=["haxe","unit","TestResult"],haxe.unit.TestResult.prototype={toString:function(){var e=new StringBuf,t=0,n=this.m_tests.iterator();while(n.hasNext()){var r=n.next();r.success==0&&(e.b+=Std.string("* "),e.b+=Std.string(r.classname),e.b+=Std.string("::"),e.b+=Std.string(r.method),e.b+=Std.string("()"),e.b+=Std.string("\n"),e.b+=Std.string("ERR: "),r.posInfos!=null&&(e.b+=Std.string(r.posInfos.fileName),e.b+=Std.string(":"),e.b+=Std.string(r.posInfos.lineNumber),e.b+=Std.string("("),e.b+=Std.string(r.posInfos.className),e.b+=Std.string("."),e.b+=Std.string(r.posInfos.methodName),e.b+=Std.string(") - ")),e.b+=Std.string(r.error),e.b+=Std.string("\n"),r.backtrace!=null&&(e.b+=Std.string(r.backtrace),e.b+=Std.string("\n")),e.b+=Std.string("\n"),t++)}return e.b+=Std.string("\n"),t==0?e.b+=Std.string("OK "):e.b+=Std.string("FAILED "),e.b+=Std.string(this.m_tests.length),e.b+=Std.string(" tests, "),e.b+=Std.string(t),e.b+=Std.string(" failed, "),e.b+=Std.string(this.m_tests.length-t),e.b+=Std.string(" success"),e.b+=Std.string("\n"),e.b},add:function(e){this.m_tests.add(e),e.success||(this.success=!1)},success:null,m_tests:null,__class__:haxe.unit.TestResult},haxe.unit.TestRunner=$hxClasses["haxe.unit.TestRunner"]=function(){this.result=new haxe.unit.TestResult,this.cases=new List},haxe.unit.TestRunner.__name__=["haxe","unit","TestRunner"],haxe.unit.TestRunner.print=function(e){var t=StringTools.htmlEscape(js.Boot.__string_rec(e,"")).split("\n").join("<br/>"),n=document.getElementById("haxe:trace");n==null?alert("haxe:trace element not found"):n.innerHTML+=t},haxe.unit.TestRunner.customTrace=function(e,t){haxe.unit.TestRunner.print(t.fileName+":"+t.lineNumber+": "+Std.string(e)+"\n")},haxe.unit.TestRunner.prototype={runCase:function(e){var t=haxe.Log.trace;haxe.Log.trace=haxe.unit.TestRunner.customTrace;var n=Type.getClass(e),r=Type.getInstanceFields(n);haxe.unit.TestRunner.print("Class: "+Type.getClassName(n)+" ");var i=0;while(i<r.length){var s=r[i];++i;var o=s,u=Reflect.field(e,s);if(StringTools.startsWith(o,"test")&&Reflect.isFunction(u)){e.currentTest=new haxe.unit.TestStatus,e.currentTest.classname=Type.getClassName(n),e.currentTest.method=o,e.setup();try{u.apply(e,new Array),e.currentTest.done?(e.currentTest.success=!0,haxe.unit.TestRunner.print(".")):(e.currentTest.success=!1,e.currentTest.error="(warning) no assert",haxe.unit.TestRunner.print("W"))}catch(a){if(js.Boot.__instanceof(a,haxe.unit.TestStatus)){var f=a;haxe.unit.TestRunner.print("F"),e.currentTest.backtrace=haxe.Stack.toString(haxe.Stack.exceptionStack())}else{var f=a;haxe.unit.TestRunner.print("E"),f.message!=null?e.currentTest.error="exception thrown : "+Std.string(f)+" ["+Std.string(f.message)+"]":e.currentTest.error="exception thrown : "+Std.string(f),e.currentTest.backtrace=haxe.Stack.toString(haxe.Stack.exceptionStack())}}this.result.add(e.currentTest),e.tearDown()}}haxe.unit.TestRunner.print("\n"),haxe.Log.trace=t},run:function(){this.result=new haxe.unit.TestResult;var e=this.cases.iterator();while(e.hasNext()){var t=e.next();this.runCase(t)}return haxe.unit.TestRunner.print(this.result.toString()),this.result.success},add:function(e){this.cases.add(e)},cases:null,result:null,__class__:haxe.unit.TestRunner},haxe.unit.TestStatus=$hxClasses["haxe.unit.TestStatus"]=function(){this.done=!1,this.success=!1},haxe.unit.TestStatus.__name__=["haxe","unit","TestStatus"],haxe.unit.TestStatus.prototype={backtrace:null,posInfos:null,classname:null,method:null,error:null,success:null,done:null,__class__:haxe.unit.TestStatus};var js=js||{};js.Boot=$hxClasses["js.Boot"]=function(){},js.Boot.__name__=["js","Boot"],js.Boot.__unhtml=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")},js.Boot.__trace=function(e,t){var n=t!=null?t.fileName+":"+t.lineNumber+": ":"";n+=js.Boot.__string_rec(e,"");var r;typeof document!="undefined"&&(r=document.getElementById("haxe:trace"))!=null?r.innerHTML+=js.Boot.__unhtml(n)+"<br/>":typeof console!="undefined"&&console.log!=null&&console.log(n)},js.Boot.__clear_trace=function(){var e=document.getElementById("haxe:trace");e!=null&&(e.innerHTML="")},js.Boot.isClass=function(e){return e.__name__},js.Boot.isEnum=function(e){return e.__ename__},js.Boot.getClass=function(e){return e.__class__},js.Boot.__string_rec=function(e,t){if(e==null)return"null";if(t.length>=5)return"<...>";var n=typeof e;n=="function"&&(e.__name__||e.__ename__)&&(n="object");switch(n){case"object":if(e instanceof Array){if(e.__enum__){if(e.length==2)return e[0];var r=e[0]+"(";t+="	";var i=2,s=e.length;while(i<s){var o=i++;o!=2?r+=","+js.Boot.__string_rec(e[o],t):r+=js.Boot.__string_rec(e[o],t)}return r+")"}var u=e.length,o,r="[";t+="	";var s=0;while(s<u){var a=s++;r+=(a>0?",":"")+js.Boot.__string_rec(e[a],t)}return r+="]",r}var f;try{f=e.toString}catch(l){return"???"}if(f!=null&&f!=Object.toString){var c=e.toString();if(c!="[object Object]")return c}var h=null,r="{\n";t+="	";var p=e.hasOwnProperty!=null;for(var h in e){if(p&&!e.hasOwnProperty(h))continue;if(h=="prototype"||h=="__class__"||h=="__super__"||h=="__interfaces__"||h=="__properties__")continue;r.length!=2&&(r+=", \n"),r+=t+h+" : "+js.Boot.__string_rec(e[h],t)}return t=t.substring(1),r+="\n"+t+"}",r;case"function":return"<function>";case"string":return e;default:return String(e)}},js.Boot.__interfLoop=function(e,t){if(e==null)return!1;if(e==t)return!0;var n=e.__interfaces__;if(n!=null){var r=0,i=n.length;while(r<i){var s=r++,o=n[s];if(o==t||js.Boot.__interfLoop(o,t))return!0}}return js.Boot.__interfLoop(e.__super__,t)},js.Boot.__instanceof=function(e,t){try{if(e instanceof t)return t==Array?e.__enum__==null:!0;if(js.Boot.__interfLoop(e.__class__,t))return!0}catch(n){if(t==null)return!1}switch(t){case Int:return Math.ceil(e%2147483648)===e;case Float:return typeof e=="number";case Bool:return e===!0||e===!1;case String:return typeof e=="string";case Dynamic:return!0;default:if(e==null)return!1;if(t==Class&&e.__name__!=null)return!0;null;if(t==Enum&&e.__ename__!=null)return!0;return null,e.__enum__==t}},js.Boot.__cast=function(e,t){if(js.Boot.__instanceof(e,t))return e;throw"Cannot cast "+Std.string(e)+" to "+Std.string(t)},js.Lib=$hxClasses["js.Lib"]=function(){},js.Lib.__name__=["js","Lib"],js.Lib.document=null,js.Lib.window=null,js.Lib.debug=function(){debugger},js.Lib.alert=function(e){alert(js.Boot.__string_rec(e,""))},js.Lib.eval=function(code){return eval(code)},js.Lib.setErrorHandler=function(e){js.Lib.onerror=e};var $_;Array.prototype.indexOf?HxOverrides.remove=function(e,t){var n=e.indexOf(t);return n==-1?!1:(e.splice(n,1),!0)}:null,Math.__name__=["Math"],Math.NaN=Number.NaN,Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,$hxClasses.Math=Math,Math.isFinite=function(e){return isFinite(e)},Math.isNaN=function(e){return isNaN(e)},String.prototype.__class__=$hxClasses.String=String,String.__name__=["String"],Array.prototype.__class__=$hxClasses.Array=Array,Array.__name__=["Array"],Date.prototype.__class__=$hxClasses.Date=Date,Date.__name__=["Date"];var Int=$hxClasses.Int={__name__:["Int"]},Dynamic=$hxClasses.Dynamic={__name__:["Dynamic"]},Float=$hxClasses.Float=Number;Float.__name__=["Float"];var Bool=$hxClasses.Bool=Boolean;Bool.__ename__=["Bool"];var Class=$hxClasses.Class={__name__:["Class"]},Enum={},Void=$hxClasses.Void={__ename__:["Void"]};typeof document!="undefined"&&(js.Lib.document=document),typeof window!="undefined"&&(js.Lib.window=window,js.Lib.window.onerror=function(e,t,n){var r=js.Lib.onerror;return r==null?!1:r(e,[t+":"+n])});var viewporter;(function(){var e;viewporter={forceDetection:!1,preventPageScroll:!1,ACTIVE:function(){return/ipad/i.test(navigator.userAgent)?!1:/webos/i.test(navigator.userAgent)?!0:"ontouchstart"in window?!0:!1}(),READY:!1,isLandscape:function(){return/Firefox/.test(navigator.userAgent)&&/Mobile/.test(navigator.userAgent)?window.screen.width>window.screen.height:window.orientation===90||window.orientation===-90},ready:function(e){window.addEventListener("viewportready",e,!1)},change:function(e){window.addEventListener("viewportchange",e,!1)},refresh:function(){e&&e.prepareVisualViewport()}};if(!viewporter.ACTIVE)return;var t=function(){var e=this;this.IS_ANDROID=/Android/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);var t=function(){e.prepareVisualViewport();var t=window.orientation;window.addEventListener("orientationchange",function(){window.orientation!==t&&(e.prepareVisualViewport(),t=window.orientation)},!1),document.body.addEventListener("touchmove",function(e){viewporter.preventPageScroll&&e.preventDefault()},!1),document.body.addEventListener("touchstart",function(){viewporter.preventPageScroll&&e.prepareVisualViewport()},!1)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){t()},!1):t()};t.prototype={getProfile:function(){if(viewporter.forceDetection)return null;for(var e in viewporter.profiles)if((new RegExp(e)).test(navigator.userAgent))return viewporter.profiles[e];return null},postProcess:function(){viewporter.READY=!0,this.triggerWindowEvent(this._firstUpdateExecuted?"viewportchange":"viewportready"),this._firstUpdateExecuted=!0},prepareVisualViewport:function(){var e=this;if(navigator.standalone)return this.postProcess();document.documentElement.style.minHeight="5000px";var t=window.innerHeight,n=this.getProfile(),r=viewporter.isLandscape()?"landscape":"portrait";window.scrollTo(0,e.IS_ANDROID?1:0);var i=40,s=window.setInterval(function(){function o(){return n?window.innerHeight===n[r]:!1}function u(){return window.innerHeight>t}window.scrollTo(0,e.IS_ANDROID?1:0),i--;if((e.IS_ANDROID?o():u())||i<0)document.getElementById("viewporter").style.position="relative",/Firefox/.test(navigator.userAgent)?(document.getElementById("viewporter").style.width=window.innerWidth+"px",document.getElementById("viewporter").style.height=window.screen.height-110+"px"):(document.documentElement.style.minHeight=window.innerHeight+"px",document.getElementById("viewporter").style.height=window.innerHeight+"px"),clearInterval(s),e.postProcess()},10)},triggerWindowEvent:function(e){var t=document.createEvent("Event");t.initEvent(e,!1,!1),window.dispatchEvent(t)}},e=new t})(),viewporter.profiles={MZ601:{portrait:696,landscape:1176},"GT-I9000|GT-I9100|Nexus S":{portrait:508,landscape:295},"GT-I9000|GT-I9100|Nexus S":{portrait:508,landscape:295},"GT-P1000":{portrait:657,landscape:400},"Desire_A8181|DesireHD_A9191":{portrait:533,landscape:320}};function ddjsutils(){}ddjsutils.prototype.getBase64Image=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0);var r=t.toDataURL("image/png");return r.replace(/^data:image\/png;base64,/,"")};zx_foodies.Persistence=$hxClasses["zx_foodies.Persistence"]=function(){},zx_foodies.Persistence.__name__=["zx","foodies","Persistence"],zx_foodies.Persistence.localStorageSupported=function(){var e=null;try{localStorage.setItem("test","test"),localStorage.removeItem("test"),e=!0}catch(t){e=!1}return e},zx_foodies.Persistence.getValue=function(e){if(!zx_foodies.Persistence.available)return"0";var t=localStorage[zx_foodies.Persistence.GAME_PREFIX+e];return t},zx_foodies.Persistence.setValue=function(e,t){if(!zx_foodies.Persistence.available)return;localStorage[zx_foodies.Persistence.GAME_PREFIX+e]=t},zx_foodies.Persistence.clearAll=function(){if(!zx_foodies.Persistence.available)return;localStorage.clear()},zx_foodies.Persistence.prototype={__class__:zx_foodies.Persistence};zx_foodies.Utils=$hxClasses["zx_foodies.Utils"]=function(){},zx_foodies.Utils.__name__=["zx","foodies","Utils"],zx_foodies.Utils.map=function(e,t,n,r,i){return i==null&&(i=1),r==null&&(r=0),e<=t?r:e>=n?i:(e-t)*(i-r)/(n-t)+r},zx_foodies.Utils.waitAndCall=function(e,t,n,r){createjs.Tween.get(e).wait(t).call(n,r)},zx_foodies.Utils.tintBitmap=function(e,t,n,r,i){var s=new createjs.ColorFilter(t,n,r,i);e.cache(e.x,e.y,e.image.width,e.image.height),e.filters=[s],e.updateCache()},zx_foodies.Utils.containBitmaps=function(e,t,n,r){n==null&&(n=!0),t==null&&(t=0);var i=0,s=0,o=new createjs.Container,u=0,a=e.length;while(u<a){var f=u++,l=e[f];l.regY=l.image.height/2,f!=0?n?(l.x=e[f-1].x+e[f-1].image.width+t,l.image.height>s&&(s=l.image.height),i+=l.image.width+t):(l.y=e[f-1].y+e[f-1].image.height+t,l.image.width>i&&(i=l.image.width),s+=l.image.height+t):(i=l.image.width,s=l.image.height),o.addChild(l)}return o.regX=i/2,o.regY=s/2,r!=null&&(r.width=i,r.height=s),o},zx_foodies.Utils.prototype={__class__:zx_foodies.Utils};var SceneRouter=SceneRouter||{sessionScene:null,scoreScene:null,battleResultScene:null,toSessionScene:function(e,t,n){this._reset(),this.sessionScene=new zx_foodies.SessionScene(n),this._bindEvents(e,this.sessionScene,t),zx_foodies.Game._stage.addChild(this.sessionScene)},toScoreScene:function(e,t,n){this._reset(),this.scoreScene=new zx_foodies.ScoreScene(n),this._bindEvents(e,this.scoreScene,t),zx_foodies.Game._stage.addChild(this.scoreScene)},toBattleResultScene:function(e,t,n){this._reset(),this.battleResultScene=new zx_foodies.BattleResultScene(n),this._bindEvents(e,this.battleResultScene,t),zx_foodies.Game._stage.addChild(this.battleResultScene)},_reset:function(){this.sessionScene&&(zx_foodies.Game._stage.removeChild(this.sessionScene),this.sessionScene=null),this.scoreScene&&(zx_foodies.Game._stage.removeChild(this.scoreScene),this.scoreScene=null),this.battleResultScene&&(zx_foodies.Game._stage.removeChild(this.battleResultScene),this.battleResultScene=null)},_bindEvents:function(e,t,n){for(var r in n)t[r]=$bind(e,n[r])}};zx_foodies.SessionScene=$hxClasses["zx_foodies.SessionScene"]=function(e){this._sessionEnded=!1,this.exportRoot=null,createjs.Container.call(this);var t=this;this.constructGame(function(){t._eliminateGems=function(){var e={};for(var t=1;t<=zx_foodies.Gem.GEMS_COUNT;++t)e[t]=0;return e}(),t._remainingTime=t._sessionTime=60,t.gameTimer(),t.newPowerup();var e=createjs.Ticker.getTime(!0);t._lastGemBlastTime=e,createjs.Ticker.addListener(t)})},zx_foodies.SessionScene.__name__=["zx","foodies","Session"],zx_foodies.SessionScene.__super__=createjs.Container,zx_foodies.SessionScene.prototype=$extend(createjs.Container.prototype,{getSpreePercent:function(){return this._spree/this._requiredSpree},isSpreeComplete:function(){return this._spree>=this._requiredSpree},timesUp:function(){if(this._sessionEnded)return;this._sessionEnded=!0,this.onSceneEnd!=null&&this.handlerSessionEnd(),this._grid.terminate(),this._grid.mouseEnabled=!1,createjs.Tween.get(this._grid).to({x:zx_foodies.Game.MAX_WIDTH+this._grid.getWidth()*zx_foodies.Game.getScale()/2},600,createjs.Ease.sineIn).wait(300)},resetSpree:function(){this._spree=0},handleWrongGroup:function(){this.resetSpree()},handleGemBlast:function(e,t){if(t||e.getType()>=zx_foodies.Gem.PowerupIndex)return;this._eliminateGems[e.getType()]+=1,this._spree+=1,this._lastGemBlastTime=createjs.Ticker.getTime(!0)},handleTweenEnd:function(){createjs.Tween.get(this._grid).to({alpha:1},500),this._grid.mouseEnabled=!0,this._grid.placePowerup(),this.newPowerup()},handleReadyForPowerup:function(){var e=null;if(this._sessionEnded)return;return this.isSpreeComplete()&&(e=this._currPowerupType,this._spree=0,this.newPowerup()),e},constructGame:function(e){APP_DEBUG&&(this._fps=new createjs.Text("0","Arial 22px","#FF0000"),this.addChild(this._fps),this._fps.x=100,this._fps.y=100),this.playingPage=new libPlaying.playing,this.playingPage.regX=PIC_SIZE.WIDTH/2,this.playingPage.regY=PIC_SIZE.HEIGHT/2,this.playingPage.y=zx_foodies.Game.MAX_HEIGHT/2,this.playingPage.x=zx_foodies.Game.MAX_WIDTH/2,this.addChild(this.playingPage),this.initPage(),this.initInfo();var t=new createjs.Bitmap(images.ready);t.regX=t.image.width/2,t.regY=t.image.height/2,t.y=zx_foodies.Game.MAX_HEIGHT/2,t.x=zx_foodies.Game.MAX_WIDTH/2,this.addChild(t);var n=this;createjs.Tween.get(t).to({alpha:0,scaleX:1.5,scaleY:1.5},600).wait(200).call(function(){n.removeChild(t);var r=new createjs.Bitmap(images.go);r.regX=r.image.width/2,r.regY=r.image.height/2,r.y=zx_foodies.Game.MAX_HEIGHT/2,r.x=zx_foodies.Game.MAX_WIDTH/2,n.addChild(r),createjs.Tween.get(r).to({alpha:0,scaleX:1.5,scaleY:1.5},600).call(function(){n.removeChild(r),n._grid=new zx_foodies.GemGrid(zx_foodies.DataLoader.getAvailPassivePowerupIds()),n._grid.onGemBlast=$bind(n,n.handleGemBlast),n._grid.onWrongGroup=$bind(n,n.handleWrongGroup),n._grid.onReadyForPowerup=$bind(n,n.handleReadyForPowerup),n.addChild(n._grid),e?e():"",GameModel.checkIsFinished(function(){n.timesUp()})})})},initPage:function(){this.playingPage.player1Head.visible=!1,this.playerA=this.playingPage.player1Head.instance_7,this.playingPage.player2Head.visible=!1,this.playerB=this.playingPage.player2Head.instance_6,this.playingPage.player1Text.visible=!1,this.playingPage.player2Text.visible=!1},initInfo:function(){if(UserModel.getPlayMode()==PLAY_MODE.BATTLE)UserModel.getUserInfo().sex==USER_SEX.MALE?this.playerA.image=images.lboyhead:UserModel.getUserInfo().sex==USER_SEX.FEMALE&&(this.playerA.image=images.lgirlhead),UserModel.getCompetitorInfo().sex==USER_SEX.MALE?this.playerB.image=images.rboyhead:UserModel.getCompetitorInfo().sex==USER_SEX.FEMALE&&(this.playerB.image=images.rgirlhead),this.playingPage.player1Text.visible=!0,this.playingPage.player2Text.visible=!0;else if(UserModel.getPlayMode()==PLAY_MODE.SINGLE){this.playerA.image=images.lboyhead;var e=["hamburger-man","ice-lolly-man","pingcake-man"],t=e[Math.floor(Math.random()*10)%3];this.playerB.image=images[t]}this.playingPage.player1Head.visible=!0,this.playingPage.player2Head.visible=!0},gameTimer:function(){if(this._remainingTime>0){this.playingPage.time.x-=338/60;var e=this._remainingTime/this._sessionTime;e>1&&(e=1),this._remainingTime-=1,zx_foodies.Utils.waitAndCall(this,1e3,$bind(this,this.gameTimer))}else UserModel.getPlayMode()==PLAY_MODE.SINGLE&&this.timesUp()},tick:function(){var e=createjs.Ticker.getTime(!0);e>this._lastGemBlastTime+zx_foodies.SessionScene.SPREE_RESET_INTERVAL&&this._spree>0&&(this._lastGemBlastTime=e,this.resetSpree())},newPowerup:function(){var e=zx_foodies.DataLoader.getAvailablePowerups(!0),t=Std.random(e.length);this._currPowerupType=e[t].id|0,this._requiredSpree=e[GameModel.currentLevel?zx_foodies.LevelDB[GameModel.currentLevel-1].powerUpNum-1:t].spreeToActivate|0},tick:function(){APP_DEBUG&&(this._fps.text=""+createjs.Ticker.getMeasuredFPS())},handlerSessionEnd:function(){this.onSceneEnd(this._grid.gemTypeNum,this._eliminateGems),createjs.Ticker.removeListener(this)},_lastGemBlastTime:null,_remainingTime:null,_sessionTime:null,_sessionEnded:null,_requiredSpree:null,_currPowerupBlock:null,_currPowerupType:null,_grid:null,_background:null,_spree:null,_scoreMutliplier:null,_score:null,__class__:zx_foodies.SessionScene});zx_foodies.ScoreScene=$hxClasses["zx_foodies.ScoreScene"]=function(e){this.scorePage=new libSingleConclusion.conclusionfor1,this.scorePage.regX=PIC_SIZE.WIDTH/2,this.scorePage.regY=PIC_SIZE.HEIGHT/2,this.scorePage.y=zx_foodies.Game.MAX_HEIGHT/2,this.scorePage.x=zx_foodies.Game.MAX_WIDTH/2,this.addChild(this.scorePage),this.currentLevel=e.level,this.currentScore=e.score,this.scorePatten=[],this.levelNum=[],this.level=[],this.initPage(),this.showLevel(),this.showScore(),this.initEvent()},zx_foodies.ScoreScene.prototype=new createjs.Container,zx_foodies.ScoreScene.prototype.initPage=function(){this.scorePage.x_s.visible=!1,this.scorePage.num_9.visible=!1,this.scorePage.num_8.visible=!1,this.scorePage.num_7.visible=!1,this.scorePage.num_6.visible=!1,this.scorePage.num_5.visible=!1,this.scorePage.num_4.visible=!1,this.scorePage.num_3.visible=!1,this.scorePage.num_2.visible=!1,this.scorePage.num_1.visible=!1,this.scorePage.num_0.visible=!1;var e=this;(function(){for(var t=0;t<4;++t){var n=new createjs.Container,r=new createjs.Bitmap(images.conclusionfor1number0);r.setTransform(-51.4,-61.5),n.addChild(r),n.setTransform(170+20*t,516,.521,.521,0,0,0,-23.4,-35.9),e.scorePage.addChild(n),n.visible=!1,e.scorePatten[t]=n}var n=new createjs.Container,r=new createjs.Bitmap(images.conclusionfor1numberx);r.setTransform(-30.9,-61.5),n.addChild(r),n.setTransform(250,516.1,.459,.481,0,0,0,-18.4,-36.4),n.visible=!1,e.scorePatten[4]=n,e.scorePage.addChild(n);for(var t=5;t<9;++t){var n=new createjs.Container,r=new createjs.Bitmap(images.conclusionfor1number0);r.setTransform(-51.4,-61.5),n.addChild(r),n.setTransform(170+22*t,516,.521,.521,0,0,0,-23.4,-35.9),e.scorePage.addChild(n),n.visible=!1,e.scorePatten[t]=n}})(),this.levelNum[0]=this.scorePage.num_2.instance_7,this.levelNum[1]=this.scorePage.num_3.instance_6,this.levelNum[0].image=images.conclusionfor1number0,this.levelNum[1].image=images.conclusionfor1number0,this.level[0]=this.scorePage.num_2,this.level[1]=this.scorePage.num_3},zx_foodies.ScoreScene.prototype.showLevel=function(){var e=this.currentLevel+"",t=1;for(var n=e.length-1;n>=0;--n)this.levelNum[t].image=images["conclusionfor1number"+e[n]],--t;this.level[0].visible=!0,this.level[1].visible=!0},zx_foodies.ScoreScene.prototype.showScore=function(){var e=this.currentScore+"",t=3;for(var n=e.length-1;n>=0;--n)this.scorePatten[t].children[0].image=images["conclusionfor1number"+e[n]],--t;var r=zx_foodies.LevelDB[GameModel.currentLevel-1].scoreRequired+"",t=8;for(var n=r.length-1;n>=0;--n)this.scorePatten[t].children[0].image=images["conclusionfor1number"+r[n]],--t;for(var n=0;n<9;++n)this.scorePatten[n].visible=!0},zx_foodies.ScoreScene.prototype.initEvent=function(){var e=this;this.scorePage.backToIndex.onClick=function(){Router.goto("#user/renderIndex")},this.scorePage.continueFight.onClick=function(){e.onContinueFight()}};zx_foodies.BattleResultScene=$hxClasses["zx_foodies.ScoreScene"]=function(e){this.battleResultPage=new libBattleConclusion.conclusionfor2,this.battleResultPage.regX=PIC_SIZE.WIDTH/2,this.battleResultPage.regY=PIC_SIZE.HEIGHT/2,this.battleResultPage.y=zx_foodies.Game.MAX_HEIGHT/2,this.battleResultPage.x=zx_foodies.Game.MAX_WIDTH/2,this.addChild(this.battleResultPage),this.initPage(),this.initEvent(),this.initInfo()},zx_foodies.BattleResultScene.prototype=new createjs.Container,zx_foodies.BattleResultScene.prototype.initPage=function(){this.battleResultPage.continueFight.visible=!1,this.battleResultPage.winText.visible=!1,this.battleResultPage.loseText.visible=!1,this.battleResultPage.girlBg.visible=!1,this.battleResultPage.boyBg.visible=!1,this.battleResultPage.boyHead.visible=!1,this.battleResultPage.girlHead.visible=!1,this.selfPatten={bg:this.battleResultPage.boyBg.instance_14,head:this.battleResultPage.boyHead.instance_10,resultTxt:this.battleResultPage.loseText.instance_1},this.competitorPatten={bg:this.battleResultPage.girlBg.instance_13,head:this.battleResultPage.girlHead.instance_6,resultTxt:this.battleResultPage.winText.instance_2};var e=new createjs.Text("辛苦了~!","20px 黑体","#000000");e.setTransform(230,465),this.battleResultPage.addChild(e);var t=new createjs.Text("辛苦了~!","20px 黑体","#000000");t.setTransform(230,170),this.battleResultPage.addChild(t);var n=new createjs.Text("名称:"+UserModel.getUserInfo().username,"20px 黑体","#000000");n.setTransform(50,650),this.battleResultPage.addChild(n);var r=new createjs.Text("级别:","20px 黑体","#000000");r.setTransform(220,650),this.battleResultPage.addChild(r);var i=new createjs.Text("对战数:","20px 黑体","#000000");i.setTransform(300,650),this.battleResultPage.addChild(i);var s=new createjs.Text("名称:"+UserModel.getCompetitorInfo().username,"20px 黑体","#000000");s.setTransform(50,355),this.battleResultPage.addChild(s);var o=new createjs.Text("级别:","20px 黑体","#000000");o.setTransform(220,355),this.battleResultPage.addChild(o);var u=new createjs.Text("对战数:","20px 黑体","#000000");u.setTransform(300,355),this.battleResultPage.addChild(u)},zx_foodies.BattleResultScene.prototype.initEvent=function(){var e=this;this.battleResultPage.backToIndex.onClick=function(){e.beforeLeave(),Router.goto("#user/renderIndex")},this.battleResultPage.continueFight.onClick=function(){console.log("continueToFight")},this.battleResultPage.rechoose.onClick=function(){e.beforeLeave(),Router.goto("#user/renderSearch")},this.battleResultPage.addFriendBtn.onClick=function(){console.log("addFriend")}},zx_foodies.BattleResultScene.prototype.initInfo=function(){UserModel.getUserInfo().sex==USER_SEX.MALE?(this.selfPatten.bg.image=images.bgboy,this.selfPatten.head.image=images.lboyhead):UserModel.getUserInfo().sex==USER_SEX.FEMALE&&(this.selfPatten.bg.image=images.bggirl,this.selfPatten.head.image=images.lgirlhead),UserModel.getCompetitorInfo().sex==USER_SEX.MALE?(this.competitorPatten.bg.image=images.bgboy,this.competitorPatten.head.image=images.lboyhead):UserModel.getCompetitorInfo().sex==USER_SEX.FEMALE&&(this.competitorPatten.bg.image=images.bggirl,this.competitorPatten.head.image=images.lgirlhead),this.battleResultPage.girlBg.visible=!0,this.battleResultPage.boyBg.visible=!0,this.battleResultPage.boyHead.visible=!0,this.battleResultPage.girlHead.visible=!0},zx_foodies.BattleResultScene.prototype.showResult=function(e){function r(e){if(e==USER_SEX.MALE)return images.lboywin;if(e==USER_SEX.FEMALE)return images.lgirlwin}function i(e){if(e==USER_SEX.MALE)return images.lboylose;if(e==USER_SEX.FEMALE)return images.lgirllose}var t={user_id:e.winner.user_id,username:e.winner.username,level:e.winner.level,battles:e.winner.battles},n={user_id:e.loser.user_id,username:e.loser.username,level:e.loser.level,battles:e.loser.battles};e.winner.user_id==UserModel.getUserInfo().user_id?(this.selfPatten.resultTxt.image=images.winTxt,this.selfPatten.head.image=r(UserModel.getUserInfo().sex),UserModel.setUserInfo(t),this.competitorPatten.resultTxt.image=images.loseTxt,this.competitorPatten.head.image=i(UserModel.getCompetitorInfo().sex),UserModel.setCompetitorInfo(n)):e.winner.user_id==UserModel.getCompetitorInfo().user_id&&(this.selfPatten.resultTxt.image=images.loseTxt,this.selfPatten.head.image=i(UserModel.getUserInfo().sex),UserModel.setUserInfo(n),this.competitorPatten.resultTxt.image=images.winTxt,this.competitorPatten.head.image=r(UserModel.getCompetitorInfo().sex),UserModel.setCompetitorInfo(t)),this.battleResultPage.winText.scaleX=2,this.battleResultPage.winText.scaleY=2,this.battleResultPage.winText.visible=!0,createjs.Tween.get(this.battleResultPage.winText).to({scaleX:1,scaleY:1},150),this.battleResultPage.loseText.scaleX=2,this.battleResultPage.loseText.scaleY=2,this.battleResultPage.loseText.visible=!0,createjs.Tween.get(this.battleResultPage.loseText).to({scaleX:1,scaleY:1},150);var s=new createjs.Text("级别:"+UserModel.getUserInfo().level,"20px 黑体","#000000");s.setTransform(220,650),this.battleResultPage.addChild(s);var o=new createjs.Text("对战数:"+UserModel.getUserInfo().battles,"20px 黑体","#000000");o.setTransform(300,650),this.battleResultPage.addChild(o);var u=new createjs.Text("级别:"+UserModel.getCompetitorInfo().level,"20px 黑体","#000000");u.setTransform(220,355),this.battleResultPage.addChild(u);var a=new createjs.Text("对战数:"+UserModel.getCompetitorInfo().battles,"20px 黑体","#000000");a.setTransform(300,355),this.battleResultPage.addChild(a)},zx_foodies.BattleResultScene.prototype.beforeLeave=function(){UserModel.setUserStatus(USER_STATUS.NONE),UserModel.resetCompetitorInfo(),GameModel.setFightKey(null)};zx_foodies.Game=$hxClasses["zx_foodies.Game"]=function(e,t,n){this._waitingToStart=!1,this._orientError=null,zx_foodies.Game.DEBUG&&zx_foodies.Persistence.clearAll();var r=/Android 4.0.4/.test(navigator.userAgent);r=r&&/GT-I9300/.test(navigator.userAgent),r=r&&!/Chrome/.test(navigator.userAgent);if(r){js.Lib.alert("这个手机版本不支持，请更新您的手机。");return}zx_foodies.Game._stage=e,zx_foodies.Game._stageBg=t,zx_foodies.Game._stageTime=n,viewporter.ACTIVE&&(viewporter.preventPageScroll=!0,viewporter.change($bind(this,this.handleViewportChanged))),this.readyToStart()},zx_foodies.Game.__name__=["zx","foodies","Game"],zx_foodies.Game._stage=null,zx_foodies.Game._bgMusic=null,zx_foodies.Game.getViewport=function(){return zx_foodies.Game._viewport},zx_foodies.Game.getScale=function(){return zx_foodies.Game._scale},zx_foodies.Game.getStage=function(){return zx_foodies.Game._stage},zx_foodies.Game.prototype={readyToStart:function(){document.body.style["background-color"]="#ffe829",this.handleStart()},handleStart:function(e){UserModel.setUserStatus(USER_STATUS.PLAYING),SceneRouter.toSessionScene(this,{onSceneEnd:this.handleSessionSceneEnd},e)},continueToFight:function(){SceneRouter.toSessionScene(this,{onSceneEnd:this.handleSessionSceneEnd})},handleSessionSceneEnd:function(e,t){UserModel.setUserStatus(USER_STATUS.CALCULATE);var n=this;UserModel.getPlayMode()==PLAY_MODE.SINGLE?GameModel.getScore(e,t,function(e){SceneRouter.toScoreScene(n,{onContinueFight:n.continueToFight},{score:e.score,level:e.level})}):UserModel.getPlayMode()==PLAY_MODE.BATTLE&&(zx_foodies.Gem._gemSpriteSheet=null,SceneRouter.toBattleResultScene(this),GameModel.getScore(e,t,function(e){console.log(e)}))},handleResize:function(e){var t=/Firefox/.test(navigator.userAgent),n=/Android/.test(navigator.userAgent),r=js.Lib.window.innerWidth,i=js.Lib.window.innerHeight;zx_foodies.Game._stage.canvas.width=r,zx_foodies.Game._stage.canvas.height=i;if(!viewporter.isLandscape()){if(t){i=Math.floor(zx_foodies.Main.getFFHeight());var s=Math.ceil((js.Lib.window.screen.height-110)*(r/js.Lib.window.screen.width));n||(s=Math.ceil((js.Lib.window.screen.height-30)*(r/js.Lib.window.screen.width))),s<i&&(i=Math.floor(s))}viewporter.ACTIVE&&i<r||(zx_foodies.Game._viewport.width=r,zx_foodies.Game._viewport.height=i),this._orientError!=null&&t&&this.handleViewportChanged()}else t&&this.handleViewportChanged();createjs.Ticker.getPaused()&&zx_foodies.Game._stage.update()},handleViewportChanged:function(){viewporter.isLandscape()?this._orientError==null&&(this._orientError=zx_foodies.Assets.getImage("images/orientation_error.png"),this._orientError.regX=this._orientError.image.width/2,this._orientError.regY=this._orientError.image.height/2,this._orientError.x=zx_foodies.Game._viewport.height/2,this._orientError.y=zx_foodies.Game._viewport.width/2,zx_foodies.Game._stage.addChildAt(this._orientError,zx_foodies.Game._stage.getNumChildren()),zx_foodies.Game._stage.update(),this._session.pause()):this._orientError!=null&&(zx_foodies.Game._stage.removeChild(this._orientError),this._orientError=null,createjs.Ticker.getPaused()&&zx_foodies.Game._stage.update(),this._waitingToStart&&(this._waitingToStart=!1,zx_foodies.Assets.loadAndCall("images/splash_logo.png",$bind(this,this.showSplash))))},_playerXP:null,_lightCircle:null,_loadingStroke:null,_loadingBar:null,_tapToPlayText:null,_waitingToStart:null,_orientError:null,_session:null,_menu:null,_bush:null,_cheetah:null,_logo:null,__class__:zx_foodies.Game};zx_foodies.Powerup=$hxClasses["zx_foodies.Powerup"]=function(e){this._type=e},zx_foodies.Powerup.__name__=["zx","foodies","Powerup"],zx_foodies.Powerup.POWERUP_SPRITES=null,zx_foodies.Powerup.getPowerupBlock=function(e){zx_foodies.Powerup.BLOCK_SPRITES==null&&zx_foodies.Powerup.initBlockSpriteSheet();var t=zx_foodies.DataLoader.getPowerById(e),n=new createjs.BitmapAnimation(zx_foodies.Powerup.BLOCK_SPRITES),r=(t.blockFrame|0)+1;return n.gotoAndStop("powerupblock"+r),n},zx_foodies.Powerup.initBlockSpriteSheet=function(){var e,t,n=new GameplayDB,r=n.getBlockSpritesheet();e=zx_foodies.Assets.getRawImage(r.loc),t={},t.images=[e],t.frames={width:r.frameWidth,height:r.frameHeight,regX:(r.frameWidth|0)/2,regY:(r.frameHeight|0)/2},t.animations={};var i=0,s=n.getAllPowerups().length;while(i<s){var o=i++;t.animations["powerupblock"+(o+1)]={frames:o,frequency:20}}zx_foodies.Powerup.BLOCK_SPRITES=new createjs.SpriteSheet(t)},zx_foodies.Powerup.prototype={_type:null,__class__:zx_foodies.Powerup};zx_foodies.Gem=$hxClasses["zx_foodies.Gem"]=function(e){this._stopAt=-1,this._isAlive=!0,this._hasJustCreated=!0,this._isFocusFaded=!1,this._isZenGlow=!1,this._isHintGlow=!1,this._powerup=-1,createjs.Container.call(this),this._speed=zx_foodies.Gem.INITIAL_SPEED,this._isInPlace=!1,this._gemType=e,this.onPress=$bind(this,this.handleClick),e>=zx_foodies.Gem.PowerupIndex?(zx_foodies.Powerup.initBlockSpriteSheet(),this._powerup=e%100,this._powerup==3&&(this._powerup=2),this._gemBMP=zx_foodies.Powerup.getPowerupBlock(this._powerup)):(this._gemBMP=new createjs.BitmapAnimation(zx_foodies.Gem._gemSpriteSheet),this._gemBMP.gotoAndStop("gem"+e)),this.addChild(this._gemBMP)},zx_foodies.Gem.__name__=["zx","foodies","Gem"],zx_foodies.Gem._gemSpriteSheet=null,zx_foodies.Gem._explodeSpriteSheet=null,zx_foodies.Gem._lastClickPos=null,zx_foodies.Gem.createGem=function(e,t){if(zx_foodies.Gem._gemSpriteSheet==null||GameModel.currentLevel-this.lastLevel>0){var n,r,i;GameModel.currentLevel?i=zx_foodies.LevelDB[GameModel.currentLevel-1].img:i=NetWordGem[Std.random(4)+1+""],this.lastLevel=GameModel.currentLevel,n=zx_foodies.Assets.getRawImage(i),r={},r.images=[n],r.frames={width:zx_foodies.Gem.GEM_SIZE,height:zx_foodies.Gem.GEM_SIZE,regX:zx_foodies.Gem.GEM_SIZE/2,regY:zx_foodies.Gem.GEM_SIZE/2},r.animations={};var s=0,o=zx_foodies.Gem.GEMS_COUNT;while(s<o){var u=s++;r.animations["gem"+(u+1)]={frames:u,frequency:20},r.animations["glow"+(u+1)]={frames:zx_foodies.Gem.SHEET_GLOW+u,frequency:20},r.animations["gem_cover"+(u+1)]={frames:zx_foodies.Gem.SHEET_COVER+u,frequency:20},r.animations["glow_cover"+(u+1)]={frames:zx_foodies.Gem.SHEET_COVER_GLOW+u,frequency:20}}zx_foodies.Gem._gemSpriteSheet=new createjs.SpriteSheet(r),n=zx_foodies.Assets.getRawImage("images/gems/poof.png"),r={},r.images=[n],r.frames={width:n.height,height:n.height,regX:n.height/2,regY:n.height/2},r.animations={},r.animations.explode={frames:[0,1,2,3,4],frequency:1,next:!1},zx_foodies.Gem._explodeSpriteSheet=new createjs.SpriteSheet(r)}var a=new zx_foodies.Gem(e);return a._grid=t,a},zx_foodies.Gem.__super__=createjs.Container,zx_foodies.Gem.prototype=$extend(createjs.Container.prototype,{getSpeed:function(){return this._speed},getPowerup:function(){return this._powerup},getType:function(){return this._gemType},isRelevantForSolve:function(){return this._isInPlace||this._hasJustCreated},isInPlace:function(){return this._isInPlace},setCol:function(e){this._col=e,this.name="gem"+this._row+","+this._col},setRow:function(e){this._row=e,this.name="gem"+this._row+","+this._col},getCol:function(){return this._col},getRow:function(){return this._row},isAlive:function(){return this._isAlive},destroy:function(){this._isInPlace||(this._isInPlace=!0,this._speed=0),this._gemBMP!=null&&createjs.Tween.removeTweens(this._gemBMP),this._glowBMP!=null&&createjs.Tween.removeTweens(this._glowBMP),this._coverBMP!=null&&createjs.Tween.removeTweens(this._coverBMP),this._powerupBMP!=null&&createjs.Tween.removeTweens(this._powerupBMP)},dropGemAbove:function(){var e=this._grid.getGemAbove(this);e!=null&&e.drop()},drop:function(){if(this._gemBMP.visible){this._isZenGlow&&this.stopZenGlow();var e=this._grid.ROW_COUNT-1;if(this._row!=e){var t=this._grid.getGemBelow(this);while(t!=null&&!t.isAlive()&&t.getRow()!=e)t=this._grid.getGemBelow(t);if(t!=null){var n=Lambda.indexOf(this._grid.gems[this._col],t);e=this._grid.ROW_COUNT-(this._grid.gems[this._col].length-(n+1))-2}}this._isInPlace=!1,this._speed=.001,e>this._stopAt&&(this._stopAt=e,this._stopAtY=e*zx_foodies.Gem.GEM_SIZE),this.setRow(this._stopAt),this.onTick=$bind(this,this.handleTick),zx_foodies.Utils.waitAndCall(this,10+Std.random(140),$bind(this,this.dropGemAbove))}},changeType:function(e,t){t==null&&(t=!1),!this._isHintGlow&&!this._isZenGlow&&t&&(this.initGlow(),this._glowBMP.alpha=1,createjs.Tween.get(this._glowBMP).to({alpha:0},300,createjs.Ease.sineIn)),this._gemType=e,createjs.Tween.removeTweens(this._gemBMP),this._gemBMP.gotoAndStop("gem"+e),this._gemBMP.alpha=1,this._isFocusFaded&&(this._gemBMP.alpha=zx_foodies.Gem.FOCUS_FADE),this._glowBMP!=null&&this._glowBMP.gotoAndStop("glow"+e),this._coverBMP!=null&&(this._isHintGlow||this._isZenGlow?this._coverBMP.gotoAndStop("glow_cover"+e):this._coverBMP.gotoAndStop("gem_cover"+e))},setNotInPlace:function(){this._isInPlace=!1},handleRemove:function(){this.onRemove!=null&&(this.onRemove(this),this.onRemove=null,this._gemBMP.stop())},explode:function(e){if(this.onExplode!=null){this.onExplode(this,e),this.onExplode=null,this._isAlive=!1;var t=this.parent;t!=null&&(t.removeChild(this),t.addChild(this)),this.removeChild(this._gemBMP),this.stopHintGlow(),this.stopZenGlow(!0),this.removeChild(this._glowBMP),this._coverBMP!=null&&(this._coverBMP.parent!=null&&this.removeChild(this._coverBMP),this._coverBMP=null),this._powerupBMP!=null&&(this._powerupBMP.parent!=null&&this.removeChild(this._powerupBMP),this._powerupBMP=null),this._gemBMP=new createjs.BitmapAnimation(zx_foodies.Gem._explodeSpriteSheet),this._gemBMP.gotoAndPlay("explode"),this._gemBMP.onAnimationEnd=$bind(this,this.handleRemove),this.addChild(this._gemBMP)}},stopFocusFade:function(){this._isFocusFaded&&(this._isFocusFaded=!1,createjs.Tween.removeTweens(this._gemBMP),createjs.Tween.get(this._gemBMP).to({alpha:1},200))},startFocusFade:function(e){e==null&&(e=!1),this._isFocusFaded=!0,e?(createjs.Tween.removeTweens(this._gemBMP),createjs.Tween.get(this._gemBMP).to({alpha:zx_foodies.Gem.FOCUS_FADE},200)):this._gemBMP.alpha=zx_foodies.Gem.FOCUS_FADE},alphaFade:function(){if(this._isFocusFaded)return;this._gemBMP.alpha=zx_foodies.Gem.TAP_ALPHA,createjs.Tween.removeTweens(this._gemBMP),createjs.Tween.get(this._gemBMP).to({alpha:1},750)},handleTick:function(e){this._speed+=zx_foodies.Gem.GRAVITY*e,this.y+=this._speed*e,this.y>=this._stopAtY&&(this.onTick=null,this.y=this._stopAtY,this._stopAt=-1,this._speed=0,this._isInPlace=!0,this.onLand!=null&&this.onLand(this))},handleClick:function(){if(zx_foodies.Gem._lastClickTime+zx_foodies.Gem.CLICK_THRESH_TIME>=createjs.Ticker.getTime(!0))return;zx_foodies.Gem._lastClickTime=createjs.Ticker.getTime(!0),zx_foodies.Gem._lastClickPos=new createjs.Point(this.getStage().mouseX,this.getStage().mouseY),this._gemBMP!=null&&this._gemBMP.alpha==1&&(this._gemBMP.alpha=zx_foodies.Gem.TAP_ALPHA),this.onGemClick!=null&&this.onGemClick(this),this.onPowerupActivated!=null&&this._powerup!=-1&&this.onPowerupActivated(this)},setPowerup:function(e,t){t==null&&(t=!1),this._powerup=e},coverGlyph:function(){this._coverBMP=new createjs.BitmapAnimation(zx_foodies.Gem._gemSpriteSheet),this._isHintGlow||this._isZenGlow?this._coverBMP.gotoAndStop("glow_cover"+this._gemType):this._coverBMP.gotoAndStop("gem_cover"+this._gemType),this._coverBMP.alpha=0,this.addChild(this._coverBMP),createjs.Tween.get(this._coverBMP).to({alpha:this._gemBMP.alpha},100)},glowPulse:function(){createjs.Tween.get(this._glowBMP).to({alpha:1},zx_foodies.Gem.PULSE_TIME).to({alpha:0},zx_foodies.Gem.PULSE_TIME).call($bind(this,this.glowPulse))},initGlow:function(){this._glowBMP==null&&(this._glowBMP=new createjs.BitmapAnimation(zx_foodies.Gem._gemSpriteSheet),this._glowBMP.gotoAndStop("glow"+this._gemType),this._powerupBMP!=null?this.addChildAt(this._glowBMP,this.getChildIndex(this._powerupBMP)):this.addChild(this._glowBMP),this._glowBMP.alpha=0)},stopZenGlow:function(e){e==null&&(e=!1),this._isZenGlow&&(this._isZenGlow=!1,createjs.Tween.removeTweens(this._glowBMP),e?this._glowBMP.alpha=0:createjs.Tween.get(this._glowBMP).to({alpha:0},80))},startZenGlow:function(e){e==null&&(e=!1),this.initGlow(),this._isZenGlow||(this._isZenGlow=!0,e?this._glowBMP.alpha=1:createjs.Tween.get(this._glowBMP).to({alpha:1},120))},stopHintGlow:function(){this._isHintGlow&&(this._isHintGlow=!1,createjs.Tween.removeTweens(this._glowBMP),this._glowBMP.alpha=0)},startHintGlow:function(){this.initGlow(),this._isHintGlow||(this._isHintGlow=!0,this.glowPulse())},_stopAtY:null,_stopAt:null,_speed:null,_isAlive:null,_isInPlace:null,_hasJustCreated:null,_isFocusFaded:null,_glowPulseTween:null,_isZenGlow:null,_isHintGlow:null,_powerup:null,_powerupBMP:null,_coverBMP:null,_glowBMP:null,_gemBMP:null,_gemType:null,_col:null,_row:null,_grid:null,onRemove:null,onLand:null,onPowerupActivated:null,onExplode:null,onGemClick:null,__class__:zx_foodies.Gem});zx_foodies.GemGrid=$hxClasses["zx_foodies.GemGrid"]=function(){this._shouldPlayDing=!1,this._groupExplodeBomb=null,this._isInSpecialSight=!1,this._poweredGem=null,this._landingTested=!1,this._hintTime=-1,this.COL_COUNT=7,this.ROW_COUNT=8,this.gemTypeNum=GameModel.currentLevel?zx_foodies.LevelDB[GameModel.currentLevel-1].gemTypeNum:zx_foodies.Gem.GEMS_COUNT,this.nextPowerup=null,createjs.Container.call(this),this.regX=this.getWidth()/2,this.regY=this.getHeight()/2,this.scaleX=this.scaleY=zx_foodies.Game.getScale(),this.x=zx_foodies.Game.MAX_WIDTH/2,this.y=zx_foodies.Game.MAX_HEIGHT*2/3,this.initGemGrid(),this.onTick=$bind(this,this.handleTick)},zx_foodies.GemGrid.__name__=["zx","foodies","GemGrid"],zx_foodies.GemGrid.__super__=createjs.Container,zx_foodies.GemGrid.prototype=$extend(createjs.Container.prototype,{initGemGrid:function(){var e=this;GameModel.getGemGrid(this,function(t,n){e.gemTypeNum=n,e.gems=new Array;for(var r=0;r<e.COL_COUNT;++r)e.gems[r]=new Array,e.fillGemCol(r,t);e._solver=new zx_foodies.GridSolver(e);var i=0,s=e.COL_COUNT;while(i<s){var r=i++;e.gems[r][e.ROW_COUNT-1].drop()}})},getHeight:function(){return this.ROW_COUNT*zx_foodies.Gem.GEM_SIZE},getWidth:function(){return this.COL_COUNT*zx_foodies.Gem.GEM_SIZE},getGemBelow:function(e){var t=Lambda.indexOf(this.gems[e.getCol()],e);return t!=-1?t==this.gems[e.getCol()].length-1?null:this.getGem(t+1,e.getCol()):null},getGemAbove:function(e){var t=Lambda.indexOf(this.gems[e.getCol()],e);return t!=-1?t==0?null:this.getGem(t-1,e.getCol()):null},terminate:function(){createjs.Tween.removeTweens(this);var e=0,t=this.gems.length;while(e<t){var n=e++,r=0,i=this.gems[n].length;while(r<i){var s=r++;this.gems[n][s].destroy(),createjs.Tween.removeTweens(this.gems[n][s])}}},handleGemRemove:function(e){e.destroy(),this.removeChild(e)},activateColorBlast:function(e){var t=Std.random(this.gemTypeNum)+1,n=0,r=this.COL_COUNT;while(n<r){var i=n++,s=0,o=this.ROW_COUNT;while(s<o){var u=s++;this.getGem(u,i).getType()==t&&this.getGem(u,i).explode()}}this.dropNeededGems()},activateColorSplash:function(){var e=Std.random(this.gemTypeNum)+1,t=-1;while(t==-1)t=Std.random(this.gemTypeNum)+1,t==e&&(t=-1);var n=0,r=this.COL_COUNT;while(n<r){var i=n++,s=0,o=this.ROW_COUNT;while(s<o){var u=s++;this.getGem(u,i).getType()==t&&this.getGem(u,i).changeType(e,!0)}}},activateRearrange:function(){var e=0,t=this.COL_COUNT;while(e<t){var n=e++,r=0,i=this.ROW_COUNT;while(r<i){var s=r++;this.getGem(s,n).explode(this.getGem(s,n),!0)}}var o=this;GameModel.gemGridConstrutor(this,function(e){o.gems=new Array;for(var t=0;t<o.COL_COUNT;++t)o.gems[t]=new Array,o.fillGemCol(t,e);o._solver=new zx_foodies.GridSolver(o);var n=0,r=o.COL_COUNT;while(n<r){var t=n++;o.gems[t][o.ROW_COUNT-1].drop()}})},startSpecialSight:function(){this._specialSightEnd=createjs.Ticker.getTime(!0)+zx_foodies.GemGrid.SPECIAL_SIGHT_TIME;if(!this._isInSpecialSight){this._isInSpecialSight=!0;var e=0,t=this.COL_COUNT;while(e<t){var n=e++,r=0,i=this.ROW_COUNT;while(r<i){var s=r++;this.getGem(s,n).startFocusFade()}}}},handleEndLightning:function(){this.removeChild(this._lightHoriz),this.removeChild(this._lightVerti);var e=0,t=this._lightningAffected.length;while(e<t){var n=e++;this._lightningAffected[n].explode()}this.dropNeededGems(),this.mouseEnabled=!0},startLightningBolt:function(e){this.mouseEnabled=!1;var t=zx_foodies.Assets.getRawImage("images/gems/lightning.png"),n={};n.images=[t],n.frames={width:t.width,height:t.height,regX:t.width/2,regY:t.height/2},n.animations={},n.animations.lightning={frames:[0,1,0,1,0,1,0,1],frequency:1.5};var r=new createjs.SpriteSheet(n);this._lightHoriz==null&&(this._lightHoriz=new createjs.BitmapAnimation(r),this._lightHoriz.rotation=90),this._lightHoriz.gotoAndPlay("lightning"),this._lightHoriz.x=this.getWidth()/2,this._lightHoriz.y=e.y,this.addChild(this._lightHoriz),this._lightVerti==null&&(this._lightVerti=new createjs.BitmapAnimation(r)),this._lightVerti.gotoAndPlay("lightning"),this._lightVerti.onAnimationEnd=$bind(this,this.handleEndLightning),this._lightVerti.x=e.x,this._lightVerti.y=this.getHeight()/2,this.addChild(this._lightVerti),this._lightningAffected=new Array;var i=0,s=this.COL_COUNT;while(i<s){var o=i++;if(o==e.getCol())continue;this._lightningAffected.push(this.getGem(e.getRow(),o))}var i=0,s=this.ROW_COUNT;while(i<s){var u=i++;if(u==e.getRow())continue;this._lightningAffected.push(this.getGem(u,e.getCol()))}},handlePowerupActivated:function(e){var t=e.getPowerup()||-1,n=zx_foodies.DataLoader.getPowerById(t).name;switch(n){case"bomb_blast":this.handleBomb(e);break;case"lightningbolt":this.startLightningBolt(e),this._decorativeSoundActivated=!0;break;case"specialSight":this.startSpecialSight();break;case"colorSplash":this.activateColorSplash();break;case"colorBlast":this.activateColorBlast();break;case"rearrange":this.activateRearrange();default:}},handleGemExplode:function(e,t){HxOverrides.remove(this.gems[e.getCol()],e),this.onGemBlast!=null&&this.onGemBlast(e,t),this.fillGemCol(e.getCol());var n=0,r=e.getRow()+1;while(n<r){var i=n++;this.getGem(i,e.getCol()).setNotInPlace()}this._shouldPlayDing=!0;var s=this.parent;this._noteToPlay=s.getSpreePercent()*9|0},handleTick:function(){this._hintTime!=-1&&createjs.Ticker.getTime(!0)>=this._hintTime&&this._solvingGroups.length<=0&&this.addSolvingGroups(zx_foodies.GemGrid.MIN_GROUPS);if(this._isInSpecialSight&&createjs.Ticker.getTime(!0)>=this._specialSightEnd){this._isInSpecialSight=!1;var e=0,t=this.COL_COUNT;while(e<t){var n=e++,r=0,i=this.ROW_COUNT;while(r<i){var s=r++;this.getGem(s,n).stopZenGlow(),this.getGem(s,n).stopFocusFade()}}this._hintTime=createjs.Ticker.getTime(!0)+zx_foodies.GemGrid.HINT_INTERVAL}},dropNeededGems:function(){var e=0,t=this.COL_COUNT;while(e<t){var n=e++,r=!0,i=this.ROW_COUNT-1;while(r&&i>=0)r=this.getGem(i,n).isInPlace(),r=r&&this.getGem(i,n).isAlive(),i--;i++;if(i==0&&r)continue;i>=0&&i<this.ROW_COUNT&&this.getGem(i,n).drop()}},addSolvingGroups:function(e){for(var t=0;t<this.COL_COUNT;++t)for(var n=0;n<this.ROW_COUNT;++n)if(this.getGem(n,t).getType()>99&&this.getGem(n,t)!=103){console.log("return");return}while(this._solvingGroups.length<e){var r=e-this._solvingGroups.length,i=0;while(i<r){var t=i++,s=Std.random(this.COL_COUNT-2)+1,o=Std.random(this.ROW_COUNT-2)+1;Std.random(2)==0?this.getGem(o+1,s).getType()<this.gemTypeNum&&this.getGem(o+1,s).changeType(Std.random(this.gemTypeNum)+1):this.getGem(o-1,s).getType()<this.gemTypeNum&&this.getGem(o-1,s).changeType(Std.random(this.gemTypeNum)+1),Std.random(2)==0?this.getGem(o,s+1).getType()<this.gemTypeNum&&this.getGem(o,s+1).changeType(Std.random(this.gemTypeNum)+1):this.getGem(o,s-1).getType()<this.gemTypeNum&&this.getGem(o,s-1).changeType(Std.random(this.gemTypeNum)+1)}this._solvingGroups=this._solver.getSolvingGroups()}},handleGemLand:function(e){var t=0,n=0,r=this.gems.length;while(n<r){var i=n++,s=0,o=this.gems[i].length;while(s<o){var u=s++;this.gems[i][u].getSpeed()!=0&&t++}}if(t==0){if(!this._landingTested){this._landingTested=!0,this._solvingGroups=this._solver.getSolvingGroups(),this.addSolvingGroups(zx_foodies.GemGrid.MIN_GROUPS),this._hintTime=createjs.Ticker.getTime(!0)+zx_foodies.GemGrid.HINT_INTERVAL;if(this._isInSpecialSight)if(createjs.Ticker.getTime(!0)+zx_foodies.GemGrid.SIGHT_STOP_THRESH>=this._specialSightEnd)this._specialSightEnd=createjs.Ticker.getTime(!0)-1;else{if(this._prevSolvingGroups!=null){var n=0,r=this._prevSolvingGroups.length;while(n<r){var a=n++,s=0,o=this._prevSolvingGroups[a].length;while(s<o){var f=s++;this._prevSolvingGroups[a][f]!=null&&this._prevSolvingGroups[a][f].stopZenGlow()}}}var n=0,r=this._solvingGroups.length;while(n<r){var a=n++,s=0,o=this._solvingGroups[a].length;while(s<o){var f=s++;this._solvingGroups[a][f].startZenGlow()}}}this._prevSolvingGroups=this._solvingGroups,this.onReadyForPowerup!=null&&(this.nextPowerup=this.onReadyForPowerup())}}else this._landingTested=!1},handleBomb:function(e){var t=images.explode,n={animations:{all:{frames:[0,1,2,3,4,5,6,7,8]}},images:[images.explode],frames:[[473,575,200,195,0,-67,-35],[0,575,228,247,0,-47,-23],[0,0,307,290,0,-5,0],[228,575,245,233,0,-30,-30],[0,290,293,285,0,-12,-2],[293,290,303,283,0,0,0],[622,0,305,290,0,0,0],[307,0,315,290,0,0,0],[596,290,305,275,0,-3,-5]]},r=new createjs.SpriteSheet(n);this.explode=new createjs.BitmapAnimation(r),this.explode.regX=zx_foodies.bombPicSize.width/6,this.explode.regY=zx_foodies.bombPicSize.height/6,this.explode.x=e.x,this.explode.y=e.y,this.addChild(this.explode);var i=this;this.explode.onAnimationEnd=function(){i.removeChild(i.explode);var t=e.getCol(),n=e.getRow();for(var r=n-1;r<n+2;++r)for(var s=t-1;s<t+2;++s)i.getGem(r,s)?i.getGem(r,s).explode():"";i.dropNeededGems()},this.explode.gotoAndPlay("all")},handleGemClick:function(e){if(e._gemType>=zx_foodies.Gem.PowerupIndex){e.explode(),this.dropNeededGems();return}this._clickedGroup=new Array;if(this._solver.isInSolvingGroup(e,this._clickedGroup)){if(this._isInSpecialSight){var t=0,n=this.COL_COUNT;while(t<n){var r=t++,i=0,s=this.ROW_COUNT;while(i<s){var o=i++;this.getGem(o,r).stopZenGlow()}}}this._decorativeSoundActivated=!1;var t=0,n=this._clickedGroup.length;while(t<n){var u=t++;this._clickedGroup[u].explode()}if(!this._decorativeSoundActivated)var a=Std.random(3)+1;if(this._groupExplodeBomb!=null){var f=new Array,t=0,n=this._clickedGroup.length;while(t<n){var u=t++,s=-1;while(s<2){var l=s++,i=-1;while(i<2){var c=i++;if(l==0&&c==0)continue;var h=this.getGem(this._clickedGroup[u].getRow()+c,this._clickedGroup[u].getCol()+l);h!=null&&!Lambda.has(this._clickedGroup,h)&&h.explode()}}}this._groupExplodeBomb=null}this.dropNeededGems(),this._hintTime=-1;if(this._hintGroup!=null&&this.getChildIndex(this._hintGroup[0])!=-1){var t=0,n=this._hintGroup.length;while(t<n){var u=t++;this._hintGroup[u].stopHintGlow()}}this._shouldPlayDing&&(this._shouldPlayDing=!1)}else{if(!this._isInSpecialSight){var t=0,n=this._clickedGroup.length;while(t<n){var u=t++;this._clickedGroup[u].alphaFade()}}this.onWrongGroup!=null&&this.onWrongGroup()}},placePowerup:function(){},launchPowerup:function(e){var t=new Array,n=0,r=this._solvingGroups.length;while(n<r){var i=n++;t=t.concat(this._solvingGroups[i])}this._poweredGem=null;while(this._poweredGem==null){var s=Std.random(t.length);this._poweredGem=t[s],this._poweredGem.getPowerup()!=-1&&(this._poweredGem=null)}return this._powerupType=e,this._poweredGem.coverGlyph(),this.localToGlobal(this._poweredGem.x,this._poweredGem.y)},getGem:function(e,t){return e<0||e>=this.ROW_COUNT||t<0||t>=this.COL_COUNT?null:this.gems[t][e]},fillGemCol:function(e,t){var n=this.ROW_COUNT-this.gems[e].length,r=this.gems[e].length,i;while(r<this.ROW_COUNT){var s=r++;this.nextPowerup!=null?(i=this.nextPowerup+zx_foodies.Gem.PowerupIndex,this.nextPowerup=null):t?i=t[e][s]:i=GameModel.generateGem(this.gemTypeNum);var o=zx_foodies.Gem.createGem(i,this);o.setRow(n-(s+1)),o.setCol(e),o.x=o.getCol()*zx_foodies.Gem.GEM_SIZE+zx_foodies.Gem.GEM_SIZE/2,o.y=-this.y,o.onGemClick=$bind(this,this.handleGemClick),o.onExplode=$bind(this,this.handleGemExplode),o.onPowerupActivated=$bind(this,this.handlePowerupActivated),o.onLand=$bind(this,this.handleGemLand),o.onRemove=$bind(this,this.handleGemRemove),this._isInSpecialSight&&o.startFocusFade(!0),this.addChild(o),this.gems[e].unshift(o)}},_noteToPlay:null,_shouldPlayDing:null,_lightningAffected:null,_lightVerti:null,_lightHoriz:null,_clickedGroup:null,_groupExplodeBomb:null,_specialSightEnd:null,_isInSpecialSight:null,_powerupType:null,_poweredGem:null,_decorativeSoundActivated:null,_landingTested:null,_hintGroup:null,_hintTime:null,_prevSolvingGroups:null,_solvingGroups:null,_solver:null,gems:null,COL_COUNT:null,ROW_COUNT:null,onWrongGroup:null,onPowerupActivated:null,onGemBlast:null,onReadyForPowerup:null,__class__:zx_foodies.GemGrid});zx_foodies.GridSolver=$hxClasses["zx_foodies.GridSolver"]=function(e){this.CONT_VISITED=1,this.CONT_NONE=0,this.MIN_GEMS_TO_SOLVE=3,this._grid=e},zx_foodies.GridSolver.__name__=["zx","foodies","GridSolver"],zx_foodies.GridSolver.prototype={getGroupByGem:function(e,t,n){if(t==null){t=new Array;var r=0,i=this._grid.COL_COUNT;while(r<i){var s=r++,o=new Array,u=0,a=this._grid.ROW_COUNT;while(u<a){var f=u++;o[o.length]=this.CONT_NONE}t[t.length]=o}return this.getGroupByGem(e,t,e.getType())}if(t[e.getCol()][e.getRow()]==this.CONT_NONE&&e.isRelevantForSolve()){var l=new Array;t[e.getCol()][e.getRow()]=this.CONT_VISITED;if(e.isRelevantForSolve()&&e.getType()==n){l[l.length]=e;if(e.getRow()>0){var c=this._grid.getGem(e.getRow()-1,e.getCol());c!=null&&c.isRelevantForSolve()&&(l=l.concat(this.getGroupByGem(c,t,n)))}if(e.getCol()<this._grid.COL_COUNT-1){var h=this._grid.getGem(e.getRow(),e.getCol()+1);h!=null&&h.isRelevantForSolve()&&(l=l.concat(this.getGroupByGem(h,t,n)))}if(e.getRow()<this._grid.ROW_COUNT-1){var p=this._grid.getGem(e.getRow()+1,e.getCol());p!=null&&p.isRelevantForSolve()&&(l=l.concat(this.getGroupByGem(p,t,n)))}if(e.getCol()>0){var d=this._grid.getGem(e.getRow(),e.getCol()-1);d!=null&&d.isRelevantForSolve()&&(l=l.concat(this.getGroupByGem(d,t,n)))}}return l}return new Array},isInGroupBySize:function(e,t,n){var r=this.getGroupByGem(e);if(n!=null){var i=0,s=r.length;while(i<s){var o=i++;n[o]=r[o]}}return n.length>=this.MIN_GEMS_TO_SOLVE?!0:!1},isInSolvingGroup:function(e,t){return this.isInGroupBySize(e,this.MIN_GEMS_TO_SOLVE,t)},getGroupsBySize:function(e,t){t==null&&(t=-1);var n=new Array,r=new Array,i=0,s=0,o=this._grid.gems.length;while(s<o){var u=s++,a=0,f=this._grid.gems[u].length;while(a<f){var l=a++;i++}}i!=this._grid.COL_COUNT*this._grid.ROW_COUNT&&null;var s=0,o=this._grid.COL_COUNT;while(s<o){var c=s++;r[c]=new Array;var a=0,f=this._grid.ROW_COUNT;while(a<f){var h=a++;r[c][h]=!1}}var p=new Array,s=0,o=this._grid.COL_COUNT;while(s<o){var c=s++,a=0,f=this._grid.ROW_COUNT;while(a<f){var h=a++;if(r[c][h])continue;if(this.isInSolvingGroup(this._grid.gems[c][h],p)){n[n.length]=p.slice();if(t!=-1&&n.length==t)return n}var d=0,v=p.length;while(d<v){var u=d++;r[p[u].getCol()][p[u].getRow()]=!0}p=new Array}}return n},getSolvingGroups:function(e,t){e==null&&(e=-1);if(t){this._grid={COL_COUNT:7,ROW_COUNT:7,gems:[],getGem:function(e,t){return this.gems[e][t]}};for(var n=0;n<this._grid.COL_COUNT;++n){this._grid.gems[n]=new Array;for(var r=0;r<this._grid.ROW_COUNT;++r){var i={col:n,row:r,gemType:t[n][r],getType:function(){return this.gemType},getCol:function(){return this.col},getRow:function(){return this.row},isRelevantForSolve:function(){return!0}};this._grid.gems[n][r]=i}}}return this.getGroupsBySize(this.MIN_GEMS_TO_SOLVE,e)},_grid:null,CONT_VISITED:null,CONT_NONE:null,MIN_GEMS_TO_SOLVE:null,__class__:zx_foodies.GridSolver};zx_foodies.Main=$hxClasses["zx_foodies.Main"]=function(){},zx_foodies.Main.__name__=["zx","foodies","Main"],zx_foodies.Main._stage=null,zx_foodies.Main._game=null,zx_foodies.Main._ffHeight=null,zx_foodies.Main.main=function(){UserModel.getPlayMode()==PLAY_MODE.SINGLE&&GameModel.initLevel(),choosePageStage&&createjs.Ticker.removeListener(choosePageStage),matchPageStage&&createjs.Ticker.removeListener(matchPageStage),zx_foodies.Main._stage&&createjs.Ticker.removeListener(zx_foodies.Main._stage),zx_foodies.Main.testFFHeight(),createjs.Ticker.useRAF=!0,createjs.Ticker.setFPS(60),zx_foodies.Main._stage=new createjs.Stage(js.Lib.document.getElementById("stageCanvas")),zx_foodies.Main._game=new zx_foodies.Game(zx_foodies.Main._stage,zx_foodies.Main._stageBg,zx_foodies.Main._stageTime),createjs.Ticker.addListener(zx_foodies.Main._stage),createjs.Touch.enable(zx_foodies.Main._stage,!0,!1)},zx_foodies.Main.testFFHeight=function(){var e=/Firefox/.test(navigator.userAgent);e&&viewporter.ACTIVE&&(zx_foodies.Main._ffHeight=js.Lib.window.innerHeight)},zx_foodies.Main.getFFHeight=function(){return zx_foodies.Main._ffHeight};var GameModel=Model.Extend({fightKey:null,currentScore:null,currentLevel:null,setFightKey:function(e){this.fightKey=e},getFightKey:function(){return this.fightKey},initLevel:function(){this.currentScore=0,this.currentLevel=1},isReadyToFight:function(e){if(APP_DEBUG){e(MOCK_ISREADYTOFIGHT_RES);return}var t=new SocketInterface.isReadyToFight;t.params.fightKey=this.fightKey,P_Socket.request(t.url,t.params,function(t){e?e(t):""})},getGemGrid:function(e,t){if(APP_DEBUG){var n=!1,r=GameModel.currentLevel?zx_foodies.LevelDB[GameModel.currentLevel-1].gemTypeNum:zx_foodies.Gem.GEMS_COUNT;while(!n){var i=new Array;for(var s=0;s<e.COL_COUNT;++s){i[s]=new Array;for(var o=0;o<e.ROW_COUNT;++o)i[s][o]=Math.random()>.5?Std.random(zx_foodies.Gem.GEMS_COUNT)+1:Std.random(6)+1+100}var u=new zx_foodies.GridSolver,a=u.getSolvingGroups(-1,i);a.length>=zx_foodies.GemGrid.MIN_GROUPS&&(n=!0)}t(i,r);return}if(UserModel.getPlayMode()==PLAY_MODE.SINGLE){var n=!1,r=GameModel.currentLevel?zx_foodies.LevelDB[GameModel.currentLevel-1].gemTypeNum:zx_foodies.Gem.GEMS_COUNT;while(!n){var i=new Array;for(var s=0;s<e.COL_COUNT;++s){i[s]=new Array;for(var o=0;o<e.ROW_COUNT;++o)i[s][o]=this.generateGem(r)}var u=new zx_foodies.GridSolver,a=u.getSolvingGroups(-1,i);a.length>=zx_foodies.GemGrid.MIN_GROUPS&&(n=!0)}t(i,r)}else if(UserModel.getPlayMode()==PLAY_MODE.BATTLE){var f=this;(function(){var e=arguments.callee,n=this;setTimeout(function(){var r=new SocketInterface.toFight;r.params.fightKey=f.fightKey,P_Socket.request(r.url,r.params,function(r){r.success?t?t(r.data.field,r.data.count):"":e.call(n)})},500)})()}},checkIsFinished:function(e){UserModel.getPlayMode()==PLAY_MODE.BATTLE&&function(){var t=this,n=arguments.callee;setTimeout(function(){GameModel.isFinished(function(r){r.success?UserModel.getUserStatus()==USER_STATUS.PLAYING&&(e?e():""):n.call(t)})},1e4)}()},isFinished:function(e){if(APP_DEBUG){e(MOCK_ISFINISHED_RES);return}var t=new SocketInterface.isFinished;t.params={fightKey:this.fightKey},P_Socket.request(t.url,t.params,function(t){e?e(t):""})},gemGridConstrutor:function(e,t){var n=!1;while(!n){var r=new Array;for(var i=0;i<e.COL_COUNT;++i){r[i]=new Array;for(var s=0;s<e.ROW_COUNT;++s)r[i][s]=this.generateGem(e.gemTypeNum)}var o=new zx_foodies.GridSolver,u=o.getSolvingGroups(-1,r);u.length>=zx_foodies.GemGrid.MIN_GROUPS&&(n=!0)}t(r)},generateGem:function(e){var t={4:[31,27,23,19],5:[27,23,20,17,13],6:[24,21,18,15,12,10],7:[19,18,16,14,12,11,10]},n,r=Math.ceil(Math.random()*(new Date).getTime())%100,i=0,s=t[e];for(var o=0,u=s.length;o<u;o++)r>=i&&r<i+s[o]&&(n=o+1),i+=s[o];return n},getScore:function(e,t,n){var r={4:[10,12,14,18],5:[20,26,32,38,45],6:[30,36,43,52,60,70],7:[40,50,60,70,80,90,100]},i=r[e],s=0;if(UserModel.getPlayMode()==PLAY_MODE.SINGLE){for(var o=0;o<e;++o)s+=t[o+1+""];this.currentScore+=s;var u=this;(function(){var e=zx_foodies.LevelDB[u.currentLevel-1].scoreRequired;u.currentScore>e&&(u.currentLevel<zx_foodies.LevelDB.length?(u.currentScore-=e,++u.currentLevel):u.currentScore=zx_foodies.LevelDB[u.currentLevel-1].scoreRequired,arguments.callee())})(),n({score:this.currentScore,level:this.currentLevel})}else if(UserModel.getPlayMode()==PLAY_MODE.BATTLE){if(APP_DEBUG){var a="";for(var o=0;o<e;++o)a+=""+(1e4+Number(o+1)+"").substr(1)+(1e4+t[o+1]+"").substr(1);SceneRouter.battleResultScene.showResult(MOCK_BATTLE_RESULT);return}var a="";for(var o=0;o<e;++o)a+=""+(1e4+Number(o+1)+"").substr(1)+(1e4+t[o+1]+"").substr(1);var f=new SocketInterface.postResult;f.params={result:a,fightKey:this.fightKey};var u=this;P_Socket.request(f.url,f.params,function(e){e.success&&function(){var e=arguments.callee,t=this;setTimeout(function(){var n=new SocketInterface.isFinishCal;n.params={fightKey:u.fightKey},P_Socket.request(n.url,n.params,function(n){n.success||e.call(t)})},1e3)}()})}}});var GameView=View.Extend({renderGame:function(){this.renderEl("stageContainer"),zx_foodies.Main.main()}});var msgBox=msgBox||{log:function(e){var t=document.getElementById("msgBox");t.style.display="block";var n=document.getElementById("msgFont");n.innerHTML=e+"",setTimeout(function(){n.innerHTML="",t.style.display="none"},3e3)}};var FriendListItem=function(e,t,n){this.id=e,this.onInvite=null,this.onDelete=null,this.el='<li class="male"><img src="" /><p class="name">名称：'+t+"</p>"+'<p class="data">级别：<span>'+19+"</span>总数："+75+"战</p>"+'<a id="inviteBtn'+this.id+'" href="javascript:;" class="btn_invite">邀请对战</a>'+"</li>";var r=this;EventDelegate.bind("inviteBtn"+this.id,function(){r.onInvite?r.onInvite():""}),EventDelegate.bind("deleteBtn"+this.id,function(){r.onDelete?r.onDelete():""})};var FriendsList=function(e,t){this.el=document.createElement("div"),this.el.id=e,this.el.className="friend_list";var n="",r="";for(var i=0,s=t.length;i<s;++i){var o=t[i];friendItem=new FriendListItem(i,o.friend_name,o.friend_status),friendItem.onInvite=function(){console.log("invite friend to play a game"),UserModel.doInviteFriend(o.friend_id,function(){console.log("invite result data")})},friendItem.onDelete=function(){var e=o.friend_id;console.log("remove friend"),UserModel.doRemoveFriend(e,function(e){e.success?alert("删除好友成功"):alert("删除好友失败"),window.location.reload()})},o.friend_status=="online"?n+=friendItem.el:r+=friendItem.el}var u=document.createElement("ul");u.innerHTML=n+r,this.el.appendChild(u)};var ChoosePage=function(){choosePageStage&&createjs.Ticker.removeListener(choosePageStage),choosePageStage=new createjs.Stage(js.Lib.document.getElementById("stageCanvas")),choosePageStage.update(),createjs.Ticker.setFPS(24),createjs.Ticker.addListener(choosePageStage),this.choosePage=new libFinding.finding,this.choosePage.regX=0,this.choosePage.regY=0,choosePageStage.addChild(this.choosePage),this.initPage(),this.initEvent(),this.initInfo()};ChoosePage.prototype={initPage:function(){this.choosePage.girls_small.visible=!1,this.choosePage.boys_small.visible=!1,this.choosePage.girlHead.visible=!1,this.choosePage.girlHead.instance_2.image=images.lgirlhead,this.choosePage.girlBg.visible=!1,this.choosePage.boyHead.visible=!1,this.choosePage.boyHead.instance_9.image=images.lboyhead,this.choosePage.boyBg.visible=!1,this.choosePage.randomEnemy.visible=!1,this.choosePage.inviteFriend.visible=!1,this.choosePage.iamcoming.visible=!1,this.talkTxt=new createjs.Text("准备好啦!","20px 黑体","#000000"),this.talkTxt.setTransform(230,525),this.choosePage.addChild(this.talkTxt);var e=new createjs.Text("名称:"+UserModel.getUserInfo().username,"20px 黑体","#000000");e.setTransform(50,650),this.choosePage.addChild(e);var t=new createjs.Text("级别:"+UserModel.getUserInfo().level,"20px 黑体","#000000");t.setTransform(220,650),this.choosePage.addChild(t);var n=new createjs.Text("总数:"+UserModel.getUserInfo().battles,"20px 黑体","#000000");n.setTransform(300,650),this.choosePage.addChild(n)},initEvent:function(){var e=this;this.choosePage.randomEnemy.onClick=function(){e.renderSearch()},this.choosePage.inviteFriend.onClick=function(){console.log("inviteFriend")},this.choosePage.backToIndex.onClick=function(){e.beforeLeave(),Router.goto("#user/renderIndex")}},initInfo:function(){var e=UserModel.getUserInfo();e.sex==USER_SEX.MALE?(this.choosePage.boyBg.visible=!0,this.choosePage.boyHead.visible=!0):e.sex==USER_SEX.FEMALE&&(this.choosePage.girlBg.visible=!0,this.choosePage.girlHead.visible=!0)},handleResize:function(e){var t=/Firefox/.test(navigator.userAgent),n=/Android/.test(navigator.userAgent),r=js.Lib.window.innerWidth,i=js.Lib.window.innerHeight;choosePageStage.canvas.width=r,choosePageStage.canvas.height=i;if(!viewporter.isLandscape()){if(t){i=Math.floor(zx_foodies.Main.getFFHeight());var s=Math.ceil((js.Lib.window.screen.height-110)*(r/js.Lib.window.screen.width));n||(s=Math.ceil((js.Lib.window.screen.height-30)*(r/js.Lib.window.screen.width))),s<i&&(i=Math.floor(s))}viewporter.ACTIVE&&i<r||(this._viewport.width=r,this._viewport.height=i),this._orientError!=null&&t&&this.handleViewportChanged()}else t&&this.handleViewportChanged();createjs.Ticker.getPaused()&&choosePageStage.update()},renderChoose:function(){this.choosePage.randomEnemy.visible=!0,this.choosePage.inviteFriend.visible=!0},renderSearch:function(){this.choosePage.girls.visible=!1,this.choosePage.boys.visible=!1,this.choosePage.randomEnemy.visible=!1,this.choosePage.inviteFriend.visible=!1,this.choosePage.instance_5.visible=!1,this.choosePage.iamcoming.visible=!0,UserModel.setUserStatus(USER_STATUS.SEARCHING);var e=this;(function(){var t=arguments.callee,n=this;e.choosePage.girls.visible=!1,createjs.Tween.get(e.choosePage.girls_small).to({visible:!0}).wait(500).call(function(){e.choosePage.girls_small.visible=!1,createjs.Tween.get(e.choosePage.girls).to({visible:!0}).wait(500).call(function(){UserModel.getUserStatus()==USER_STATUS.SEARCHING&&t.call(n)})})})(),function(){var t=arguments.callee,n=this;e.choosePage.boys_small.visible=!1,createjs.Tween.get(e.choosePage.boys).to({visible:!0}).wait(500).call(function(){e.choosePage.boys.visible=!1,createjs.Tween.get(e.choosePage.boys_small).to({visible:!0}).wait(500).call(function(){UserModel.getUserStatus()==USER_STATUS.SEARCHING&&t.call(n)})})}(),setTimeout(function(){e.choosePage.girlHead.instance_2.image=images.lgirlwait,e.choosePage.boyHead.instance_9.image=images.lboywait,e.talkTxt.text="快来人吧!"},3e3),UserModel.searching(function(){var e=arguments.callee,t=this;setTimeout(function(){UserModel.getUserStatus()==USER_STATUS.SEARCHING&&UserModel.searching(function(){e.call(t)})},5e3)})},beforeLeave:function(){UserModel.backToIndex()}};var MatchPage=function(){matchPageStage&&createjs.Ticker.removeListener(matchPageStage),this.timeoutId=null,matchPageStage=new createjs.Stage(js.Lib.document.getElementById("stageCanvas")),matchPageStage.update(),createjs.Ticker.setFPS(24),createjs.Ticker.addListener(matchPageStage),this.matchPage=new libMatching.matching,this.matchPage.regX=0,this.matchPage.regY=0,matchPageStage.addChild(this.matchPage),this.initPage(),this.initEvent(),this.initInfo(),this.waitTofight()};MatchPage.prototype={initPage:function(){this.matchPage.girlHead.visible=!1,this.matchPage.girlBg.visible=!1,this.matchPage.boyHead.visible=!1,this.matchPage.boyBg.visible=!1,this.selfPatten={bg:this.matchPage.boyBg.instance_11,head:this.matchPage.boyHead.instance_7},this.competitorPatten={bg:this.matchPage.girlBg.instance_10,head:this.matchPage.girlHead.instance_3};var e=new createjs.Text("多多指教哦!","20px 黑体","#000000");e.setTransform(230,525),this.matchPage.addChild(e);var t=new createjs.Text("名称:"+UserModel.getUserInfo().username,"20px 黑体","#000000");t.setTransform(50,650),this.matchPage.addChild(t);var n=new createjs.Text("级别:"+UserModel.getUserInfo().level,"20px 黑体","#000000");n.setTransform(220,650),this.matchPage.addChild(n);var r=new createjs.Text("对战数:"+UserModel.getUserInfo().battles,"20px 黑体","#000000");r.setTransform(300,650),this.matchPage.addChild(r);var i=new createjs.Text("多多指教哦!","20px 黑体","#000000");i.setTransform(230,230),this.matchPage.addChild(i);var s=new createjs.Text("名称:"+UserModel.getCompetitorInfo().username,"20px 黑体","#000000");s.setTransform(50,355),this.matchPage.addChild(s);var o=new createjs.Text("级别:"+UserModel.getCompetitorInfo().level,"20px 黑体","#000000");o.setTransform(220,355),this.matchPage.addChild(o);var u=new createjs.Text("对战数:"+UserModel.getCompetitorInfo().battles,"20px 黑体","#000000");u.setTransform(300,355),this.matchPage.addChild(u)},initEvent:function(){var e=this;this.matchPage.beginFight.onClick=function(){console.log("beginFight")},this.matchPage.rechoose.onClick=function(){console.log("rechoose"),e.beforeLeave(),Router.goto("#user/renderSearch")},this.matchPage.backToIndex.onClick=function(){e.beforeLeave(),Router.goto("#user/renderIndex")}},initInfo:function(){UserModel.getUserInfo().sex==USER_SEX.MALE?(this.selfPatten.bg.image=images.bgboy,this.selfPatten.head.image=images.lboyhead):UserModel.getUserInfo().sex==USER_SEX.FEMALE&&(this.selfPatten.bg.image=images.bggirl,this.selfPatten.head.image=images.lgirlhead),UserModel.getCompetitorInfo().sex==USER_SEX.MALE?(this.competitorPatten.bg.image=images.bgboy,this.competitorPatten.head.image=images.lboyhead):UserModel.getCompetitorInfo().sex==USER_SEX.FEMALE&&(this.competitorPatten.bg.image=images.bggirl,this.competitorPatten.head.image=images.lgirlhead),this.matchPage.girlHead.visible=!0,this.matchPage.girlBg.visible=!0,this.matchPage.boyHead.visible=!0,this.matchPage.boyBg.visible=!0},handleResize:function(e){var t=/Firefox/.test(navigator.userAgent),n=/Android/.test(navigator.userAgent),r=js.Lib.window.innerWidth,i=js.Lib.window.innerHeight;matchPageStage.canvas.width=r,matchPageStage.canvas.height=i;if(!viewporter.isLandscape()){if(t){i=Math.floor(zx_foodies.Main.getFFHeight());var s=Math.ceil((js.Lib.window.screen.height-110)*(r/js.Lib.window.screen.width));n||(s=Math.ceil((js.Lib.window.screen.height-30)*(r/js.Lib.window.screen.width))),s<i&&(i=Math.floor(s))}viewporter.ACTIVE&&i<r||(this._viewport.width=r,this._viewport.height=i),this._orientError!=null&&t&&this.handleViewportChanged()}else t&&this.handleViewportChanged();createjs.Ticker.getPaused()&&matchPageStage.update()},waitTofight:function(){this.timeoutId=setTimeout(function(){UserModel.getUserStatus()==USER_STATUS.REARY&&GameModel.isReadyToFight(function(e){e.success&&Router.goto("game/renderGame")})},3e3)},beforeLeave:function(){UserModel.backToIndex(),UserModel.resetCompetitorInfo(),GameModel.setFightKey(null),clearTimeout(this.timeoutId)}};var UserModel=Model.Extend({_playMode:null,userInfo:{},competitorInfo:{},userStatus:null,setUserStatus:function(e){this.userStatus=e},getUserStatus:function(){return this.userStatus},setCompetitorInfo:function(e){for(var t in e)this.competitorInfo[t]=e[t]},getCompetitorInfo:function(){return APP_DEBUG?MOCK_COMPETIORINFO:this.competitorInfo},resetCompetitorInfo:function(){this.competitorInfo={}},setPlayMode:function(e){this._playMode=e},getPlayMode:function(){return this._playMode},setUserInfo:function(e){for(var t in e)this.userInfo[t]=e[t]},getUserInfo:function(){return APP_DEBUG?MOCK_USER_INFO:this.userInfo},login:function(e,t,n){if(APP_DEBUG){n(MOCK_LOGIN_RES);return}var r=this,i=new HttpInterface.login;i.params.username=e,i.params.password=t,Ajax.post(i.url,i.params,function(e){var t=JSON.parse(e);t.success?P_Socket.connect(function(e){e.success?n?n(e):"":msgBox.log(e.msg)}):msgBox.log(t.msg)})},regiestSubmit:function(e,t,n,r){if(APP_DEBUG){r(MOCK_REGIEST_RES);return}var i=new HttpInterface.regiest;i.params.username=e,i.params.password=t,i.params.gender=n,Ajax.post(i.url,i.params,function(e){var t=JSON.parse(e);t.success?P_Socket.connect(function(e){e.success?r?r(e):"":msgBox.log(e.msg)}):msgBox.log(t.msg)})},getFriendsList:function(e){if(APP_DEBUG){e(MOCK_FriendsList);return}var t=new SocketInterface.getFriendsList;t.params.sid=cookie.get("FOODIESID"),P_Socket.request(t.url,t.params,function(t){e?e(t):""})},doAddFriend:function(e,t){if(APP_DEBUG){t(MOCK_ADDFRIEND_RES);return}var n=new SocketInterface.addFriend;n.params.sid=cookie.get("FOODIESID"),n.params.friend_id=e.friendId?e.friendId:null,n.params.friend_name=e.friendName?e.friendName:null,P_Socket.request(n.url,n.params,function(e){t?t(e):""})},doInviteFriend:function(e,t){},doRemoveFriend:function(e,t){if(APP_DEBUG){t(MOCK_REMOVEFRIEND_RES);return}var n=new SocketInterface.removeFriend;removeFriend.params.sid=cookie.get("FOODIESID"),addFriendITF.params.friend_id=e,P_Socket.request(n.url,removeFriend.params,function(e){t?t(e):""})},searching:function(e){if(APP_DEBUG){setTimeout(function(){e(MOCK_SEARCHING),UserModel.getUserStatus()==USER_STATUS.SEARCHING&&(GameModel.setFightKey("FIGHTKEY"),UserModel.setUserStatus(USER_STATUS.REARY),Router.goto("#user/renderMatching"))},5e3);return}var t=new SocketInterface.searching;P_Socket.request(t.url,t.params,function(t){e?e(t):""})},backToIndex:function(){if(APP_DEBUG)return;var e=new SocketInterface.backToIndex;e.params={fightKey:GameModel.getFightKey(),user_id:UserModel.getUserInfo().user_id},P_Socket.request(e.url,e.params,function(e){})}});var UserView=View.Extend({el:null,events:{SinglePlayBtn:"singleplay",MultiPlayBtn:"multiPlay",gotoRegiestBtn:"gotoRegiest",gotoLoginBtn:"gotoLogin",loginBtn:"login",regiestSubmitBtn:"regiestSubmit",addFriendBtn:"doAddFriend",famaleChoiceBtn:"famaleChoice",maleChoiceBtn:"maleChoice"},renderIndex:function(){UserModel.setPlayMode(PLAY_MODE.NONE),UserModel.setUserStatus(USER_STATUS.NONE),this.renderEl("modSelectPatten")},renderLogin:function(){this.renderEl("loginPatten")},renderRegiest:function(){this.renderEl("regiestPatten")},renderFriendsPatten:function(){var e=this;UserModel.getFriendsList(function(t){if(t.success&&t.data){e.renderEl("friendsPatten");var n=document.getElementById("friendContainer"),r=new FriendsList("friendslist",t.data),i=document.getElementById("buttomMenu");n.insertBefore(r.el,i)}else"获取列表失败！"})},renderChoose:function(){this.renderEl("stageContainer");var e=new ChoosePage;e.renderChoose()},renderSearch:function(){this.renderEl("stageContainer");var e=new ChoosePage;e.renderSearch()},renderMatching:function(){this.renderEl("stageContainer");var e=new MatchPage},singleplay:function(){UserModel.setPlayMode(PLAY_MODE.SINGLE),Router.goto("#game/renderGame")},multiPlay:function(){UserModel.setPlayMode(PLAY_MODE.BATTLE),cookie.get("FOODIESID")?Router.goto("#user/renderChoose"):Router.goto("#user/renderLogin")},gotoRegiest:function(){Router.goto("#user/renderRegiest")},gotoLogin:function(){Router.goto("#user/renderLogin")},login:function(){var e=this,t=document.getElementById("loginUsername").value,n=document.getElementById("loginPassword").value;UserModel.login(t,n,function(e){Router.goto("#user/renderChoose")})},famaleChoice:function(){document.getElementById("maleChoice").className="",document.getElementById("famaleChoice").className="current"},maleChoice:function(){document.getElementById("famaleChoice").className="",document.getElementById("maleChoice").className="current"},regiestSubmit:function(){var e=this,t=document.getElementById("regUsername").value,n=document.getElementById("regPassword").value,r=document.getElementById("reRegPassword").value,i=document.getElementById("famaleChoice").className=="current"?USER_SEX.FEMALE:USER_SEX.MALE;n!=r?msgBox.log("2次输入密码不一致"):UserModel.regiestSubmit(t,n,i,function(e){Router.goto("#user/renderChoose")})},doAddFriend:function(){var e=this,t=document.getElementById("friendNameInput");UserModel.doAddFriend({friendName:t},function(e){e.success?alert("添加好友成功"):alert("添加好友失败"),window.location.reload()})}});